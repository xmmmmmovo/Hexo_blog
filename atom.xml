<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>å¼‚å›½è¿·å®«çš„åå­—è·¯å£</title>
  
  <subtitle>ä¸€ä½å¼±é¸¡å¸¦å­¦ç”Ÿçš„ä¸ªäººåšå®¢</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.fivezha.cn/"/>
  <updated>2020-07-18T15:36:34.841Z</updated>
  <id>http://blog.fivezha.cn/</id>
  
  <author>
    <name>xmmmmmovo</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>è°œä¹‹githubå¾½ç« </title>
    <link href="http://blog.fivezha.cn/2020/07/18/github-arctic/"/>
    <id>http://blog.fivezha.cn/2020/07/18/github-arctic/</id>
    <published>2020-07-18T14:51:41.000Z</published>
    <updated>2020-07-18T15:36:34.841Z</updated>
    
    <content type="html"><![CDATA[<p>æ²¡æƒ³åˆ°å±…ç„¶è¿™ä¹ˆå¿«å°±æŠ•å…¥ä½¿ç”¨äº†<a id="more"></a></p><p>â€‹    ä»Šå¤©ç‚¹å¼€äº†è®¸ä¹…æœªæ‰“å¼€çš„GitHubï¼Œè¿˜æ²¡æ¥å¾—åŠç‚¹è¿›åŠ¨æ€æŸ¥çœ‹å¤§ä½¬ä»¬starçš„é¡¹ç›®ä¹‹å‰ï¼Œè‡ªå·±ä¾¿å…ˆè¢«ä¸€åˆ™æ¶ˆæ¯å¸å¼•äº†ï¼Œæœ¬ç€å¤ªé•¿ä¸çœ‹çš„åŸåˆ™ï¼Œè¿˜æœªä»”ç»†æŸ¥çœ‹ä¾¿æ¡ä»¶åå°„èˆ¬çš„ç‚¹äº†<code>Got it</code>çš„åœ†è§’çŸ©å½¢æŒ‰é’®ã€‚ä¹‹åæˆ‘çš„è§†çº¿ä¾¿é¡ºç€æ°”æ³¡å‡¸èµ·æŒ‡å‘çš„ä½ç½®å¯»å»ï¼Œå‘ç°äº†ä¸€æšé›ªèŠ±å½¢çŠ¶æ–°å¾½ç« å‡ºç°åœ¨äº†è‡ªå·±<code>Profile -&gt; Highlights</code>ä¸Šï¼Œè®©é‚£æš<code>Pro</code>å¾½ç« æ˜¾å¾—ä¸é‚£ä¹ˆå­¤å•ã€‚æŸ¥çœ‹äº†ä¸€ä¸‹è¯¦ç»†ä¿¡æ¯åï¼Œé˜¿è¿™ï¼Œè¿™ä¸æ˜¯åŠå¹´å‰åœ¨æ²¹ç®¡çœ‹åˆ°è¿‡çš„<strong>GitHubåŒ—æä»£ç åº“</strong>è®¡åˆ’å—ï¼Ÿï¼</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pics/image-20200718231856879.png" alt="image-20200718231856879" title="">                </div>                <div class="image-caption">image-20200718231856879</div>            </figure><p>â€‹    å½“æ—¶å› ä¸ºæ–°å† çš„åŸå› å®…åœ¨å®¶é‡Œå®åœ¨æ˜¯å¤ªé—²äº†ï¼Œç”šè‡³æ— èŠåˆ°äº†åœ¨æ²¹ç®¡æœç´¢GitHubâ€¦â€¦.</p><p>â€‹    ç„¶åå°±çœ‹åˆ°äº†ä¸‹é¢çš„è¿™ä¸ªè§†é¢‘ğŸ‘‡</p><iframe width="560" height="315" src="https://www.youtube.com/embed/fzI9FNjXQ0o" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><p>â€‹    å¤§è‡´è®²çš„å°±æ˜¯æŠŠä»£ç å­˜ä¸€ä»½åˆ°åŒ—æå»</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ²¡æƒ³åˆ°å±…ç„¶è¿™ä¹ˆå¿«å°±æŠ•å…¥ä½¿ç”¨äº†
    
    </summary>
    
    
      <category term="daily" scheme="http://blog.fivezha.cn/categories/daily/"/>
    
    
      <category term="æ—¥å¸¸çå†™" scheme="http://blog.fivezha.cn/tags/%E6%97%A5%E5%B8%B8%E7%9E%8E%E5%86%99/"/>
    
  </entry>
  
  <entry>
    <title>ç®—æ³•(ç¬¬å››ç‰ˆ)ç¬”è®°(5)---çº¦ç‘Ÿå¤«ç¯é—®é¢˜</title>
    <link href="http://blog.fivezha.cn/2020/07/17/algorithm4-Josephus/"/>
    <id>http://blog.fivezha.cn/2020/07/17/algorithm4-Josephus/</id>
    <published>2020-07-17T09:24:23.000Z</published>
    <updated>2020-07-18T12:47:01.564Z</updated>
    
    <content type="html"><![CDATA[<p>çº¦ç‘Ÿå¤«ç¯é—®é¢˜<a id="more"></a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;çº¦ç‘Ÿå¤«ç¯é—®é¢˜
    
    </summary>
    
    
      <category term="algorithm4" scheme="http://blog.fivezha.cn/categories/algorithm4/"/>
    
    
      <category term="kotlin" scheme="http://blog.fivezha.cn/tags/kotlin/"/>
    
      <category term="algorithm" scheme="http://blog.fivezha.cn/tags/algorithm/"/>
    
  </entry>
  
  <entry>
    <title>ç®—æ³•(ç¬¬å››ç‰ˆ)ç¬”è®°(4)---Deque,Buffer,å››æ•°ä¹‹å’Œ,ä¸‰æ•°ä¹‹å’Œ</title>
    <link href="http://blog.fivezha.cn/2020/07/17/algorithm4-1-4/"/>
    <id>http://blog.fivezha.cn/2020/07/17/algorithm4-1-4/</id>
    <published>2020-07-17T01:36:36.000Z</published>
    <updated>2020-07-18T12:22:00.188Z</updated>
    
    <content type="html"><![CDATA[<p>åŒå‘é˜Ÿåˆ—,åŒæ ˆç¼“å†²åŒº,è›®åŠ›æ³•å››æ•°ä¹‹å’Œä»¥åŠå¿«é€Ÿä¸‰æ•°ä¹‹å’Œçš„å®ç°<a id="more"></a></p><h2 id="åŒå‘é˜Ÿåˆ—"><a href="#åŒå‘é˜Ÿåˆ—" class="headerlink" title="åŒå‘é˜Ÿåˆ—"></a>åŒå‘é˜Ÿåˆ—</h2><h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pics/image-20200717093114582.png" alt="image-20200717093114582" title="">                </div>                <div class="image-caption">image-20200717093114582</div>            </figure><h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ds</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Deque</span>&lt;<span class="type">T</span>&gt; : <span class="type">Iterable</span>&lt;<span class="type">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> list = LinkedList&lt;T&gt;()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">isEmpty</span><span class="params">()</span></span> = list.size == <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">size</span><span class="params">()</span></span> = list.size</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">pushLeft</span><span class="params">(element: <span class="type">T</span>)</span></span> = list.addFirst(element)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">pushRight</span><span class="params">(element: <span class="type">T</span>)</span></span> = list.addLast(element)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">popLeft</span><span class="params">()</span></span>: T = list.removeFirst()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">popRight</span><span class="params">()</span></span>: T = list.removeLast()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">toString</span><span class="params">()</span></span>: String &#123;</span><br><span class="line">        <span class="keyword">return</span> list.toString()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">iterator</span><span class="params">()</span></span>: Iterator&lt;T&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> list.iterator()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…³äºåŒå‘é“¾è¡¨çš„å®ç°è§è¿™ç¯‡åšå®¢: <a href="https://blog.fivezha.cn/2020/07/13/algorithm4-linkedlist/">ç®—æ³•(ç¬¬å››ç‰ˆ)ç¬”è®°(3)â€”åŒå‘é“¾è¡¨(LinkedList)å®ç°</a></p><h2 id="ç¼“å†²åŒºBuffer"><a href="#ç¼“å†²åŒºBuffer" class="headerlink" title="ç¼“å†²åŒºBuffer"></a>ç¼“å†²åŒºBuffer</h2><h3 id="API-1"><a href="#API-1" class="headerlink" title="API"></a>API</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pics/image-20200717093315081.png" alt="image-20200717093315081" title="">                </div>                <div class="image-caption">image-20200717093315081</div>            </figure><h3 id="å®ç°-1"><a href="#å®ç°-1" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ds</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Buffer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> ls = Stack&lt;<span class="built_in">Char</span>&gt;()</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> rs = Stack&lt;<span class="built_in">Char</span>&gt;()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">insert</span><span class="params">(c: <span class="type">Char</span>)</span></span> &#123;</span><br><span class="line">        ls.push(c)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">delete</span><span class="params">()</span></span>: <span class="built_in">Char</span> =</span><br><span class="line">        <span class="keyword">if</span> (ls.size() == <span class="number">0</span>) <span class="keyword">throw</span> NoSuchElementException(<span class="string">"æ— æ³•åˆ é™¤"</span>)</span><br><span class="line">        <span class="keyword">else</span> ls.pop()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">left</span><span class="params">(k: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (k &gt; ls.size()) <span class="keyword">throw</span> IllegalArgumentException(<span class="string">"æ— æ³•åˆ°è¾¾"</span>)</span><br><span class="line">        <span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>..k) &#123;</span><br><span class="line">            rs.push(ls.pop())</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">right</span><span class="params">(k: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (k &gt; rs.size()) <span class="keyword">throw</span> IllegalArgumentException(<span class="string">"æ— æ³•åˆ°è¾¾"</span>)</span><br><span class="line">        <span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>..k) &#123;</span><br><span class="line">            ls.push(rs.pop())</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> size: <span class="built_in">Int</span></span><br><span class="line">        <span class="keyword">get</span>() = ls.size() + rs.size()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">toString</span><span class="params">()</span></span>: String &#123;</span><br><span class="line">        <span class="keyword">return</span> StringBuilder().also &#123;</span><br><span class="line">            it.append(ls)</span><br><span class="line">            it.reverse()</span><br><span class="line">            it.append(<span class="string">" | "</span>)</span><br><span class="line">            it.append(rs)</span><br><span class="line">        &#125;.toString()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…³äºæ ˆçš„å®ç°è§è¿™ç¯‡åšå®¢:<a href="https://blog.fivezha.cn/2020/07/11/algorithm4th-1/#%E6%A0%88">ç®—æ³•(ç¬¬å››ç‰ˆ)ç¬”è®°(1)â€”ç®€å•ç±»çš„å®ç°</a></p><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pics/image-20200717095951864.png" alt="image-20200717095951864" title="">                </div>                <div class="image-caption">image-20200717095951864</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pics/image-20200717095958140.png" alt="image-20200717095958140" title="">                </div>                <div class="image-caption">image-20200717095958140</div>            </figure><h2 id="å››æ•°ä¹‹å’Œ"><a href="#å››æ•°ä¹‹å’Œ" class="headerlink" title="å››æ•°ä¹‹å’Œ"></a>å››æ•°ä¹‹å’Œ</h2><h3 id="å®ç°-2"><a href="#å®ç°-2" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è›®åŠ›æ³•æ±‚æ•°å­—ä¹‹å’Œ</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">fourSumForce</span><span class="params">(list: <span class="type">List</span>&lt;<span class="type">Int</span>&gt;, num: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> cnt = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (a <span class="keyword">in</span> list.indices)</span><br><span class="line">        <span class="keyword">for</span> (b <span class="keyword">in</span> a until list.size)</span><br><span class="line">            <span class="keyword">for</span> (c <span class="keyword">in</span> b until list.size)</span><br><span class="line">                <span class="keyword">for</span> (d <span class="keyword">in</span> c until list.size)</span><br><span class="line">                    <span class="keyword">if</span> (list[a] + list[b] + list[c] + list[d] == num) &#123;</span><br><span class="line">                        cnt++</span><br><span class="line">                    &#125;</span><br><span class="line">    <span class="keyword">return</span> cnt</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦:<br>$$<br>\mathcal{O}(N^4)<br>$$</p><h2 id="ä¸‰æ•°ä¹‹å’Œ"><a href="#ä¸‰æ•°ä¹‹å’Œ" class="headerlink" title="ä¸‰æ•°ä¹‹å’Œ"></a>ä¸‰æ•°ä¹‹å’Œ</h2><h3 id="äºŒåˆ†æ³•æ±‚ä¸‰æ•°ä¹‹å’Œ"><a href="#äºŒåˆ†æ³•æ±‚ä¸‰æ•°ä¹‹å’Œ" class="headerlink" title="äºŒåˆ†æ³•æ±‚ä¸‰æ•°ä¹‹å’Œ"></a>äºŒåˆ†æ³•æ±‚ä¸‰æ•°ä¹‹å’Œ</h3><p>å…ˆæ’åºï¼Œä¾æ—§æ˜¯ä¸¤é‡å¾ªç¯æ‰¾å‡ºå‰ä¸¤ä¸ªæ•°å­—ï¼Œç¬¬ä¸‰ä¸ªæ•°å€¼åˆ©ç”¨äºŒåˆ†æ³•ä»å‰©ä½™å…ƒç´ ä¸­æ‰¾ã€‚</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="type">&lt;T : Comparable&lt;T&gt;</span>&gt; <span class="title">containsDuplicatesInSorted</span><span class="params">(list: <span class="type">List</span>&lt;<span class="type">T</span>&gt;)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">0</span> until list.size - <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (list[i] == list[i + <span class="number">1</span>]) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * äºŒåˆ†æ±‚éé‡å¤ä¸‰æ•°ä¹‹å’Œ</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">threeSumBinaryFast</span><span class="params">(list: <span class="type">List</span>&lt;<span class="type">Int</span>&gt;)</span></span>: List&lt;List&lt;<span class="built_in">Int</span>&gt;&gt; &#123;</span><br><span class="line">    <span class="keyword">var</span> res = LinkedList&lt;List&lt;<span class="built_in">Int</span>&gt;&gt;()</span><br><span class="line">    <span class="keyword">val</span> sl = list.sorted().run &#123;</span><br><span class="line">        <span class="keyword">if</span> (containsDuplicatesInSorted(<span class="keyword">this</span>))</span><br><span class="line">            distinct()</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">this</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (list.size &lt; <span class="number">3</span>) <span class="keyword">throw</span> IllegalArgumentException(<span class="string">"æ•°ç»„éé‡å¤å…ƒç´ å°äº3ä¸ª!"</span>)</span><br><span class="line">    <span class="keyword">for</span> (i <span class="keyword">in</span> sl.indices) &#123;</span><br><span class="line">        <span class="keyword">for</span> (j <span class="keyword">in</span> i until sl.size) &#123;</span><br><span class="line">            <span class="keyword">val</span> k = binarySearch(sl, -(sl[i] + sl[j]), j + <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">if</span> (k != -<span class="number">1</span>) &#123;</span><br><span class="line">                res.add(listOf(sl[i], sl[j], sl[k]))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦æ–¹é¢ï¼Œæ’åº+å¾ªç¯æ—¶é—´å¤æ‚åº¦$\mathcal{O}(N\log_2(N)+N^2\log_2{N})$ï¼ŒåŒ–ç®€å¾—ï¼š<br>$$<br>\mathcal{O}(N^2)<br>$$<br>ç©ºé—´å¤æ‚åº¦:<br>$$<br>\mathcal{O}(N)<br>$$<br>æ’åºäº§ç”Ÿçš„ä¸­é—´æ•°ç»„</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åŒå‘é˜Ÿåˆ—,åŒæ ˆç¼“å†²åŒº,è›®åŠ›æ³•å››æ•°ä¹‹å’Œä»¥åŠå¿«é€Ÿä¸‰æ•°ä¹‹å’Œçš„å®ç°
    
    </summary>
    
    
      <category term="algorithm4" scheme="http://blog.fivezha.cn/categories/algorithm4/"/>
    
    
      <category term="kotlin" scheme="http://blog.fivezha.cn/tags/kotlin/"/>
    
      <category term="algorithm" scheme="http://blog.fivezha.cn/tags/algorithm/"/>
    
  </entry>
  
  <entry>
    <title>ç®—æ³•(ç¬¬å››ç‰ˆ)ç¬”è®°(3)---åŒå‘é“¾è¡¨(LinkedList)å®ç°</title>
    <link href="http://blog.fivezha.cn/2020/07/13/algorithm4-linkedlist/"/>
    <id>http://blog.fivezha.cn/2020/07/13/algorithm4-linkedlist/</id>
    <published>2020-07-13T11:59:21.000Z</published>
    <updated>2020-07-17T01:05:21.451Z</updated>
    
    <content type="html"><![CDATA[<p>æ ¹æ®ç®—æ³•ç¬¬å››ç‰ˆå’Œæºç è¿›è¡Œçš„é“¾è¡¨å®ç°ï¼Œä¸»è¦å®ç°<code>MutableList&lt;T&gt;</code>æ¥å£å’Œ<code>MutableListIterator&lt;T&gt;</code>è¿­ä»£å™¨<a id="more"></a></p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>ä¸»è¦æ˜¯å®ç°<code>MutableList&lt;T&gt;</code>æ¥å£ï¼Œè¿­ä»£å™¨å®ç°<code>MutableListIterator&lt;T&gt;</code>æ¥å£ã€‚</p><h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p>é“¾è¡¨ï¼Œå°±æ˜¯ä¸€ä¸ªä¸€ä¸ªèŠ‚ç‚¹è¿æ¥èµ·æ¥çš„æ•°æ®ç»“æ„ï¼Œè¿™ç§æ•°æ®ç»“æ„ä¼˜ç‚¹æ˜¯<strong>ä½¿ç”¨è¿‡çš„ç©ºé—´å¤§å°å’Œå…ƒç´ æ•°é‡æˆæ­£æ¯”ä¸”å¢åˆ æ—¶é—´å¤æ‚åº¦ä½</strong>ï¼Œç¼ºç‚¹åˆ™æ˜¯<strong>æŸ¥æ‰¾å›°éš¾ï¼Œéœ€è¦é€šè¿‡å¼•ç”¨è®¿é—®ä»»æ„å…ƒç´ </strong>ã€‚</p><h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><h4 id="å¢åˆ "><a href="#å¢åˆ " class="headerlink" title="å¢åˆ "></a>å¢åˆ </h4><p>åœ¨è¿™ä¸€éƒ¨åˆ†ä¸»è¦éœ€è¦ç‰¹åˆ«è€ƒè™‘çš„å‡ ç§æƒ…å†µï¼š</p><ul><li>åœ¨è¡¨å¤´æ’å…¥èŠ‚ç‚¹</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pics/image-20200715151744188.png" alt="image-20200715151744188" title="">                </div>                <div class="image-caption">image-20200715151744188</div>            </figure><ul><li>åˆ é™¤è¡¨å¤´ç»“ç‚¹</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pics/image-20200715151824396.png" alt="image-20200715151824396" title="">                </div>                <div class="image-caption">image-20200715151824396</div>            </figure><ul><li>åœ¨è¡¨å°¾æ’å…¥èŠ‚ç‚¹</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pics/image-20200715151838973.png" alt="image-20200715151838973" title="">                </div>                <div class="image-caption">image-20200715151838973</div>            </figure><h4 id="è¿­ä»£"><a href="#è¿­ä»£" class="headerlink" title="è¿­ä»£"></a>è¿­ä»£</h4><p>è¿­ä»£æ–¹é¢ï¼Œä¸»è¦æ˜¯å®ç°<code>MutableListIterator&lt;T&gt;</code>ï¼Œå½“è¦éå†çš„æ—¶å€™ä»…éœ€è¦</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> numbers = LinkedList&lt;String&gt;()</span><br><span class="line"><span class="keyword">for</span> (n <span class="keyword">in</span> numbers) &#123;</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> numbers = LinkedList&lt;String&gt;()</span><br><span class="line"><span class="keyword">val</span> mutableListIterator = numbers.listIterator()</span><br><span class="line"><span class="keyword">while</span> (mutableListIterator.hasNext()) &#123;</span><br><span class="line">    mutableListIterator.next()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¾¿å¯ã€‚</p><p>è¿­ä»£è¿‡ç¨‹çš„<code>remove()</code>å’Œ<code>add()</code>åˆ™æ˜¯å®ç°å½“å‰èŠ‚ç‚¹çš„åˆ é™¤å’Œåœ¨å½“å‰èŠ‚ç‚¹ä¹‹å‰æ·»åŠ çš„åŠŸèƒ½ã€‚</p><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ds</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> kotlin.NoSuchElementException</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åŒå‘é“¾è¡¨</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LinkedList</span>&lt;<span class="type">T</span>&gt; : <span class="type">MutableList</span>&lt;<span class="type">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> first: Node&lt;T&gt;? = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> last: Node&lt;T&gt;? = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> _size: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åœ¨å°¾éƒ¨æ’å…¥[element]</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">add</span><span class="params">(element: <span class="type">T</span>)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">        linkedLast(element)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®©[element]æˆä¸º[index]ä½ç½®çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">add</span><span class="params">(index: <span class="type">Int</span>, element: <span class="type">T</span>)</span></span> &#123;</span><br><span class="line">        checkPositionIndex(index, size)</span><br><span class="line">        <span class="keyword">if</span> (index == _size) &#123;</span><br><span class="line">            linkedLast(element)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            linkedBefore(element, getNode(index))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®©[index]ä½ç½®æˆä¸º[elements]çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä½ç½®</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">addAll</span><span class="params">(index: <span class="type">Int</span>, elements: <span class="type">Collection</span>&lt;<span class="type">T</span>&gt;)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">        checkPositionIndex(index, size)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (elements.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿™é‡Œçš„ä¸¤ä¸ªèŠ‚ç‚¹ä»£è¡¨ç€æ’å…¥èŠ‚ç‚¹çš„å‰åèŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">var</span> pred: Node&lt;T&gt;?</span><br><span class="line">        <span class="keyword">var</span> succ: Node&lt;T&gt;?</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ¤æ–­æ˜¯å¦æ˜¯æœ€å°¾éƒ¨æ’å…¥</span></span><br><span class="line">        <span class="keyword">if</span> (index == _size) &#123;</span><br><span class="line">            succ = <span class="literal">null</span></span><br><span class="line">            pred = last</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            succ = getNode(index)</span><br><span class="line">            pred = succ.prev</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (e <span class="keyword">in</span> elements) &#123;</span><br><span class="line">            <span class="keyword">val</span> nNode = Node(e, pred, <span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">if</span> (pred == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="comment">// è¯´æ˜æ˜¯åœ¨é¦–èŠ‚ç‚¹æ’å…¥çš„</span></span><br><span class="line">                first = nNode</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// ä¸€ç›´å¾€åæ’å…¥</span></span><br><span class="line">                pred.next = nNode</span><br><span class="line">            &#125;</span><br><span class="line">            pred = nNode</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (succ == <span class="literal">null</span>) &#123;</span><br><span class="line">            last = pred</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            pred!!.next = succ</span><br><span class="line">            succ.prev = pred</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        _size += elements.size</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åœ¨å°¾éƒ¨æ·»åŠ [elements]</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">addAll</span><span class="params">(elements: <span class="type">Collection</span>&lt;<span class="type">T</span>&gt;)</span></span>: <span class="built_in">Boolean</span> =</span><br><span class="line">        addAll(_size, elements)</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¸…é™¤æ‰€æœ‰èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">clear</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">var</span> n = first</span><br><span class="line">        <span class="keyword">while</span> (n != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">val</span> next = n.next</span><br><span class="line">            <span class="comment">// å¿«é€Ÿgc</span></span><br><span class="line">            n.item = <span class="literal">null</span></span><br><span class="line">            n.next = <span class="literal">null</span></span><br><span class="line">            n.prev = <span class="literal">null</span></span><br><span class="line">            n = next</span><br><span class="line">        &#125;</span><br><span class="line">        first = <span class="literal">null</span></span><br><span class="line">        last = <span class="literal">null</span></span><br><span class="line">        _size = <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤ä¸º[element]çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">remove</span><span class="params">(element: <span class="type">T</span>)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> node = first</span><br><span class="line">        <span class="keyword">while</span> (node != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (node.item == element) &#123;</span><br><span class="line">                unlink(node)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">            node = node.next</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">removeAll</span><span class="params">(elements: <span class="type">Collection</span>&lt;<span class="type">T</span>&gt;)</span></span>: <span class="built_in">Boolean</span> =</span><br><span class="line">        <span class="keyword">if</span> (containsAll(elements)) elements.all &#123;</span><br><span class="line">            remove(it)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤[index]ä½ç½®çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">removeAt</span><span class="params">(index: <span class="type">Int</span>)</span></span>: T &#123;</span><br><span class="line">        checkElementIndex(index, size)</span><br><span class="line">        <span class="keyword">val</span> node = getNode(index)</span><br><span class="line">        <span class="keyword">val</span> item = node.item</span><br><span class="line">        unlink(node)</span><br><span class="line">        <span class="keyword">return</span> item ?: <span class="keyword">throw</span> NoSuchElementException()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">retainAll</span><span class="params">(elements: <span class="type">Collection</span>&lt;<span class="type">T</span>&gt;)</span></span>: <span class="built_in">Boolean</span> =</span><br><span class="line">        <span class="keyword">if</span> (containsAll(elements)) &#123;</span><br><span class="line">            clear()</span><br><span class="line">            addAll(elements)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾å®š[index]ä¸º[element]å¹¶è¿”å›æ—§å€¼</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">set</span><span class="params">(index: <span class="type">Int</span>, element: <span class="type">T</span>)</span></span>: T &#123;</span><br><span class="line">        checkElementIndex(index, size)</span><br><span class="line">        <span class="keyword">return</span> getNode(index).run &#123;</span><br><span class="line">            item!!.also &#123;</span><br><span class="line">                item = element</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ˜¯å¦åŒ…å«[element]</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">contains</span><span class="params">(element: <span class="type">T</span>)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> indexOf(element) != -<span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ˜¯å¦åŒ…å«æ‰€æœ‰[elements]</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">containsAll</span><span class="params">(elements: <span class="type">Collection</span>&lt;<span class="type">T</span>&gt;)</span></span>: <span class="built_in">Boolean</span> =</span><br><span class="line">        <span class="keyword">if</span> (elements.isEmpty())</span><br><span class="line">            <span class="literal">false</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            elements.all &#123;</span><br><span class="line">                contains(it)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–[index]èŠ‚ç‚¹æ•°æ®</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">get</span><span class="params">(index: <span class="type">Int</span>)</span></span>: T &#123;</span><br><span class="line">        checkElementIndex(index, size)</span><br><span class="line">        <span class="keyword">return</span> getNode(index).item ?: <span class="keyword">throw</span> NoSuchElementException()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">indexOf</span><span class="params">(element: <span class="type">T</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> index = <span class="number">0</span></span><br><span class="line">        <span class="keyword">this</span>.forEach &#123;</span><br><span class="line">            <span class="keyword">if</span> (it == element) &#123;</span><br><span class="line">                <span class="keyword">return</span> index</span><br><span class="line">            &#125;</span><br><span class="line">            index++</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é“¾è¡¨æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">isEmpty</span><span class="params">()</span></span>: <span class="built_in">Boolean</span> = _size == <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¯ä»¥æŸ¥åˆ°çš„æœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">lastIndexOf</span><span class="params">(element: <span class="type">T</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> index = _size - <span class="number">1</span></span><br><span class="line">        <span class="keyword">var</span> node = last</span><br><span class="line">        <span class="keyword">while</span> (node != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (node.item == element) &#123;</span><br><span class="line">                <span class="keyword">return</span> index</span><br><span class="line">            &#125;</span><br><span class="line">            index--</span><br><span class="line">            node = node.prev</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> index</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›è¿­ä»£å™¨</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">iterator</span><span class="params">()</span></span>: MutableIterator&lt;T&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> LinkedIterator(<span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›åˆ—è¡¨è¿­ä»£å™¨</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">listIterator</span><span class="params">()</span></span>: MutableListIterator&lt;T&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> LinkedListIterator(<span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›ä»æŸä¸ªindexå¼€å§‹çš„è¿­ä»£å™¨</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">listIterator</span><span class="params">(index: <span class="type">Int</span>)</span></span>: MutableListIterator&lt;T&gt; &#123;</span><br><span class="line">        checkElementIndex(index, size)</span><br><span class="line">        <span class="keyword">return</span> LinkedListIterator(index)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›å­åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">subList</span><span class="params">(fromIndex: <span class="type">Int</span>, toIndex: <span class="type">Int</span>)</span></span>: MutableList&lt;T&gt; &#123;</span><br><span class="line">        checkRangeIndexes(fromIndex, toIndex, size)</span><br><span class="line">        <span class="keyword">val</span> res = LinkedList&lt;T&gt;()</span><br><span class="line">        <span class="keyword">var</span> i = fromIndex</span><br><span class="line">        <span class="keyword">var</span> n = getNode(fromIndex)</span><br><span class="line">        <span class="keyword">while</span> (i &lt; toIndex) &#123;</span><br><span class="line">            res.add(n.item!!)</span><br><span class="line">            i++</span><br><span class="line">            n = n.next!!</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–é“¾è¡¨é•¿åº¦</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">val</span> size: <span class="built_in">Int</span></span><br><span class="line">        <span class="keyword">get</span>() = _size</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–é¦–èŠ‚ç‚¹æ•°æ®</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">getFirst</span><span class="params">()</span></span>: T = first?.item ?: <span class="keyword">throw</span> NoSuchElementException()</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–å°¾èŠ‚ç‚¹æ•°æ®</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">getLast</span><span class="params">()</span></span>: T = last?.item ?: <span class="keyword">throw</span> NoSuchElementException()</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åè½¬é“¾è¡¨</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">reverse</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (first == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        first = last.also &#123;</span><br><span class="line">            last = first</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> n = first</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (n != <span class="literal">null</span>) &#123;</span><br><span class="line">            n.prev = n.next.also &#123;</span><br><span class="line">                n!!.next = n!!.prev</span><br><span class="line">            &#125;</span><br><span class="line">            n = n.next</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ é¦–èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">addFirst</span><span class="params">(element: <span class="type">T</span>)</span></span> &#123;</span><br><span class="line">        linkedFirst(element)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ å°¾èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">addLast</span><span class="params">(element: <span class="type">T</span>)</span></span> &#123;</span><br><span class="line">        linkedLast(element)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤é¦–èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">removeFirst</span><span class="params">()</span></span>: T = unlinkFirst()</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤å°¾èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">removeLast</span><span class="params">()</span></span>: T = unlinkLast()</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–æŸä¸ªèŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­1/2çš„sizeç„¶åä»å·¦å¾€å³æˆ–è€…ä»å³å¾€å·¦æŸ¥æ‰¾</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">getNode</span><span class="params">(index: <span class="type">Int</span>)</span></span>: Node&lt;T&gt; = <span class="keyword">if</span> (index &lt; (_size shr <span class="number">1</span>)) &#123;</span><br><span class="line">        <span class="keyword">var</span> node = first</span><br><span class="line">        <span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">0</span> until index) &#123;</span><br><span class="line">            node = node?.next</span><br><span class="line">        &#125;</span><br><span class="line">        node!!</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> node = last</span><br><span class="line">        <span class="keyword">for</span> (i <span class="keyword">in</span> _size - <span class="number">2</span> downTo index) &#123;</span><br><span class="line">            node = node?.prev</span><br><span class="line">        &#125;</span><br><span class="line">        node!!</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿æ¥é¦–èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">linkedFirst</span><span class="params">(item: <span class="type">T</span>)</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> f = first</span><br><span class="line">        <span class="keyword">val</span> nNode = Node(item, <span class="literal">null</span>, f)</span><br><span class="line">        first = nNode</span><br><span class="line">        <span class="keyword">if</span> (f == <span class="literal">null</span>) &#123;</span><br><span class="line">            last = nNode</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            f.prev = nNode</span><br><span class="line">        &#125;</span><br><span class="line">        _size++</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿æ¥åˆ°[node]èŠ‚ç‚¹å‰é¢</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">linkedBefore</span><span class="params">(item: <span class="type">T</span>, node: <span class="type">Node</span>&lt;<span class="type">T</span>&gt;)</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> prev = node.prev</span><br><span class="line">        <span class="keyword">val</span> nNode = Node(item, prev, node)</span><br><span class="line">        node.prev = nNode</span><br><span class="line">        <span class="keyword">if</span> (prev == <span class="literal">null</span>) &#123;</span><br><span class="line">            first = nNode</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            prev.next = nNode</span><br><span class="line">        &#125;</span><br><span class="line">        _size++</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿æ¥å°¾èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">linkedLast</span><span class="params">(item: <span class="type">T</span>)</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> l = last</span><br><span class="line">        <span class="keyword">val</span> nNode = Node(item, l, <span class="literal">null</span>)</span><br><span class="line">        last = nNode</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (l == <span class="literal">null</span>) &#123;</span><br><span class="line">            first = last</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            l.next = nNode</span><br><span class="line">        &#125;</span><br><span class="line">        _size++</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è§£é™¤é¦–éƒ¨è¿æ¥</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">unlinkFirst</span><span class="params">()</span></span>: T &#123;</span><br><span class="line">        <span class="keyword">val</span> f = first ?: <span class="keyword">throw</span> NoSuchElementException()</span><br><span class="line">        <span class="keyword">val</span> item = f.item</span><br><span class="line">        <span class="keyword">val</span> next = f.next</span><br><span class="line">        <span class="comment">// å¿«é€ŸGC</span></span><br><span class="line">        f.next = <span class="literal">null</span></span><br><span class="line">        f.item = <span class="literal">null</span></span><br><span class="line">        first = next</span><br><span class="line">        <span class="keyword">if</span> (next == <span class="literal">null</span>) &#123;</span><br><span class="line">            last = <span class="literal">null</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            next.prev = <span class="literal">null</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        _size--</span><br><span class="line">        <span class="keyword">return</span> item!!</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è§£é™¤å°¾éƒ¨è¿æ¥</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">unlinkLast</span><span class="params">()</span></span>: T &#123;</span><br><span class="line">        <span class="keyword">val</span> l = last ?: <span class="keyword">throw</span> NoSuchElementException()</span><br><span class="line">        <span class="keyword">val</span> item = l.item</span><br><span class="line">        <span class="keyword">val</span> prev = l.prev</span><br><span class="line">        <span class="comment">// å¿«é€ŸGC</span></span><br><span class="line">        l.item = <span class="literal">null</span></span><br><span class="line">        l.prev = <span class="literal">null</span></span><br><span class="line">        last = prev</span><br><span class="line">        <span class="keyword">if</span> (prev == <span class="literal">null</span>) &#123;</span><br><span class="line">            first = <span class="literal">null</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            prev.next = <span class="literal">null</span></span><br><span class="line">        &#125;</span><br><span class="line">        _size--</span><br><span class="line">        <span class="keyword">return</span> item!!</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è§£è¿æ¥</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">unlink</span><span class="params">(node: <span class="type">Node</span>&lt;<span class="type">T</span>&gt;)</span></span>: T &#123;</span><br><span class="line">        <span class="keyword">val</span> np = node.prev</span><br><span class="line">        <span class="keyword">val</span> nn = node.next</span><br><span class="line">        <span class="keyword">val</span> ne = node.item</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (np == <span class="literal">null</span>) &#123;</span><br><span class="line">            first = nn</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            np.next = nn</span><br><span class="line">            node.prev = <span class="literal">null</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (nn == <span class="literal">null</span>) &#123;</span><br><span class="line">            last = np</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            nn.prev = np</span><br><span class="line">            node.next = <span class="literal">null</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        node.item = <span class="literal">null</span></span><br><span class="line">        _size--</span><br><span class="line">        <span class="keyword">return</span> ne!!</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * " == " æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">equals</span><span class="params">(other: <span class="type">Any</span>?)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (other === <span class="keyword">this</span>) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        <span class="keyword">if</span> (other !<span class="keyword">is</span> List&lt;*&gt;) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> orderedEquals(<span class="keyword">this</span>, other)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * hashè®¡ç®—</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">hashCode</span><span class="params">()</span></span>: <span class="built_in">Int</span> = orderedHashCode(<span class="keyword">this</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è½¬å­—ç¬¦ä¸²æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">toString</span><span class="params">()</span></span>: String = StringBuilder().also &#123;</span><br><span class="line">        it.append(<span class="string">"[ "</span>)</span><br><span class="line">        <span class="keyword">this</span>.forEach &#123; item -&gt; it.append(<span class="string">"<span class="variable">$item</span> "</span>) &#125;</span><br><span class="line">        it.append(<span class="string">"]"</span>)</span><br><span class="line">    &#125;.toString()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">internal</span> <span class="keyword">companion</span> <span class="keyword">object</span> &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * èŠ‚ç‚¹ç±»</span></span><br><span class="line"><span class="comment">         * */</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="type">T</span>&gt;</span>(</span><br><span class="line">            <span class="keyword">var</span> item: T?,</span><br><span class="line">            <span class="keyword">var</span> prev: Node&lt;T&gt;? = <span class="literal">null</span>,</span><br><span class="line">            <span class="keyword">var</span> next: Node&lt;T&gt;? = <span class="literal">null</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æŸ¥çœ‹elementæ˜¯å¦åˆæ³•</span></span><br><span class="line"><span class="comment">         * */</span></span><br><span class="line">        <span class="keyword">internal</span> <span class="function"><span class="keyword">fun</span> <span class="title">checkElementIndex</span><span class="params">(index: <span class="type">Int</span>, size: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt;= size) &#123;</span><br><span class="line">                <span class="keyword">throw</span> IndexOutOfBoundsException(<span class="string">"index: <span class="variable">$index</span>, size: <span class="variable">$size</span>"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æŸ¥çœ‹ä½ç½®æ˜¯å¦åˆæ³•</span></span><br><span class="line"><span class="comment">         * */</span></span><br><span class="line">        <span class="keyword">internal</span> <span class="function"><span class="keyword">fun</span> <span class="title">checkPositionIndex</span><span class="params">(index: <span class="type">Int</span>, size: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt; size) &#123;</span><br><span class="line">                <span class="keyword">throw</span> IndexOutOfBoundsException(<span class="string">"index: <span class="variable">$index</span>, size: <span class="variable">$size</span>"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æŸ¥çœ‹èŒƒå›´æ˜¯å¦åˆæ³•</span></span><br><span class="line"><span class="comment">         *  */</span></span><br><span class="line">        <span class="keyword">internal</span> <span class="function"><span class="keyword">fun</span> <span class="title">checkRangeIndexes</span><span class="params">(fromIndex: <span class="type">Int</span>, toIndex: <span class="type">Int</span>, size: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (fromIndex &lt; <span class="number">0</span> || toIndex &gt; size) &#123;</span><br><span class="line">                <span class="keyword">throw</span> IndexOutOfBoundsException(<span class="string">"fromIndex: <span class="variable">$fromIndex</span>, toIndex: <span class="variable">$toIndex</span>, size: <span class="variable">$size</span>"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (fromIndex &gt; toIndex) &#123;</span><br><span class="line">                <span class="keyword">throw</span> IllegalArgumentException(<span class="string">"fromIndex: <span class="variable">$fromIndex</span> &gt; toIndex: <span class="variable">$toIndex</span>"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æŸ¥çœ‹è¾¹ç•Œæ˜¯å¦åˆæ³•</span></span><br><span class="line"><span class="comment">         * */</span></span><br><span class="line">        <span class="keyword">internal</span> <span class="function"><span class="keyword">fun</span> <span class="title">checkBoundsIndexes</span><span class="params">(startIndex: <span class="type">Int</span>, endIndex: <span class="type">Int</span>, size: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (startIndex &lt; <span class="number">0</span> || endIndex &gt; size) &#123;</span><br><span class="line">                <span class="keyword">throw</span> IndexOutOfBoundsException(<span class="string">"startIndex: <span class="variable">$startIndex</span>, endIndex: <span class="variable">$endIndex</span>, size: <span class="variable">$size</span>"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (startIndex &gt; endIndex) &#123;</span><br><span class="line">                <span class="keyword">throw</span> IllegalArgumentException(<span class="string">"startIndex: <span class="variable">$startIndex</span> &gt; endIndex: <span class="variable">$endIndex</span>"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * å“ˆå¸Œå‡½æ•°</span></span><br><span class="line"><span class="comment">         * */</span></span><br><span class="line">        <span class="keyword">internal</span> <span class="function"><span class="keyword">fun</span> <span class="title">orderedHashCode</span><span class="params">(c: <span class="type">Collection</span>&lt;*&gt;)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> hashCode = <span class="number">1</span></span><br><span class="line">            <span class="keyword">for</span> (e <span class="keyword">in</span> c) &#123;</span><br><span class="line">                hashCode = <span class="number">31</span> * hashCode + (e?.hashCode() ?: <span class="number">0</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> hashCode</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æŸ¥çœ‹æ˜¯å¦ç›¸ç­‰</span></span><br><span class="line"><span class="comment">         * */</span></span><br><span class="line">        <span class="keyword">internal</span> <span class="function"><span class="keyword">fun</span> <span class="title">orderedEquals</span><span class="params">(c: <span class="type">Collection</span>&lt;*&gt;, other: <span class="type">Collection</span>&lt;*&gt;)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (c.size != other.size) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">val</span> otherIterator = other.iterator()</span><br><span class="line">            <span class="keyword">for</span> (elem <span class="keyword">in</span> c) &#123;</span><br><span class="line">                <span class="keyword">val</span> elemOther = otherIterator.next()</span><br><span class="line">                <span class="keyword">if</span> (elem != elemOther) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿­ä»£å™¨ç±»</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">open</span> <span class="keyword">inner</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedIterator</span></span>(</span><br><span class="line">        <span class="keyword">protected</span> <span class="keyword">var</span> index: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line">    ) : MutableIterator&lt;T&gt; &#123;</span><br><span class="line">        <span class="keyword">protected</span> <span class="keyword">var</span> lastReturned: Node&lt;T&gt;? = <span class="literal">null</span></span><br><span class="line">        <span class="keyword">protected</span> <span class="keyword">var</span> current: Node&lt;T&gt;? = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">init</span> &#123;</span><br><span class="line">            checkPositionIndex(index, _size)</span><br><span class="line">            current = <span class="keyword">if</span> (index == _size) <span class="literal">null</span> <span class="keyword">else</span> getNode(index)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ˜¯å¦å­˜åœ¨ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">         * */</span></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">hasNext</span><span class="params">()</span></span>: <span class="built_in">Boolean</span> = index &lt; _size</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * ä¸‹ä¸€èŠ‚ç‚¹æ•°æ®</span></span><br><span class="line"><span class="comment">         * */</span></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">next</span><span class="params">()</span></span>: T &#123;</span><br><span class="line">            <span class="keyword">if</span> (!hasNext()) &#123;</span><br><span class="line">                <span class="keyword">throw</span> NoSuchElementException()</span><br><span class="line">            &#125;</span><br><span class="line">            lastReturned = current</span><br><span class="line">            current = current?.next</span><br><span class="line">            index++</span><br><span class="line">            <span class="keyword">return</span> lastReturned?.item ?: <span class="keyword">throw</span> NoSuchElementException()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * åˆ é™¤å½“å‰èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">         * */</span></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">remove</span><span class="params">()</span></span> &#123;</span><br><span class="line">            <span class="keyword">val</span> lastNext = lastReturned?.next</span><br><span class="line">            unlink(lastReturned ?: <span class="keyword">throw</span> IllegalStateException())</span><br><span class="line">            index--</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ—è¡¨è¿­ä»£å™¨ç±»</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">open</span> <span class="keyword">inner</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedListIterator</span></span>(</span><br><span class="line">        index: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line">    ) : LinkedIterator(</span><br><span class="line">        index</span><br><span class="line">    ), MutableListIterator&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ˜¯å¦æœ‰ä¸Šä¸€èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">         * */</span></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">hasPrevious</span><span class="params">()</span></span>: <span class="built_in">Boolean</span> = index &gt; <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * ä¸‹ä¸€èŠ‚ç‚¹æ¸¸æ ‡</span></span><br><span class="line"><span class="comment">         * */</span></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">nextIndex</span><span class="params">()</span></span>: <span class="built_in">Int</span> = index</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * è¿”å›ä¸Šä¸€èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">         * */</span></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">previous</span><span class="params">()</span></span>: T &#123;</span><br><span class="line">            <span class="keyword">if</span> (!hasPrevious()) &#123;</span><br><span class="line">                <span class="keyword">throw</span> NoSuchElementException()</span><br><span class="line">            &#125;</span><br><span class="line">            current = <span class="keyword">if</span> (current == <span class="literal">null</span>) last <span class="keyword">else</span> current!!.prev</span><br><span class="line">            lastReturned = current</span><br><span class="line">            index--</span><br><span class="line">            <span class="keyword">return</span> lastReturned?.item ?: <span class="keyword">throw</span> NoSuchElementException()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * ä¸‹ä¸€èŠ‚ç‚¹æ¸¸æ ‡</span></span><br><span class="line"><span class="comment">         * */</span></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">previousIndex</span><span class="params">()</span></span>: <span class="built_in">Int</span> = index - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ·»åŠ èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">         * */</span></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">add</span><span class="params">(element: <span class="type">T</span>)</span></span> &#123;</span><br><span class="line">            lastReturned = <span class="literal">null</span></span><br><span class="line">            <span class="keyword">if</span> (current == <span class="literal">null</span>) &#123;</span><br><span class="line">                linkedLast(element)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                linkedBefore(element, current!!)</span><br><span class="line">            &#125;</span><br><span class="line">            index++</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * è®¾ç½®èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">         * */</span></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">set</span><span class="params">(element: <span class="type">T</span>)</span></span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (lastReturned == <span class="literal">null</span>)</span><br><span class="line">                <span class="keyword">throw</span> IllegalStateException()</span><br><span class="line">            current!!.item = element</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> ll = LinkedList&lt;<span class="built_in">Int</span>&gt;()</span><br><span class="line">    <span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>..<span class="number">10</span>)</span><br><span class="line">        ll.add(i)</span><br><span class="line">    println(ll)</span><br><span class="line">    ll.reverse()</span><br><span class="line">    println(ll)</span><br><span class="line">    <span class="keyword">val</span> it = ll.listIterator()</span><br><span class="line">    <span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">        print(<span class="string">"<span class="subst">$&#123;it.next()&#125;</span> "</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    println()</span><br><span class="line">    <span class="keyword">while</span> (it.hasPrevious()) &#123;</span><br><span class="line">        print(<span class="string">"<span class="subst">$&#123;it.previous()&#125;</span> "</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    println()</span><br><span class="line">    ll.addFirst(<span class="number">111</span>)</span><br><span class="line">    ll.addLast(<span class="number">222</span>)</span><br><span class="line">    println(ll)</span><br><span class="line">    ll.removeFirst()</span><br><span class="line">    ll.removeLast()</span><br><span class="line">    println(ll)</span><br><span class="line">    ll.removeAt(<span class="number">1</span>)</span><br><span class="line">    println(ll)</span><br><span class="line">    ll.add(<span class="number">9</span>, <span class="number">114514</span>)</span><br><span class="line">    println(ll)</span><br><span class="line">    println(ll.size)</span><br><span class="line">    ll.clear()</span><br><span class="line">    println(ll)</span><br><span class="line">    ll.addAll(listOf(<span class="number">1111</span>, <span class="number">2222</span>, <span class="number">3333</span>, <span class="number">4444</span>))</span><br><span class="line">    println(ll)</span><br><span class="line">    ll.clear()</span><br><span class="line">    ll.addAll(<span class="number">0</span>, listOf(<span class="number">121</span>, <span class="number">222</span>, <span class="number">3445</span>))</span><br><span class="line">    println(ll)</span><br><span class="line">    println(ll.getFirst())</span><br><span class="line">    println(ll.getLast())</span><br><span class="line">    ll.<span class="keyword">set</span>(<span class="number">2</span>, <span class="number">1000000</span>)</span><br><span class="line">    println(ll)</span><br><span class="line">    ll.remove(<span class="number">121</span>)</span><br><span class="line">    println(ll)</span><br><span class="line">    ll.removeAll(listOf(<span class="number">222</span>, <span class="number">1000000</span>))</span><br><span class="line">    println(ll)</span><br><span class="line">    ll.addAll(listOf(<span class="number">1123</span>, <span class="number">1122</span>, <span class="number">2234</span>))</span><br><span class="line">    ll.retainAll(listOf(<span class="number">1123</span>))</span><br><span class="line">    println(ll)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pics/image-20200717090421490.png" alt="image-20200717090421490" title="">                </div>                <div class="image-caption">image-20200717090421490</div>            </figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ ¹æ®ç®—æ³•ç¬¬å››ç‰ˆå’Œæºç è¿›è¡Œçš„é“¾è¡¨å®ç°ï¼Œä¸»è¦å®ç°&lt;code&gt;MutableList&amp;lt;T&amp;gt;&lt;/code&gt;æ¥å£å’Œ&lt;code&gt;MutableListIterator&amp;lt;T&amp;gt;&lt;/code&gt;è¿­ä»£å™¨
    
    </summary>
    
    
      <category term="algorithm4" scheme="http://blog.fivezha.cn/categories/algorithm4/"/>
    
    
      <category term="kotlin" scheme="http://blog.fivezha.cn/tags/kotlin/"/>
    
      <category term="algorithm" scheme="http://blog.fivezha.cn/tags/algorithm/"/>
    
  </entry>
  
  <entry>
    <title>ç®—æ³•(ç¬¬å››ç‰ˆ)ç¬”è®°(2)---ç®€å•è®¡ç®—å™¨(åŠ å‡ä¹˜é™¤æ‹¬å·)</title>
    <link href="http://blog.fivezha.cn/2020/07/12/algorithm4-eval-int-arithmetic/"/>
    <id>http://blog.fivezha.cn/2020/07/12/algorithm4-eval-int-arithmetic/</id>
    <published>2020-07-12T07:51:45.000Z</published>
    <updated>2020-07-14T10:24:53.740Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸­ç¼€è¡¨è¾¾å¼è½¬åç¼€è¡¨è¾¾å¼ï¼Œè®¡ç®—åç¼€è¡¨è¾¾å¼å®ç°çš„åŠ å‡ä¹˜é™¤æ‹¬å·è®¡ç®—å™¨ã€‚<a id="more"></a></p><h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>ä¸­ç¼€è¡¨è¾¾å¼è½¬åç¼€è¡¨è¾¾å¼ï¼Œè®¡ç®—åç¼€è¡¨è¾¾å¼ã€‚</p><h4 id="ä¸­ç¼€è½¬åç¼€"><a href="#ä¸­ç¼€è½¬åç¼€" class="headerlink" title="ä¸­ç¼€è½¬åç¼€"></a>ä¸­ç¼€è½¬åç¼€</h4><ul><li>æ•°å­—<ul><li>ç›´æ¥æ·»åŠ åˆ°ç»“æœ</li></ul></li><li>éæ•°å­—<ul><li>â€ ï¼‰â€œï¼Œä¾æ¬¡å¼¹æ ˆæ·»åŠ åˆ°ç»“æœç›´åˆ°â€œï¼ˆ â€(å·¦æ‹¬å·ä¹Ÿå¼¹æ ˆ)</li><li>â€œï¼ˆ â€œç›´æ¥å‹æ ˆï¼Œä¸ç”¨ç®¡</li><li>åˆ¤æ–­æ˜¯å¦ä½äºæ ˆé¡¶ç¬¦å·ï¼Œå¤§äºç›´æ¥å…¥æ ˆï¼Œç­‰äºå…ˆå¼¹æ ˆå†å…¥æ ˆï¼Œä½äºç›´æ¥å¼¹æ ˆåˆ°<strong>å­—ç¬¦ä¼˜å…ˆçº§é«˜äºæ ˆé¡¶ç¬¦å·</strong>æˆ–è€…<strong>å·¦æ‹¬å·æˆ–ç©ºæ ˆ</strong></li></ul></li></ul><h4 id="åç¼€è®¡ç®—"><a href="#åç¼€è®¡ç®—" class="headerlink" title="åç¼€è®¡ç®—"></a>åç¼€è®¡ç®—</h4><ul><li>æ•°å­—<ul><li>å…¥æ ˆ</li></ul></li><li>éæ•°å­—<ul><li>æ ¹æ®å­—ç¬¦è¿›è¡Œä¸¤æ¬¡å‡ºæ ˆæ“ä½œç„¶åè®¡ç®—å®Œå†å…¥æ ˆ</li></ul></li></ul><h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><h4 id="ä¸­ç¼€è½¬åç¼€-1"><a href="#ä¸­ç¼€è½¬åç¼€-1" class="headerlink" title="ä¸­ç¼€è½¬åç¼€"></a>ä¸­ç¼€è½¬åç¼€</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¼˜å…ˆçº§</span></span><br><span class="line"><span class="comment"> * åŠ å‡ä¼˜å…ˆçº§æœ€ä½</span></span><br><span class="line"><span class="comment"> * ç„¶åå°±æ˜¯ä¹˜é™¤</span></span><br><span class="line"><span class="comment"> * æ‹¬å·ä¼˜å…ˆçº§æœ€é«˜</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="keyword">val</span> priority = HashMap&lt;String, <span class="built_in">Int</span>&gt;().apply &#123;</span><br><span class="line">    put(<span class="string">"+"</span>, <span class="number">0</span>)</span><br><span class="line">    put(<span class="string">"-"</span>, <span class="number">0</span>)</span><br><span class="line">    put(<span class="string">"*"</span>, <span class="number">1</span>)</span><br><span class="line">    put(<span class="string">"/"</span>, <span class="number">1</span>)</span><br><span class="line">    put(<span class="string">"("</span>, <span class="number">2</span>)</span><br><span class="line">    put(<span class="string">")"</span>, <span class="number">2</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸­ç¼€è½¬åç¼€</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">infixToPostfix</span><span class="params">(expr: <span class="type">String</span>)</span></span>: String &#123;</span><br><span class="line">    <span class="keyword">val</span> sb = StringBuilder()</span><br><span class="line">    <span class="keyword">val</span> s = Stack&lt;<span class="built_in">Char</span>&gt;()</span><br><span class="line"></span><br><span class="line">    expr.forEach &#123; c: <span class="built_in">Char</span> -&gt;</span><br><span class="line">        <span class="keyword">when</span> (c) &#123;</span><br><span class="line">            <span class="string">'0'</span>, <span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>, <span class="string">'4'</span>, <span class="string">'5'</span>, <span class="string">'6'</span>, <span class="string">'7'</span>, <span class="string">'8'</span>, <span class="string">'9'</span> -&gt; sb.append(c)</span><br><span class="line">            <span class="string">'+'</span>, <span class="string">'-'</span>, <span class="string">'*'</span>, <span class="string">'/'</span> -&gt; &#123;</span><br><span class="line">                <span class="keyword">while</span> (!s.isEmpty()</span><br><span class="line">                    &amp;&amp; s.peek() != <span class="string">'('</span></span><br><span class="line">                    &amp;&amp; priority[c.toString()]!! &lt;= priority[s.peek().toString()]!!</span><br><span class="line">                ) &#123;</span><br><span class="line">                    sb.append(s.pop())</span><br><span class="line">                &#125;</span><br><span class="line">                s.push(c)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="string">'('</span> -&gt; s.push(c)</span><br><span class="line">            <span class="string">')'</span> -&gt; &#123;</span><br><span class="line">                <span class="keyword">while</span> (!s.isEmpty()) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (s.peek() == <span class="string">'('</span>) &#123;</span><br><span class="line">                        s.pop()</span><br><span class="line">                        <span class="keyword">break</span></span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        sb.append(s.pop())</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> -&gt; <span class="keyword">throw</span> UnsupportedOperationException(<span class="string">"æœªçŸ¥å­—ç¬¦!"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (!s.isEmpty()) &#123;</span><br><span class="line">        sb.append(s.pop())</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sb.toString()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è®¡ç®—åç¼€"><a href="#è®¡ç®—åç¼€" class="headerlink" title="è®¡ç®—åç¼€"></a>è®¡ç®—åç¼€</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¡ç®—åç¼€è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">evalPostfix</span><span class="params">(expr: <span class="type">String</span>)</span></span>: <span class="built_in">Double</span> &#123;</span><br><span class="line">    <span class="keyword">val</span> s = Stack&lt;<span class="built_in">Double</span>&gt;()</span><br><span class="line">    expr.forEach &#123; c: <span class="built_in">Char</span> -&gt;</span><br><span class="line">        <span class="keyword">when</span> (c) &#123;</span><br><span class="line">            <span class="string">'+'</span> -&gt; s.pop().plus(s.pop()).let &#123; s.push(it) &#125;</span><br><span class="line">            <span class="string">'-'</span> -&gt; s.pop().minus(s.pop()).let &#123; s.push(it) &#125;</span><br><span class="line">            <span class="string">'*'</span> -&gt; s.pop().times(s.pop()).let &#123; s.push(it) &#125;</span><br><span class="line">            <span class="string">'/'</span> -&gt; s.pop().div(s.pop()).let &#123; s.push(it) &#125;</span><br><span class="line">            <span class="keyword">else</span> -&gt; s.push(Character.getNumericValue(c).toDouble())</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">if</span> (s.isEmpty()) <span class="number">0.0</span> <span class="keyword">else</span> s.pop()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¸»å‡½æ•°"><a href="#ä¸»å‡½æ•°" class="headerlink" title="ä¸»å‡½æ•°"></a>ä¸»å‡½æ•°</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å››åˆ™è¿ç®—(å¸¦æ‹¬å·)</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">evalIntArithmetic</span><span class="params">(expr: <span class="type">String</span>)</span></span>: <span class="built_in">Double</span> =</span><br><span class="line">    evalPostfix(infixToPostfix(expr.trim().replace(<span class="string">" "</span>, <span class="string">""</span>)))</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fundamentals</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> utils.evalIntArithmetic</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    println(evalIntArithmetic(<span class="string">""</span>))</span><br><span class="line">    println(evalIntArithmetic(<span class="string">" 1 + 2"</span>))</span><br><span class="line">    println(evalIntArithmetic(<span class="string">"1+2*3+(4*5+6)*7"</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pics/image-20200712185745469.png" alt="image-20200712185745469" title="">                </div>                <div class="image-caption">image-20200712185745469</div>            </figure><p>éªŒç®—ï¼š</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pics/image-20200712185812495.png" alt="image-20200712185812495" title="">                </div>                <div class="image-caption">image-20200712185812495</div>            </figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸­ç¼€è¡¨è¾¾å¼è½¬åç¼€è¡¨è¾¾å¼ï¼Œè®¡ç®—åç¼€è¡¨è¾¾å¼å®ç°çš„åŠ å‡ä¹˜é™¤æ‹¬å·è®¡ç®—å™¨ã€‚
    
    </summary>
    
    
      <category term="algorithm4" scheme="http://blog.fivezha.cn/categories/algorithm4/"/>
    
    
      <category term="kotlin" scheme="http://blog.fivezha.cn/tags/kotlin/"/>
    
      <category term="algorithm" scheme="http://blog.fivezha.cn/tags/algorithm/"/>
    
  </entry>
  
  <entry>
    <title>ç®—æ³•(ç¬¬å››ç‰ˆ)ç¬”è®°(1)---ç®€å•ç±»çš„å®ç°</title>
    <link href="http://blog.fivezha.cn/2020/07/11/algorithm4th-1/"/>
    <id>http://blog.fivezha.cn/2020/07/11/algorithm4th-1/</id>
    <published>2020-07-11T14:40:50.000Z</published>
    <updated>2020-07-18T04:22:22.077Z</updated>
    
    <content type="html"><![CDATA[<p>ç®—æ³•ç¬¬å››ç‰ˆç¬¬ä¸€ç« èŠ‚<a id="more"></a></p><h2 id="ç´¯åŠ å™¨"><a href="#ç´¯åŠ å™¨" class="headerlink" title="ç´¯åŠ å™¨"></a>ç´¯åŠ å™¨</h2><h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="./pics/image-20200711224750298.png" alt="image-20200711224750298" title="">                </div>                <div class="image-caption">image-20200711224750298</div>            </figure><h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ds</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> kotlin.math.sqrt</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç´¯åŠ å™¨ é˜²æŠ–åŠ¨ç‰ˆæœ¬</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Accumulator</span> <span class="keyword">constructor</span></span>(</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> total: <span class="built_in">Double</span> = <span class="number">0.0</span></span><br><span class="line">) &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> times: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> mean: <span class="built_in">Double</span> = <span class="number">0.0</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> s: <span class="built_in">Double</span> = <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="type">&lt;T : Number&gt;</span> <span class="title">addDataValue</span><span class="params">(value: <span class="type">T</span>)</span></span> &#123;</span><br><span class="line">        times += <span class="number">1</span></span><br><span class="line">        <span class="keyword">val</span> dv = value.toDouble()</span><br><span class="line">        total += dv</span><br><span class="line"></span><br><span class="line">        s += <span class="number">1.0</span> * (times - <span class="number">1</span>) / times * (dv - mean) * (dv - mean)</span><br><span class="line">        mean += (dv - mean) / times</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">mean</span><span class="params">()</span></span>: <span class="built_in">Double</span> = mean</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">variance</span><span class="params">()</span></span>: <span class="built_in">Double</span> = <span class="keyword">if</span> (times &lt;= <span class="number">1</span>) <span class="built_in">Double</span>.NaN <span class="keyword">else</span> s / (times - <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">stddev</span><span class="params">()</span></span>: <span class="built_in">Double</span> = sqrt(variance())</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">total</span><span class="params">()</span></span>: <span class="built_in">Double</span> = total</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">toString</span><span class="params">()</span></span>: String &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Mean (<span class="variable">$times</span> times, <span class="subst">$&#123;String.format(<span class="string">"%.2f"</span>, total)&#125;</span> values): "</span> +</span><br><span class="line">                <span class="string">"<span class="subst">$&#123;String.format(<span class="string">"%7.5f"</span>, mean())&#125;</span>"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¯è§†åŒ–ç´¯åŠ å™¨"><a href="#å¯è§†åŒ–ç´¯åŠ å™¨" class="headerlink" title="å¯è§†åŒ–ç´¯åŠ å™¨"></a>å¯è§†åŒ–ç´¯åŠ å™¨</h2><h3 id="API-1"><a href="#API-1" class="headerlink" title="API"></a>API</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="./pics/image-20200711224928831.png" alt="image-20200711224928831" title="">                </div>                <div class="image-caption">image-20200711224928831</div>            </figure><h3 id="å®ç°-1"><a href="#å®ç°-1" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ds</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.StdDraw</span><br><span class="line"><span class="keyword">import</span> kotlin.math.sqrt</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VisualAccumulator</span> <span class="keyword">constructor</span></span>(</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> xMax: <span class="built_in">Int</span> = <span class="number">100</span>,</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> yMax: <span class="built_in">Double</span> = <span class="number">100.0</span></span><br><span class="line">) &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> times: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> total: <span class="built_in">Double</span> = <span class="number">0.0</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> mean: <span class="built_in">Double</span> = <span class="number">0.0</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> s: <span class="built_in">Double</span> = <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span> &#123;</span><br><span class="line">        StdDraw.setXscale(<span class="number">0.0</span>, xMax.toDouble())</span><br><span class="line">        StdDraw.setYscale(<span class="number">0.0</span>, yMax)</span><br><span class="line">        StdDraw.setPenRadius(.<span class="number">01</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="type">&lt;T : Number&gt;</span> <span class="title">addDataValue</span><span class="params">(value: <span class="type">T</span>)</span></span> &#123;</span><br><span class="line">        times += <span class="number">1</span></span><br><span class="line">        <span class="keyword">val</span> dv = value.toDouble()</span><br><span class="line">        total += dv</span><br><span class="line"></span><br><span class="line">        mean += (dv - mean) / times</span><br><span class="line">        s += <span class="number">1.0</span> * (times - <span class="number">1</span>) / times * (dv - mean) * (dv - mean)</span><br><span class="line"></span><br><span class="line">        StdDraw.setPenColor(StdDraw.DARK_GRAY)</span><br><span class="line">        StdDraw.point(times.toDouble(), value.toDouble())</span><br><span class="line">        StdDraw.setPenColor(StdDraw.RED)</span><br><span class="line">        StdDraw.point(times.toDouble(), mean())</span><br><span class="line">        StdDraw.setPenColor(StdDraw.BLUE)</span><br><span class="line">        StdDraw.point(times.toDouble(), stddev())</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">mean</span><span class="params">()</span></span>: <span class="built_in">Double</span> = mean</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">variance</span><span class="params">()</span></span>: <span class="built_in">Double</span> = <span class="keyword">if</span> (times &lt;= <span class="number">1</span>) <span class="number">0.0</span> <span class="keyword">else</span> s / (times - <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">stddev</span><span class="params">()</span></span>: <span class="built_in">Double</span> = sqrt(variance())</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">total</span><span class="params">()</span></span>: <span class="built_in">Double</span> = total</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">toString</span><span class="params">()</span></span>: String &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Mean (<span class="variable">$times</span> times, <span class="subst">$&#123;String.format(<span class="string">"%.2f"</span>, total)&#125;</span> values): "</span> +</span><br><span class="line">                <span class="string">"<span class="subst">$&#123;String.format(<span class="string">"%7.5f"</span>, mean())&#125;</span>"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¯è§†åŒ–ç»“æœ"><a href="#å¯è§†åŒ–ç»“æœ" class="headerlink" title="å¯è§†åŒ–ç»“æœ"></a>å¯è§†åŒ–ç»“æœ</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="./pics/image-20200711225013771.png" alt="image-20200711225013771" title="">                </div>                <div class="image-caption">image-20200711225013771</div>            </figure><h2 id="æœ‰ç†æ•°"><a href="#æœ‰ç†æ•°" class="headerlink" title="æœ‰ç†æ•°"></a>æœ‰ç†æ•°</h2><h3 id="API-2"><a href="#API-2" class="headerlink" title="API"></a>API</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="./pics/image-20200711225149973.png" alt="image-20200711225149973" title="">                </div>                <div class="image-caption">image-20200711225149973</div>            </figure><h3 id="å®ç°-2"><a href="#å®ç°-2" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ds</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> utils.qgcd</span><br><span class="line"><span class="keyword">import</span> kotlin.reflect.typeOf</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rational</span> <span class="keyword">constructor</span></span>(</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> numerator: <span class="built_in">Long</span>,</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> denominator: <span class="built_in">Long</span> = <span class="number">1L</span></span><br><span class="line">) : Comparable&lt;Rational&gt; &#123;</span><br><span class="line">    <span class="keyword">init</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (denominator == <span class="number">0L</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> IllegalAccessError(<span class="string">"åˆ†æ¯ä¸èƒ½ä¸º0!"</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        simplify()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">numerator</span><span class="params">()</span></span>: <span class="built_in">Long</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> numerator</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">denominator</span><span class="params">()</span></span>: <span class="built_in">Long</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> denominator</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">simplify</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> g = qgcd(numerator, denominator)</span><br><span class="line">        numerator /= g</span><br><span class="line">        denominator /= g</span><br><span class="line">        <span class="keyword">if</span> (denominator &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            denominator = -denominator</span><br><span class="line">            numerator = -numerator</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">operator</span> <span class="function"><span class="keyword">fun</span> <span class="title">plus</span><span class="params">(other: <span class="type">Rational</span>)</span></span>: Rational &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.numerator == <span class="number">0L</span>) <span class="keyword">return</span> other</span><br><span class="line">        <span class="keyword">if</span> (other.numerator == <span class="number">0L</span>) <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">        <span class="keyword">val</span> g = qgcd(<span class="keyword">this</span>.denominator, other.denominator)</span><br><span class="line">        <span class="keyword">return</span> Rational(</span><br><span class="line">            <span class="keyword">this</span>.numerator * (other.denominator / g) + other.numerator * (<span class="keyword">this</span>.denominator / g),</span><br><span class="line">            <span class="keyword">this</span>.denominator * (other.denominator / g)</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">operator</span> <span class="function"><span class="keyword">fun</span> <span class="title">minus</span><span class="params">(other: <span class="type">Rational</span>)</span></span>: Rational &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.numerator == <span class="number">0L</span>) <span class="keyword">return</span> other</span><br><span class="line">        <span class="keyword">if</span> (other.numerator == <span class="number">0L</span>) <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">val</span> g = qgcd(<span class="keyword">this</span>.denominator, other.denominator)</span><br><span class="line">        <span class="keyword">return</span> Rational(</span><br><span class="line">            <span class="keyword">this</span>.numerator * (other.denominator / g) - other.numerator * (<span class="keyword">this</span>.denominator / g),</span><br><span class="line">            <span class="keyword">this</span>.denominator * (other.denominator / g)</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">operator</span> <span class="function"><span class="keyword">fun</span> <span class="title">times</span><span class="params">(other: <span class="type">Rational</span>)</span></span>: Rational &#123;</span><br><span class="line">        <span class="keyword">return</span> Rational(</span><br><span class="line">            <span class="keyword">this</span>.numerator * other.numerator,</span><br><span class="line">            <span class="keyword">this</span>.denominator * other.denominator</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">operator</span> <span class="function"><span class="keyword">fun</span> <span class="title">div</span><span class="params">(other: <span class="type">Rational</span>)</span></span>: Rational &#123;</span><br><span class="line">        <span class="keyword">return</span> Rational(</span><br><span class="line">            <span class="keyword">this</span>.numerator * other.denominator,</span><br><span class="line">            <span class="keyword">this</span>.denominator * other.numerator</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">equals</span><span class="params">(other: <span class="type">Any</span>?)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (other == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>::<span class="class"><span class="keyword">class</span> != <span class="title">other</span>:<span class="type">:class) return false</span></span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.compareTo(other <span class="keyword">as</span> Rational) == <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">toString</span><span class="params">()</span></span>: String &#123;</span><br><span class="line">        <span class="keyword">if</span> (denominator == <span class="number">1L</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"<span class="variable">$numerator</span>"</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"<span class="variable">$numerator</span>/<span class="variable">$denominator</span>"</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">compareTo</span><span class="params">(other: <span class="type">Rational</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">        <span class="comment">// é™¤æ³•åˆ¤æ–­å¤§å°äº</span></span><br><span class="line">        <span class="keyword">val</span> num = <span class="keyword">this</span>.numerator * other.denominator</span><br><span class="line">        <span class="keyword">val</span> den = <span class="keyword">this</span>.denominator * other.numerator</span><br><span class="line">        <span class="keyword">if</span> (num &gt; den)</span><br><span class="line">        <span class="comment">// è¯´æ˜åˆ†å­å¤§ å½“å‰æ•°å¤§</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> (num &lt; den)</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ—¥æœŸç±»"><a href="#æ—¥æœŸç±»" class="headerlink" title="æ—¥æœŸç±»"></a>æ—¥æœŸç±»</h2><h3 id="å®ç°-3"><a href="#å®ç°-3" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ds</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span> : <span class="type">Comparable</span>&lt;<span class="type">Date</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> year: <span class="built_in">Int</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> month: <span class="built_in">Int</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> day: <span class="built_in">Int</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(</span><br><span class="line">        y: <span class="built_in">Int</span> = <span class="number">0</span>,</span><br><span class="line">        m: <span class="built_in">Int</span> = <span class="number">0</span>,</span><br><span class="line">        d: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!isDateValid(d, m, y))</span><br><span class="line">            <span class="keyword">throw</span> IllegalArgumentException(<span class="string">"è¾“å…¥æ—¥æœŸé”™è¯¯!"</span>)</span><br><span class="line">        year = y</span><br><span class="line">        month = m</span><br><span class="line">        day = d</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(</span><br><span class="line">        parseString: String</span><br><span class="line">    ) &#123;</span><br><span class="line">        parseString.split(<span class="string">"/"</span>).run &#123;</span><br><span class="line">            <span class="keyword">if</span> (size &lt; <span class="number">3</span>) &#123;</span><br><span class="line">                <span class="keyword">throw</span> IllegalArgumentException(<span class="string">"è¾“å…¥æ—¥æœŸé”™è¯¯ï¼"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            year = <span class="keyword">get</span>(<span class="number">0</span>).toInt()</span><br><span class="line">            month = <span class="keyword">get</span>(<span class="number">1</span>).toInt()</span><br><span class="line">            day = <span class="keyword">get</span>(<span class="number">2</span>).toInt()</span><br><span class="line">            <span class="keyword">if</span> (!isDateValid(day, month, year))</span><br><span class="line">                <span class="keyword">throw</span> IllegalArgumentException(<span class="string">"è¾“å…¥æ—¥æœŸé”™è¯¯ï¼"</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">companion</span> <span class="keyword">object</span> &#123;</span><br><span class="line">        <span class="keyword">val</span> monthDayList = listOf(<span class="number">0</span>, <span class="number">31</span>, <span class="number">29</span>, <span class="number">31</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">30</span>, <span class="number">31</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">isDateValid</span><span class="params">(d: <span class="type">Int</span>, m: <span class="type">Int</span>, y: <span class="type">Int</span>)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (m &gt; <span class="number">12</span> || m &lt; <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (d &gt; monthDayList[m] || d &lt; <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (m == <span class="number">2</span> &amp;&amp; d == <span class="number">29</span> &amp;&amp; !isLeapYear(y)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// is y a leap year?</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">isLeapYear</span><span class="params">(y: <span class="type">Int</span>)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (y % <span class="number">400</span> == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        <span class="keyword">if</span> (y % <span class="number">100</span> == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        <span class="keyword">return</span> y % <span class="number">4</span> == <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">year</span><span class="params">()</span></span> = year</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">month</span><span class="params">()</span></span> = month</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">day</span><span class="params">()</span></span> = day</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">compareTo</span><span class="params">(other: <span class="type">Date</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.year &lt; other.year)</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.year &gt; other.year)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.month &lt; other.month)</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.month &gt; other.month)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.day &lt; other.day)</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.day &gt; other.day)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">toString</span><span class="params">()</span></span>: String &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"<span class="variable">$year</span>/<span class="variable">$month</span>/<span class="variable">$day</span>"</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">hashCode</span><span class="params">()</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> day + <span class="number">31</span> * month + <span class="number">31</span> * <span class="number">12</span> * year</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è´¦å•"><a href="#è´¦å•" class="headerlink" title="è´¦å•"></a>è´¦å•</h2><h3 id="å®ç°-4"><a href="#å®ç°-4" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ds</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Transaction</span> : <span class="type">Comparable</span>&lt;<span class="type">Transaction</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> who: String</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> time: Date</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> amount: <span class="built_in">Double</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(</span><br><span class="line">        w: String,</span><br><span class="line">        t: Date,</span><br><span class="line">        a: <span class="built_in">Double</span></span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!isAmountValid(a))</span><br><span class="line">            <span class="keyword">throw</span> IllegalArgumentException(<span class="string">"è¾“å…¥é‡‘é¢æ ¼å¼é”™è¯¯!"</span>)</span><br><span class="line">        who = w</span><br><span class="line">        time = t</span><br><span class="line">        amount = a</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(</span><br><span class="line">        parseString: String</span><br><span class="line">    ) &#123;</span><br><span class="line">        parseString.split(<span class="string">" "</span>).run &#123;</span><br><span class="line">            <span class="keyword">if</span> (size &lt; <span class="number">3</span>) &#123;</span><br><span class="line">                <span class="keyword">throw</span> IllegalArgumentException(<span class="string">"è¾“å…¥æ ¼å¼é”™è¯¯ï¼"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            who = <span class="keyword">get</span>(<span class="number">0</span>)</span><br><span class="line">            time = Date(<span class="keyword">get</span>(<span class="number">1</span>))</span><br><span class="line">            amount = <span class="keyword">get</span>(<span class="number">2</span>).toDouble()</span><br><span class="line">            <span class="keyword">if</span> (!isAmountValid(amount))</span><br><span class="line">                <span class="keyword">throw</span> IllegalArgumentException(<span class="string">"è¾“å…¥é‡‘é¢é”™è¯¯ï¼"</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">who</span><span class="params">()</span></span> = who</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">time</span><span class="params">()</span></span> = time</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">amount</span><span class="params">()</span></span> = amount</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">isAmountValid</span><span class="params">(amount: <span class="type">Double</span>)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (</span><br><span class="line">            <span class="built_in">Double</span>.NaN == amount ||</span><br><span class="line">            <span class="built_in">Double</span>.NEGATIVE_INFINITY == amount ||</span><br><span class="line">            <span class="built_in">Double</span>.POSITIVE_INFINITY == amount</span><br><span class="line">        ) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">compareTo</span><span class="params">(other: <span class="type">Transaction</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> compareValues(<span class="keyword">this</span>.amount, other.amount)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">toString</span><span class="params">()</span></span>: String &#123;</span><br><span class="line">        <span class="keyword">return</span> String.format(<span class="string">"%-10s %10s %8.2f"</span>, who, time, amount)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒåˆ†æŸ¥æ‰¾"><a href="#äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾"></a>äºŒåˆ†æŸ¥æ‰¾</h2><h3 id="å®ç°-5"><a href="#å®ç°-5" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="type">&lt;T : Comparable&lt;T&gt;</span>&gt; <span class="title">binarySearch</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    list: <span class="type">List</span>&lt;<span class="type">T</span>&gt;, key: <span class="type">T</span>, lo: <span class="type">Int</span> = <span class="number">0</span>, hi: <span class="type">Int</span> = list.size - <span class="number">1</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> lo = lo</span><br><span class="line">    <span class="keyword">var</span> hi = hi</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (lo &lt;= hi) &#123;</span><br><span class="line">        <span class="keyword">val</span> mid = lo + (hi - lo) / <span class="number">2</span></span><br><span class="line">        <span class="keyword">when</span> &#123;</span><br><span class="line">            key &lt; list[mid] -&gt; &#123;</span><br><span class="line">                hi = mid - <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">            key &gt; list[mid] -&gt; &#123;</span><br><span class="line">                lo = mid + <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> -&gt; &#123;</span><br><span class="line">                <span class="keyword">return</span> mid</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="GCD"><a href="#GCD" class="headerlink" title="GCD"></a>GCD</h2><h3 id="æ™®é€šGCD"><a href="#æ™®é€šGCD" class="headerlink" title="æ™®é€šGCD"></a>æ™®é€šGCD</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ™®é€šgcdæ¨¡æ¿</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="type">&lt;T : Number&gt;</span> <span class="title">gcd</span><span class="params">(a: <span class="type">T</span>, b: <span class="type">T</span>)</span></span>: <span class="built_in">Long</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (a == <span class="number">0</span>) <span class="keyword">return</span> b.toLong()</span><br><span class="line">    <span class="keyword">if</span> (b == <span class="number">0</span>) <span class="keyword">return</span> a.toLong()</span><br><span class="line">    <span class="keyword">var</span> ta = abs(a.toLong())</span><br><span class="line">    <span class="keyword">var</span> tb = abs(b.toLong())</span><br><span class="line">    <span class="keyword">while</span> (tb != <span class="number">0L</span>) &#123;</span><br><span class="line">        ta = tb.also &#123;</span><br><span class="line">            tb = ta % tb</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ta</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¿«é€ŸGCD"><a href="#å¿«é€ŸGCD" class="headerlink" title="å¿«é€ŸGCD"></a>å¿«é€ŸGCD</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¿«é€Ÿgcdæ¨¡æ¿</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">qgcd_</span><span class="params">(a: <span class="type">Long</span>, b: <span class="type">Long</span>)</span></span>: <span class="built_in">Long</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (a == <span class="number">0L</span>) <span class="keyword">return</span> b</span><br><span class="line">    <span class="keyword">if</span> (b == <span class="number">0L</span>) <span class="keyword">return</span> a</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ((a and <span class="number">1</span>) == <span class="number">0L</span> &amp;&amp; (b and <span class="number">1</span>) == <span class="number">0L</span>)</span><br><span class="line">        <span class="keyword">return</span> qgcd_(a shr <span class="number">1</span>, b shr <span class="number">1</span>) shl <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((b and <span class="number">1</span>) == <span class="number">0L</span>)</span><br><span class="line">        <span class="keyword">return</span> qgcd_(a, b shr <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((a and <span class="number">1</span>) == <span class="number">0L</span>)</span><br><span class="line">        <span class="keyword">return</span> qgcd_(a shr <span class="number">1</span>, b)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> qgcd_(abs(a - b), min(a, b))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="type">&lt;T : Number&gt;</span> <span class="title">qgcd</span><span class="params">(a: <span class="type">T</span>, b: <span class="type">T</span>)</span></span>: <span class="built_in">Long</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (a == <span class="number">0</span>) <span class="keyword">return</span> b.toLong()</span><br><span class="line">    <span class="keyword">if</span> (b == <span class="number">0</span>) <span class="keyword">return</span> a.toLong()</span><br><span class="line">    <span class="keyword">var</span> ta = a.toLong()</span><br><span class="line">    <span class="keyword">var</span> tb = b.toLong()</span><br><span class="line">    <span class="keyword">return</span> qgcd_(abs(ta), abs(tb))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="èƒŒåŒ…"><a href="#èƒŒåŒ…" class="headerlink" title="èƒŒåŒ…"></a>èƒŒåŒ…</h2><h3 id="API-3"><a href="#API-3" class="headerlink" title="API"></a>API</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="./pics/image-20200711225738407.png" alt="image-20200711225738407" title="">                </div>                <div class="image-caption">image-20200711225738407</div>            </figure><h3 id="å®ç°-6"><a href="#å®ç°-6" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ds</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> kotlin.NoSuchElementException</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bag</span>&lt;<span class="type">T</span>&gt; : <span class="type">Iterable</span>&lt;<span class="type">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> first: Node&lt;T&gt;? = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> n: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">isEmpty</span><span class="params">()</span></span>: <span class="built_in">Boolean</span> = first == <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">size</span><span class="params">()</span></span>: <span class="built_in">Int</span> = n</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">add</span><span class="params">(item: <span class="type">T</span>)</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> oi = first</span><br><span class="line">        first = Node(</span><br><span class="line">            item,</span><br><span class="line">            oi</span><br><span class="line">        )</span><br><span class="line">        n++</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">iterator</span><span class="params">()</span></span>: Iterator&lt;T&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> LinkedIterator&lt;T&gt;(first)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="type">T</span>&gt;</span>(</span><br><span class="line">        <span class="keyword">val</span> item: T,</span><br><span class="line">        <span class="keyword">var</span> next: Node&lt;T&gt;? = <span class="literal">null</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedIterator</span>&lt;<span class="type">T</span>&gt;</span>(</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">var</span> current: Node&lt;T&gt;?</span><br><span class="line">    ) : Iterator&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">hasNext</span><span class="params">()</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> current != <span class="literal">null</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">remove</span><span class="params">()</span></span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> UnsupportedOperationException()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">next</span><span class="params">()</span></span>: T &#123;</span><br><span class="line">            <span class="keyword">if</span> (!hasNext()) &#123;</span><br><span class="line">                <span class="keyword">throw</span> NoSuchElementException()</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">val</span> item = current?.item</span><br><span class="line">            current = current?.next</span><br><span class="line">            <span class="keyword">return</span> item!!</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ ˆ"><a href="#æ ˆ" class="headerlink" title="æ ˆ"></a>æ ˆ</h2><h3 id="API-4"><a href="#API-4" class="headerlink" title="API"></a>API</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="./pics/image-20200711225952602.png" alt="image-20200711225952602" title="">                </div>                <div class="image-caption">image-20200711225952602</div>            </figure><h3 id="å®ç°-7"><a href="#å®ç°-7" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ds</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stack</span>&lt;<span class="type">T</span>&gt; : <span class="type">Iterable</span>&lt;<span class="type">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> first: Node&lt;T&gt;? = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> n: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">isEmpty</span><span class="params">()</span></span>: <span class="built_in">Boolean</span> = first == <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">size</span><span class="params">()</span></span>: <span class="built_in">Int</span> = n</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">push</span><span class="params">(item: <span class="type">T</span>)</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> oi = first</span><br><span class="line">        first = Node(</span><br><span class="line">            item,</span><br><span class="line">            oi</span><br><span class="line">        )</span><br><span class="line">        n++</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">pop</span><span class="params">()</span></span>: T? &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> NoSuchElementException(<span class="string">"Stack underflow"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> first?.item.also &#123;</span><br><span class="line">            first = first?.next</span><br><span class="line">            n--</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">peek</span><span class="params">()</span></span>: T? &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> NoSuchElementException(<span class="string">"Stack underflow"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> first?.item</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">toString</span><span class="params">()</span></span>: String &#123;</span><br><span class="line">        <span class="keyword">return</span> StringBuilder().also &#123;</span><br><span class="line">            <span class="keyword">this</span>.forEach &#123; item -&gt; it.append(<span class="string">"<span class="variable">$item</span> "</span>) &#125;</span><br><span class="line">        &#125;.toString()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">iterator</span><span class="params">()</span></span>: Iterator&lt;T&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> LinkedIterator(first)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="type">T</span>&gt;</span>(</span><br><span class="line">        <span class="keyword">val</span> item: T,</span><br><span class="line">        <span class="keyword">var</span> next: Node&lt;T&gt;? = <span class="literal">null</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedIterator</span>&lt;<span class="type">T</span>&gt;</span>(</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">var</span> current: Node&lt;T&gt;?</span><br><span class="line">    ) : Iterator&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">hasNext</span><span class="params">()</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> current != <span class="literal">null</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">remove</span><span class="params">()</span></span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> UnsupportedOperationException()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">next</span><span class="params">()</span></span>: T &#123;</span><br><span class="line">            <span class="keyword">if</span> (!hasNext()) &#123;</span><br><span class="line">                <span class="keyword">throw</span> NoSuchElementException()</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">val</span> item = current?.item</span><br><span class="line">            current = current?.next</span><br><span class="line">            <span class="keyword">return</span> item!!</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é˜Ÿåˆ—"><a href="#é˜Ÿåˆ—" class="headerlink" title="é˜Ÿåˆ—"></a>é˜Ÿåˆ—</h2><h3 id="API-5"><a href="#API-5" class="headerlink" title="API"></a>API</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="./pics/image-20200711230035937.png" alt="image-20200711230035937" title="">                </div>                <div class="image-caption">image-20200711230035937</div>            </figure><h3 id="å®ç°-8"><a href="#å®ç°-8" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ds</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Queue</span>&lt;<span class="type">T</span>&gt; : <span class="type">Iterable</span>&lt;<span class="type">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> first: Node&lt;T&gt;? = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> last: Node&lt;T&gt;? = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> n: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">isEmpty</span><span class="params">()</span></span>: <span class="built_in">Boolean</span> = first == <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">size</span><span class="params">()</span></span>: <span class="built_in">Int</span> = n</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">enqueue</span><span class="params">(item: <span class="type">T</span>)</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> ol = last</span><br><span class="line">        last = Node(</span><br><span class="line">            item,</span><br><span class="line">            <span class="literal">null</span></span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            first = last</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            ol?.next = last</span><br><span class="line">        &#125;</span><br><span class="line">        n++</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">dequeue</span><span class="params">()</span></span>: T? &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> NoSuchElementException(<span class="string">"Stack underflow"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> first?.item.also &#123;</span><br><span class="line">            first = first?.next</span><br><span class="line">            n--</span><br><span class="line">            <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">                last = <span class="literal">null</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">peek</span><span class="params">()</span></span>: T? &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> NoSuchElementException(<span class="string">"Stack underflow"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> first?.item</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">toString</span><span class="params">()</span></span>: String &#123;</span><br><span class="line">        <span class="keyword">return</span> StringBuilder().also &#123;</span><br><span class="line">            <span class="keyword">this</span>.forEach &#123; item -&gt; it.append(<span class="string">"<span class="variable">$item</span> "</span>) &#125;</span><br><span class="line">        &#125;.toString()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">iterator</span><span class="params">()</span></span>: Iterator&lt;T&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> LinkedIterator(first)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="type">T</span>&gt;</span>(</span><br><span class="line">        <span class="keyword">val</span> item: T,</span><br><span class="line">        <span class="keyword">var</span> next: Node&lt;T&gt;? = <span class="literal">null</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedIterator</span>&lt;<span class="type">T</span>&gt;</span>(</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">var</span> current: Node&lt;T&gt;?</span><br><span class="line">    ) : Iterator&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">hasNext</span><span class="params">()</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> current != <span class="literal">null</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">remove</span><span class="params">()</span></span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> UnsupportedOperationException()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">next</span><span class="params">()</span></span>: T &#123;</span><br><span class="line">            <span class="keyword">if</span> (!hasNext()) &#123;</span><br><span class="line">                <span class="keyword">throw</span> NoSuchElementException()</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">val</span> item = current?.item</span><br><span class="line">            current = current?.next</span><br><span class="line">            <span class="keyword">return</span> item!!</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‹¬å·åŒ¹é…"><a href="#æ‹¬å·åŒ¹é…" class="headerlink" title="æ‹¬å·åŒ¹é…"></a>æ‹¬å·åŒ¹é…</h2><h3 id="å®ç°-9"><a href="#å®ç°-9" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‹¬å·æ˜¯å¦åŒ¹é…</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">isBanlanced</span><span class="params">(expr: <span class="type">String</span>)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">    <span class="keyword">val</span> s = Stack&lt;<span class="built_in">Char</span>&gt;()</span><br><span class="line"></span><br><span class="line">    expr.forEach &#123; c: <span class="built_in">Char</span> -&gt;</span><br><span class="line">        <span class="keyword">when</span> (c) &#123;</span><br><span class="line">            <span class="string">'('</span>, <span class="string">'&#123;'</span>, <span class="string">'['</span> -&gt; s.push(c)</span><br><span class="line">            <span class="string">')'</span> -&gt; <span class="keyword">if</span> (s.isEmpty() || s.pop() != <span class="string">'('</span>) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">            <span class="string">']'</span> -&gt; <span class="keyword">if</span> (s.isEmpty() || s.pop() != <span class="string">'['</span>) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">            <span class="string">'&#125;'</span> -&gt; <span class="keyword">if</span> (s.isEmpty() || s.pop() != <span class="string">'&#123;'</span>) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç®—æ³•ç¬¬å››ç‰ˆç¬¬ä¸€ç« èŠ‚
    
    </summary>
    
    
      <category term="algorithm4" scheme="http://blog.fivezha.cn/categories/algorithm4/"/>
    
    
      <category term="kotlin" scheme="http://blog.fivezha.cn/tags/kotlin/"/>
    
      <category term="algorithm" scheme="http://blog.fivezha.cn/tags/algorithm/"/>
    
  </entry>
  
  <entry>
    <title>çº¿æ€§åŠ¨ç”»/éçº¿æ€§åŠ¨ç”»</title>
    <link href="http://blog.fivezha.cn/2020/05/01/linear-anime/"/>
    <id>http://blog.fivezha.cn/2020/05/01/linear-anime/</id>
    <published>2020-05-01T13:34:56.000Z</published>
    <updated>2020-07-14T04:13:24.802Z</updated>
    
    <content type="html"><![CDATA[<p>èµ·å› æ˜¯å› ä¸ºä»Šå¤©çœ‹åˆ°bç«™ä¸Šæœ‰è‡ªåª’ä½“è¯„æµ‹ <code>MIUI12</code> , è¯´åˆ°äº†åŠ¨ç”»æµç•…åº¦é‚£æ–¹é¢å¼¹å¹•éƒ½è¯´çº¿æ€§åŠ¨ç”»éçº¿æ€§åŠ¨ç”»ä»€ä¹ˆçš„, å…¶å®å¾ˆæ—©ä¹‹å‰ <code>MUI</code> å°±æ˜¯å…¨çº¿é‡‡ç”¨éçº¿æ€§åŠ¨ç”»äº†, ä½†è¿™ä¸ªçº¿æ€§ä¸éçº¿æ€§åˆæ˜¯ä»€ä¹ˆ, æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢, æˆ‘ä»Šå¤©å°±ç¨å¾®æ¥è®²ä¸€ä¸‹.<br>å…¶å®è¿™ä¸ªé«˜ä¸­å°±å­¦ä¹ è¿‡äº†, ä¸è¿‡å› ä¸ºæœ€è¿‘å­¦ä¹ äº†js, å¯ä»¥æ›´åŠ æ˜ç¡®çš„å±•ç¤ºå‡ºæ¥äº†.<a id="more"></a></p><h2 id="ä»€ä¹ˆæ˜¯çº¿æ€§åŠ¨ç”»-éçº¿æ€§åŠ¨ç”»"><a href="#ä»€ä¹ˆæ˜¯çº¿æ€§åŠ¨ç”»-éçº¿æ€§åŠ¨ç”»" class="headerlink" title="ä»€ä¹ˆæ˜¯çº¿æ€§åŠ¨ç”»/éçº¿æ€§åŠ¨ç”»"></a>ä»€ä¹ˆæ˜¯çº¿æ€§åŠ¨ç”»/éçº¿æ€§åŠ¨ç”»</h2><p>è¦ç†è§£è¿™ä¸ª, é¦–å…ˆéœ€è¦ç†è§£ä¸€ä¸ªé—®é¢˜: *<em>ä»€ä¹ˆæ˜¯åŠ¨ç”»? *</em> </p><h3 id="ä»€ä¹ˆæ˜¯åŠ¨ç”»"><a href="#ä»€ä¹ˆæ˜¯åŠ¨ç”»" class="headerlink" title="ä»€ä¹ˆæ˜¯åŠ¨ç”»?"></a>ä»€ä¹ˆæ˜¯åŠ¨ç”»?</h3><p>æ ¹æ® <strong>ç»´åŸºç™¾ç§‘</strong> æ‰€å™è¿°çš„: </p><blockquote><p><strong>åŠ¨ç”»</strong>æ˜¯æŒ‡ç”±è®¸å¤š<a href="https://zh.wikipedia.org/wiki/%E5%B8%A7" target="_blank" rel="noopener">å¸§</a>é™æ­¢çš„ç”»é¢ï¼Œä»¥ä¸€å®šçš„é€Ÿåº¦ï¼ˆå¦‚æ¯ç§’16å¼ ï¼‰è¿ç»­æ’­æ”¾æ—¶ï¼Œè‚‰çœ¼å› <a href="https://zh.wikipedia.org/wiki/%E8%A7%86%E8%A7%89%E6%AE%8B%E8%B1%A1" target="_blank" rel="noopener">è§†è§‰æ®‹è±¡</a>äº§ç”Ÿ<a href="https://zh.wikipedia.org/wiki/%E9%8C%AF%E8%A6%BA" target="_blank" rel="noopener">é”™è§‰</a>ï¼Œè€Œè¯¯ä»¥ä¸ºç”»é¢æ´»åŠ¨çš„ä½œå“ã€‚</p></blockquote><p>å¯ä»¥äº†è§£åˆ°, åŠ¨ç”», å…¶å®å°±æ˜¯å¾ˆå¤šé™æ­¢çš„ç”»é¢åˆ©ç”¨è§†è§‰æ®‹ç•™ç°è±¡åšå‡ºæ¥çš„å¯åŠ¨çš„æ•ˆæœ, æ‰€ä»¥è¯´å¦‚æœæƒ³è¦æ¨¡ä»¿åŠ¨ç”»çš„æ•ˆæœ, åªéœ€è¦åœ¨1så†…å¯¹ä¸€å¼ å›¾ç‰‡æ›´æ›¿ä¸€å®šçš„é‡çš„æ¬¡æ•°, äººçœ¼å°±ä¸ä¼šçœ‹å‡ºæ˜¯å¦å¯¹è¿™å¼ å›¾ç‰‡è¿›è¡Œäº†æ›´æ›¿, è¿™, å…¶å®å°±æ˜¯ <strong>å¸§</strong> .<br>åŒæ—¶,å¹¶ä¸æ˜¯æ‰€æœ‰çš„ <strong>å¸§</strong> éƒ½æ˜¯ä¼šæ›´æ”¹çš„, æœ‰äº›å¸§å®Œå…¨å°±æ˜¯ä¸ä¼šå˜åŒ–çš„, è¿™å°±å¼•å‡ºäº† <strong>å…³é”®å¸§</strong> çš„æ¦‚å¿µ, æˆ‘ä»¬åªéœ€è¦ç€é‡å…³æ³¨äºå…³é”®æ›´æ”¹äº†å›¾è±¡çš„ <strong>å¸§</strong> å³å¯, å¹¶ä¸éœ€è¦å…³æ³¨å…¶ä»–çŠ¶æ€çš„ <strong>é™æ­¢å¸§</strong> .<br>æœ¬æ¬¡ç¼–ç¨‹å®è·µä¹Ÿæ˜¯åªé’ˆå¯¹äºå…³é”®å¸§å¤„ç†çš„.</p><h3 id="ä»€ä¹ˆæ˜¯éçº¿æ€§åŠ¨ç”»"><a href="#ä»€ä¹ˆæ˜¯éçº¿æ€§åŠ¨ç”»" class="headerlink" title="ä»€ä¹ˆæ˜¯éçº¿æ€§åŠ¨ç”»"></a>ä»€ä¹ˆæ˜¯éçº¿æ€§åŠ¨ç”»</h3><p>åœ¨ <code>Maya</code> ç”¨æˆ·æŒ‡å—ä¸Šæœ‰è¿™ä¹ˆä¸€å¥è¯:</p><blockquote><p><em>åœ¨ Maya ä¸­ï¼Œæœ‰ä¸¤ç§ç±»å‹çš„ç‰‡æ®µï¼šæºç‰‡æ®µå’Œå¸¸è§„å‰ªè¾‘ã€‚Maya é€šè¿‡å°†è§’è‰²çš„åŸå§‹åŠ¨ç”»æ›²çº¿ä¿å­˜åœ¨æºç‰‡æ®µä¸­ï¼Œæ¥ä¿ç•™åŠä¿å­˜è§’è‰²åŸå§‹åŠ¨ç”»æ›²çº¿<em>ã€‚è¯·å‹¿ä½¿ç”¨æºç‰‡æ®µ<em>ä¸ºè§’è‰²è®¾ç½®åŠ¨ç”»ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æºç‰‡æ®µï¼ˆç§°ä¸º_å¸¸è§„ç‰‡æ®µ_ï¼‰çš„å‰¯æœ¬æˆ–_å®ä¾‹_ä»¥éçº¿æ€§æ–¹å¼ä¸ºè§’è‰²è®¾ç½®åŠ¨ç”»ã€‚è¯·å‚è§<a href="https://knowledge.autodesk.com/zh-hans/support/maya/learn-explore/caas/CloudHelp/cloudhelp/2015/CHS/Maya/files/GUID-D462A79C-A766-43DD-BB43-5BCDAEC5D8BD-htm.html#GUID-D462A79C-A766-43DD-BB43-5BCDAEC5D8BD__WS17956D7ADBC6E736B6BA507117AE308213-7FF6" target="_blank" rel="noopener">åŠ¨ç”»ç‰‡æ®µ</a>ã€‚</em></em></em></p><p>__éçº¿æ€§åŠ¨ç”»çš„åŸºç¡€æ˜¯ï¼Œç§»åŠ¨ã€æ“çºµå’Œæ··åˆå¸¸è§„ç‰‡æ®µï¼Œä»è€Œä¸ºè§’è‰²ç”Ÿæˆä¸€ç³»åˆ—å¹³æ»‘çš„åŠ¨ä½œ<em>ã€‚<br>_</em>&gt; </p></blockquote><p>çœ‹ä¸Šå»å¾ˆé«˜çº§, è¯´ç™½äº†å…¶å®å°±æ˜¯åŠ¨ç”»çš„å…³é”®å¸§åœç•™ä½ç½®(æ—¶æ®µ), ä¹Ÿå°±æ˜¯è¯´, éçº¿æ€§çš„å…³é”®å¸§æ‰€åœç•™çš„å¹¶ä¸æ˜¯å¤„äºå¸¸è§è§„å¾‹ä¸­çš„, ä»–å¯èƒ½æ˜¯éµå¾ªäºŒæ¬¡å‡½æ•°, éµå¾ªéœ‡è¡å‡½æ•°, æ€»ä¹‹, å…¶è§„å¾‹ä¸€å®šä¸æ˜¯çº¿æ€§è§„å¾‹(ä¸€æ¬¡å‡½æ•°).</p><h3 id="ä»€ä¹ˆæ˜¯çº¿æ€§åŠ¨ç”»"><a href="#ä»€ä¹ˆæ˜¯çº¿æ€§åŠ¨ç”»" class="headerlink" title="ä»€ä¹ˆæ˜¯çº¿æ€§åŠ¨ç”»"></a>ä»€ä¹ˆæ˜¯çº¿æ€§åŠ¨ç”»</h3><p>æ‰€ä»¥, çº¿æ€§åŠ¨ç”»å°±å¾ˆå®¹æ˜“ç†è§£äº†, æ‰€æœ‰å…³é”®å¸§åœç•™ä½ç½®å…¶å®éƒ½æ˜¯å¤„åœ¨ä¸€æ¡çº¿ä¸­çš„, å…¶å¯¼æ•°æ°¸è¿œæ˜¯å¸¸æ•°.</p><h2 id="çº¿æ€§åŠ¨ç”»-éçº¿æ€§åŠ¨ç”»æœ‰ä»€ä¹ˆç”¨"><a href="#çº¿æ€§åŠ¨ç”»-éçº¿æ€§åŠ¨ç”»æœ‰ä»€ä¹ˆç”¨" class="headerlink" title="çº¿æ€§åŠ¨ç”»/éçº¿æ€§åŠ¨ç”»æœ‰ä»€ä¹ˆç”¨"></a>çº¿æ€§åŠ¨ç”»/éçº¿æ€§åŠ¨ç”»æœ‰ä»€ä¹ˆç”¨</h2><p>é‚£ä¹ˆ, éçº¿æ€§åŠ¨ç”»åˆæœ‰ç€ä»€ä¹ˆæ ·çš„ç‰¹æ®Šç”¨é€”å‘¢?<br>å¾ˆç®€å•çš„, åº”ç”¨åœ¨æ‰‹æœºä¸Š, è¿™ä¼šè®©ä½ çš„åŠ¨ç”»æ„Ÿè§‰æ›´æœ‰åŠ¨æ„Ÿ, æ›´åŠ ç²¾è‡´, ä¸ä¼šåƒæ˜¯çº¿æ€§åŠ¨ç”»é‚£æ ·, ä¸€æ¿ä¸€çœ¼.<br>æ¯”å¦‚ <code>IOS</code> ä¸€ç›´éƒ½æ˜¯éçº¿æ€§åŠ¨ç”», ç»™äººçš„æ„Ÿå—å°±éå¸¸çš„ä¸æ»‘.<br>è€Œæ—©å¹´é—´çš„ <code>Android</code> åŠ¨ç”»éƒ½æ˜¯çº¿æ€§åŠ¨ç”», ç»™äººçš„æ„Ÿè§‰å°±åƒæ˜¯æœºæ¢°ä¸€èˆ¬çš„ç²¾å¯†ä½†åˆ»æ¿. </p><h2 id="ç®€å•çš„çº¿æ€§åŠ¨ç”»-ç‚¹å‡»å›¾ç‰‡çœ‹åŠ¨ç”»"><a href="#ç®€å•çš„çº¿æ€§åŠ¨ç”»-ç‚¹å‡»å›¾ç‰‡çœ‹åŠ¨ç”»" class="headerlink" title="ç®€å•çš„çº¿æ€§åŠ¨ç”»(ç‚¹å‡»å›¾ç‰‡çœ‹åŠ¨ç”»):"></a>ç®€å•çš„çº¿æ€§åŠ¨ç”»(ç‚¹å‡»å›¾ç‰‡çœ‹åŠ¨ç”»):</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pics/1588320557603-83ac95ee-be22-4c90-8b6d-67819c6439bc.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><p class="codepen" data-height="265" data-theme-id="light" data-default-tab="js,result" data-user="xmmmmmovo" data-slug-hash="ExVwZpd" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="çº¿æ€§åŠ¨ç”»">  <span>See the Pen <a href="https://codepen.io/xmmmmmovo/pen/ExVwZpd" target="_blank" rel="noopener">  çº¿æ€§åŠ¨ç”»</a> by  !è¾“è®¤ä¸æ°¸DGL (<a href="https://codepen.io/xmmmmmovo" target="_blank" rel="noopener">@xmmmmmovo</a>)  on <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</span></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script><h2 id=""><a href="#" class="headerlink" title=""></a></h2><h2 id="ç®€å•çš„éçº¿æ€§-ç‚¹å‡»å›¾ç‰‡çœ‹åŠ¨ç”»"><a href="#ç®€å•çš„éçº¿æ€§-ç‚¹å‡»å›¾ç‰‡çœ‹åŠ¨ç”»" class="headerlink" title="ç®€å•çš„éçº¿æ€§(ç‚¹å‡»å›¾ç‰‡çœ‹åŠ¨ç”»):"></a>ç®€å•çš„éçº¿æ€§(ç‚¹å‡»å›¾ç‰‡çœ‹åŠ¨ç”»):</h2><h3 id="åœ†å¼§éçº¿æ€§"><a href="#åœ†å¼§éçº¿æ€§" class="headerlink" title="åœ†å¼§éçº¿æ€§"></a>åœ†å¼§éçº¿æ€§</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pics/1588320756761-3d5a0233-e333-4fdb-a2a2-38aabfc5d443.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><p class="codepen" data-height="265" data-theme-id="light" data-default-tab="js,result" data-user="xmmmmmovo" data-slug-hash="gOaGmpg" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="åŠ é€Ÿéçº¿æ€§">  <span>See the Pen <a href="https://codepen.io/xmmmmmovo/pen/gOaGmpg" target="_blank" rel="noopener">  åŠ é€Ÿéçº¿æ€§</a> by  !è¾“è®¤ä¸æ°¸DGL (<a href="https://codepen.io/xmmmmmovo" target="_blank" rel="noopener">@xmmmmmovo</a>)  on <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</span></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script><h3 id="åŠ å‡é€Ÿéçº¿æ€§"><a href="#åŠ å‡é€Ÿéçº¿æ€§" class="headerlink" title="åŠ å‡é€Ÿéçº¿æ€§"></a>åŠ å‡é€Ÿéçº¿æ€§</h3><p>å…ˆåŠ é€Ÿå†å‡é€Ÿ, äºŒæ¬¡å‡½æ•°</p><p class="codepen" data-height="265" data-theme-id="light" data-default-tab="js,result" data-user="xmmmmmovo" data-slug-hash="eYpGvYP" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="äºŒæ¬¡éçº¿æ€§">  <span>See the Pen <a href="https://codepen.io/xmmmmmovo/pen/eYpGvYP" target="_blank" rel="noopener">  äºŒæ¬¡éçº¿æ€§</a> by  !è¾“è®¤ä¸æ°¸DGL (<a href="https://codepen.io/xmmmmmovo" target="_blank" rel="noopener">@xmmmmmovo</a>)  on <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</span></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script><h3 id="ç¢°æ’åå¼¹"><a href="#ç¢°æ’åå¼¹" class="headerlink" title="ç¢°æ’åå¼¹"></a>ç¢°æ’åå¼¹</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pics/1588320853246-0a0dc7da-a845-4b4d-9280-6ada3d2c2370.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><p>å¦‚æœåœ¨å¼€å§‹æ—¶æœ‰åŠ¨ç”»æ•ˆæœï¼Œæ¯”å¦‚å¼¹è·³ â€”â€” é‚£ä¹ˆå®ƒå°†åœ¨æœ€åæ˜¾ç¤ºã€‚<br>ä¸Šå›¾ä¸­å¸¸è§„å¼¹è·³ä¸ºçº¢è‰²ï¼ŒeaseOut å¼¹è·³ä¸ºè“è‰²ã€‚</p><ul><li>å¸¸è§„å¼¹è·³ â€”â€” ç‰©ä½“åœ¨åº•éƒ¨å¼¹è·³ï¼Œç„¶åçªç„¶è·³åˆ°é¡¶éƒ¨ã€‚</li><li><code>easeOut</code> å˜æ¢ä¹‹å â€”â€” ç‰©ä½“è·³åˆ°é¡¶éƒ¨ä¹‹åï¼Œåœ¨é‚£é‡Œå¼¹è·³ã€‚</li></ul><p class="codepen" data-height="265" data-theme-id="light" data-default-tab="js,result" data-user="xmmmmmovo" data-slug-hash="RwWZdeW" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="ç¢°æ’éçº¿æ€§">  <span>See the Pen <a href="https://codepen.io/xmmmmmovo/pen/RwWZdeW" target="_blank" rel="noopener">  ç¢°æ’éçº¿æ€§</a> by  !è¾“è®¤ä¸æ°¸DGL (<a href="https://codepen.io/xmmmmmovo" target="_blank" rel="noopener">@xmmmmmovo</a>)  on <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</span></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å¦‚æœç†è®ºçœ‹ä¸æ‡‚, é‚£å¤§æ¦‚çœ‹ä¾‹å­ä¹Ÿèƒ½é¢†ä¼šäº†, æœ‰äº›ä¸œè¥¿,  ä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘è¯­æ–‡å¤ªå·®çš„ç¼˜æ•…, ç†è®ºå®åœ¨æ˜¯éš¾ä»¥å½¢å®¹, ä½†æ˜¯å½“å®é™…ä¾‹å­å±•ç¤ºå‡ºæ¥äº†ä¹‹å, å°±ä¼šå‘ç°, å…¶å®è¿™ä¸ªè¿˜æ˜¯å¾ˆå®¹æ˜“ç†è§£/çœ‹å‡ºæ¥çš„å˜›.</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;èµ·å› æ˜¯å› ä¸ºä»Šå¤©çœ‹åˆ°bç«™ä¸Šæœ‰è‡ªåª’ä½“è¯„æµ‹ &lt;code&gt;MIUI12&lt;/code&gt; , è¯´åˆ°äº†åŠ¨ç”»æµç•…åº¦é‚£æ–¹é¢å¼¹å¹•éƒ½è¯´çº¿æ€§åŠ¨ç”»éçº¿æ€§åŠ¨ç”»ä»€ä¹ˆçš„, å…¶å®å¾ˆæ—©ä¹‹å‰ &lt;code&gt;MUI&lt;/code&gt; å°±æ˜¯å…¨çº¿é‡‡ç”¨éçº¿æ€§åŠ¨ç”»äº†, ä½†è¿™ä¸ªçº¿æ€§ä¸éçº¿æ€§åˆæ˜¯ä»€ä¹ˆ, æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢, æˆ‘ä»Šå¤©å°±ç¨å¾®æ¥è®²ä¸€ä¸‹.&lt;br&gt;å…¶å®è¿™ä¸ªé«˜ä¸­å°±å­¦ä¹ è¿‡äº†, ä¸è¿‡å› ä¸ºæœ€è¿‘å­¦ä¹ äº†js, å¯ä»¥æ›´åŠ æ˜ç¡®çš„å±•ç¤ºå‡ºæ¥äº†.
    
    </summary>
    
    
      <category term="study" scheme="http://blog.fivezha.cn/categories/study/"/>
    
    
      <category term="animation" scheme="http://blog.fivezha.cn/tags/animation/"/>
    
      <category term="javascript" scheme="http://blog.fivezha.cn/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title>ç½‘ç»œç¼–ç¨‹ç¬”è®°(2)---UDPä¸åˆ†åŒ…åè®®</title>
    <link href="http://blog.fivezha.cn/2020/04/29/socket-program-2/"/>
    <id>http://blog.fivezha.cn/2020/04/29/socket-program-2/</id>
    <published>2020-04-29T12:39:32.000Z</published>
    <updated>2020-07-14T04:12:06.640Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦æ˜¯åœ¨<code>Linux</code>ç¯å¢ƒä¸‹ç¼–å†™<code>socket</code>ç¨‹åºï¼Œæœ¬æ¬¡å®ç°ç®€å•UDP<code>echo server</code>å’Œ<code>echo client</code>ï¼ŒåŒ…å«ç®€å•åˆ†åŒ…æ“ä½œå’Œåè®®è®¾è®¡<a id="more"></a></p><h2 id="ç¬”è®°"><a href="#ç¬”è®°" class="headerlink" title="ç¬”è®°"></a>ç¬”è®°</h2><h3 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h3><p>ç”¨æˆ·æ•°æ®æŠ¥åè®®, ä¸ä¼šå­˜åœ¨ACKåº”ç­”æ¶ˆæ¯, ç±»ä¼¼äºå¹¿æ’­çš„æ— è¿æ¥ä¼ è¾“å±‚åè®®.<br>å°±æ˜¯è¯´UDPä»…éœ€è¦ä¸€ä¸ªå¥—æ¥å­—ä¾¿å¯ä»¥ä¸å¤šå°ä¸»æœºé€šä¿¡.</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pics/1588175417340-add4bff5-70e3-487a-a985-a785d128e7c2.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><h3 id="åŸºäºUDPçš„I-Oå‡½æ•°"><a href="#åŸºäºUDPçš„I-Oå‡½æ•°" class="headerlink" title="åŸºäºUDPçš„I/Oå‡½æ•°"></a>åŸºäºUDPçš„I/Oå‡½æ•°</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pics/1588175460188-704393eb-505a-46e0-9693-ab613526a06a.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pics/1588175608463-c92bd247-7809-410b-a810-295798fcfd22.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><h3 id="å®ç°åŸºäºUDPçš„EchoæœåŠ¡å™¨"><a href="#å®ç°åŸºäºUDPçš„EchoæœåŠ¡å™¨" class="headerlink" title="å®ç°åŸºäºUDPçš„EchoæœåŠ¡å™¨"></a>å®ç°åŸºäºUDPçš„EchoæœåŠ¡å™¨</h3><h4 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pics/1588254306045-87a9f7ec-9523-4eb3-afe2-5ca4deba9b2f.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><h4 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Created by xmmmmmovo on 2020/4/29.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;arpa/inet.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//constexpr int BUF_SIZE = 256;</span></span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">int</span> BUF_SIZE = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">error_handler</span><span class="params">(<span class="keyword">char</span> *message)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Usage: %s &lt;port&gt; \n"</span>, argv[ <span class="number">0</span> ]);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> sock = socket(PF_INET, SOCK_DGRAM, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    sockaddr_in sockAddr&#123;&#125;;</span><br><span class="line">    <span class="built_in">memset</span>(&amp;sockAddr, <span class="number">0</span>, <span class="keyword">sizeof</span>(sockAddr));</span><br><span class="line">    sockAddr.sin_family      = AF_INET;</span><br><span class="line">    sockAddr.sin_addr.s_addr = htonl(INADDR_ANY);</span><br><span class="line">    sockAddr.sin_port        = htons(atoi(argv[ <span class="number">1</span> ]));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="number">-1</span> == bind(sock, (struct sockaddr *) &amp;sockAddr, <span class="keyword">sizeof</span>(sockAddr))) &#123;</span><br><span class="line">        error_handler(<span class="string">"bind() error!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    sockaddr_in clntAddr&#123;&#125;;</span><br><span class="line">    <span class="keyword">socklen_t</span>   clntAddrLen = <span class="keyword">sizeof</span>(clntAddr);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> buf[ <span class="number">512</span> ];</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> recv_len = recvfrom(sock, buf, BUF_SIZE, <span class="number">0</span>, (struct sockaddr *) &amp;clntAddr, &amp;clntAddrLen);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"recv len = %d\n"</span>, recv_len);</span><br><span class="line">        sendto(sock, buf, recv_len, <span class="number">0</span>, (struct sockaddr *) &amp;clntAddr, <span class="keyword">sizeof</span>(clntAddr));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    close(sock);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">error_handler</span><span class="params">(<span class="keyword">char</span> *message)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">fputs</span>(message, <span class="built_in">stderr</span>);</span><br><span class="line">    fputc(<span class="string">'\n'</span>, <span class="built_in">stderr</span>);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Client"><a href="#Client" class="headerlink" title="Client"></a>Client</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Created by xmmmmmovo on 2020/4/29.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;arpa/inet.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//constexpr int BUF_SIZE = 256;</span></span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">int</span> BUF_SIZE = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">error_handler</span><span class="params">(<span class="keyword">char</span> *message)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">InetAddress</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">InetAddress</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">string</span> port, <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> ip = <span class="string">""</span>)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">memset</span>(&amp;addr_, <span class="number">0</span>, <span class="keyword">sizeof</span>(addr_));</span><br><span class="line">        addr_.sin_family = AF_INET;</span><br><span class="line">        addr_.sin_port   = htons(atoi(port.c_str()));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (ip == <span class="string">""</span>)</span><br><span class="line">            addr_.sin_addr.s_addr = htonl(INADDR_ANY);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            addr_.sin_addr.s_addr = inet_addr(ip.c_str());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~InetAddress() = <span class="keyword">default</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">sockaddr_in &amp;<span class="title">getAddr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> addr_;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">addr_</span> &#123;</span>&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Socket</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">Socket</span><span class="params">(<span class="keyword">int</span> type)</span> </span>&#123;</span><br><span class="line">        fd_ = socket(PF_INET, type, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    ~Socket() &#123;</span><br><span class="line">        close(fd_);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">ssize_t</span> <span class="title">sendto</span><span class="params">(InetAddress &amp;addr, <span class="keyword">void</span> *pData, <span class="keyword">size_t</span> nBytes)</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        sockaddr *toAddr  = (sockaddr *) &amp;(addr.getAddr());</span><br><span class="line">        <span class="keyword">socklen_t</span> addrLen = <span class="keyword">sizeof</span>(addr.getAddr());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ::sendto(fd_, pData, nBytes, <span class="number">0</span>, toAddr, addrLen);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">ssize_t</span> <span class="title">recvfrom</span><span class="params">(InetAddress &amp;addr, <span class="keyword">void</span> *buf, <span class="keyword">size_t</span> nBytes)</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ::recvfrom(fd_, buf, nBytes, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> fd_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Usage: %s &lt;ip&gt; &lt;port&gt; \n"</span>, argv[ <span class="number">0</span> ]);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Socket <span class="title">sock</span><span class="params">(SOCK_DGRAM)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">InetAddress <span class="title">addr</span><span class="params">(argv[ <span class="number">2</span> ], argv[ <span class="number">1</span> ])</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> buf[ <span class="number">1024</span> ];</span><br><span class="line">    <span class="keyword">int</span>  sl = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        fgets(buf + <span class="number">3</span>, <span class="keyword">sizeof</span>(buf) - <span class="number">3</span>, <span class="built_in">stdin</span>);</span><br><span class="line">        sl = <span class="built_in">strlen</span>(buf + <span class="number">3</span>) - <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"str len = %d\n"</span>, sl);</span><br><span class="line">        <span class="keyword">if</span> (sl &lt; BUF_SIZE - <span class="number">3</span>) &#123;</span><br><span class="line">            buf[ <span class="number">1</span> ]     = (<span class="keyword">char</span>) <span class="number">1</span>;</span><br><span class="line">            buf[ <span class="number">2</span> ]     = (<span class="keyword">char</span>) sl;</span><br><span class="line">            <span class="keyword">int</span> send_len = sock.sendto(addr, buf + <span class="number">1</span>, sl + <span class="number">2</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"send len = %d\n"</span>, send_len);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">int</span> pack_num = <span class="built_in">ceil</span>((<span class="keyword">double</span>) sl / (BUF_SIZE - <span class="number">3</span>));</span><br><span class="line">            buf[ <span class="number">0</span> ] = (<span class="keyword">char</span>) <span class="number">0</span>;</span><br><span class="line">            buf[ <span class="number">1</span> ] = (<span class="keyword">char</span>) pack_num;</span><br><span class="line">            sock.sendto(addr, buf, <span class="number">2</span>);</span><br><span class="line">            <span class="keyword">int</span> st = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; pack_num; ++i) &#123;</span><br><span class="line">                st            = i * (BUF_SIZE - <span class="number">3</span>);</span><br><span class="line">                buf[ st ]     = (<span class="keyword">char</span>) <span class="number">2</span>;</span><br><span class="line">                buf[ st + <span class="number">1</span> ] = (<span class="keyword">char</span>) (i + <span class="number">1</span>);</span><br><span class="line">                buf[ st + <span class="number">2</span> ] = i == pack_num - <span class="number">1</span> ? <span class="built_in">strlen</span>(buf + st + <span class="number">3</span>) : BUF_SIZE - <span class="number">3</span>;</span><br><span class="line">                sock.sendto(addr, buf + st, BUF_SIZE);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> recv_len = sock.recvfrom(addr, buf, BUF_SIZE);</span><br><span class="line">        buf[ recv_len ] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (buf[ <span class="number">0</span> ] == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"Message from server: %s\n"</span>, buf + <span class="number">2</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (buf[ <span class="number">0</span> ] == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// æ•°æ®åŒ…è·å–</span></span><br><span class="line">            <span class="keyword">int</span>  pack_num = (<span class="keyword">int</span>) buf[ <span class="number">1</span> ];</span><br><span class="line">            <span class="keyword">int</span>  cnt      = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">char</span> pc_buf[ BUF_SIZE ];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; pack_num; ++i) &#123;</span><br><span class="line">                recv_len = sock.recvfrom(addr, pc_buf, BUF_SIZE);</span><br><span class="line">                <span class="built_in">std</span>::copy(pc_buf + <span class="number">3</span>, pc_buf + recv_len, buf + cnt);</span><br><span class="line">                cnt += (<span class="keyword">int</span>) pc_buf[ <span class="number">2</span> ];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"Message from server: %s\n"</span>, buf);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">error_handler</span><span class="params">(<span class="keyword">char</span> *message)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">fputs</span>(message, <span class="built_in">stderr</span>);</span><br><span class="line">    fputc(<span class="string">'\n'</span>, <span class="built_in">stderr</span>);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h3><p>client</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pics/1589817412488-c00d1ea9-1c9b-4a72-8659-90660f28e957.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><p>server</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pics/1589817429806-44055c2e-235d-4d11-b053-d0d8d0b4c371.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ä¸»è¦æ˜¯åœ¨&lt;code&gt;Linux&lt;/code&gt;ç¯å¢ƒä¸‹ç¼–å†™&lt;code&gt;socket&lt;/code&gt;ç¨‹åºï¼Œæœ¬æ¬¡å®ç°ç®€å•UDP&lt;code&gt;echo server&lt;/code&gt;å’Œ&lt;code&gt;echo client&lt;/code&gt;ï¼ŒåŒ…å«ç®€å•åˆ†åŒ…æ“ä½œå’Œåè®®è®¾è®¡
    
    </summary>
    
    
      <category term="assignment" scheme="http://blog.fivezha.cn/categories/assignment/"/>
    
    
      <category term="c++" scheme="http://blog.fivezha.cn/tags/c/"/>
    
      <category term="socket" scheme="http://blog.fivezha.cn/tags/socket/"/>
    
  </entry>
  
  <entry>
    <title>ç½‘ç»œç¼–ç¨‹ç¬”è®°(1)---TCPä¸ECHOæœåŠ¡å™¨</title>
    <link href="http://blog.fivezha.cn/2020/04/28/socket-program-1/"/>
    <id>http://blog.fivezha.cn/2020/04/28/socket-program-1/</id>
    <published>2020-04-28T12:39:26.000Z</published>
    <updated>2020-07-13T13:23:01.805Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦æ˜¯åœ¨<code>Linux</code>ç¯å¢ƒä¸‹ç¼–å†™<code>socket</code>ç¨‹åºï¼Œæœ¬æ¬¡å®ç°ç®€å•TCP<code>server</code>å’Œ<code>client</code>ä»¥åŠ<code>echo server</code>å’Œ<code>echo client</code><a id="more"></a></p><h2 id="ä»€ä¹ˆæ˜¯Socket"><a href="#ä»€ä¹ˆæ˜¯Socket" class="headerlink" title="ä»€ä¹ˆæ˜¯Socket"></a>ä»€ä¹ˆæ˜¯Socket</h2><p>Socketä¸­æ–‡è¯‘åå¥—æ¥å­—, æ˜¯ä¸€ä¸ªå½“æ—¶æ²¡æœ‰åœ¨è®¡ç½‘ä¸­è®²åˆ°çš„çŸ¥è¯†, ä½†ç¡®å®æ˜¯æå…¶é‡è¦çš„ä¸€ä¸ªçŸ¥è¯†ç‚¹, ä»–æ˜¯åŸºäºTCP/IPåè®®çš„å°è£…æŠ½è±¡å±‚, å®ƒå¯¹äºTCPåè®®è¿›è¡Œäº†å°è£…, ä½¿å¾—å…¶ç°åœ¨å·²ç»æˆä¸ºäº†æœ€ä¸ºé€šç”¨çš„ç½‘ç»œé€šä¿¡æ¥å£/åº”ç”¨ç¨‹åºæ¥å£.<br>å…³äºTCPåè®®å¯ä»¥çœ‹ä¸‹é¢è¿™ç¯‡æ–‡ç« </p><p><a href="https://tools.ietf.org/html/rfc793" target="_blank" rel="noopener">https://tools.ietf.org/html/rfc793</a></p><h2 id="ä¸ºä»€ä¹ˆä¼šæœ‰Socket"><a href="#ä¸ºä»€ä¹ˆä¼šæœ‰Socket" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šæœ‰Socket"></a>ä¸ºä»€ä¹ˆä¼šæœ‰Socket</h2><p>æˆ‘ä»¬çŸ¥é“, æœåŠ¡/æœåŠ¡å™¨å…¶å®æ˜¯æœ‰å¾ˆå¤§å¯èƒ½ä¸å­˜åœ¨äºä¸€ä¸ªè®¡ç®—æœºä¸Šçš„, è¿™å°±æœ‰äº†å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯, åœ¨æœåŠ¡å™¨ä¹‹é—´, ä¹Ÿæ˜¯éœ€è¦å­˜åœ¨è¿æ¥é€šä¿¡çš„, æ‰€ä»¥éœ€è¦æœ‰ä¸€ä¸ªç”¨äºè¿›è¡Œé€šä¿¡çš„é€šç”¨ <strong>å¯ç¼–ç¨‹</strong> æ¥å£, è¿™å°±æ˜¯socket, ä»–å¯¹äº <code>server</code> å’Œ <code>client</code> ä¹‹é—´æ¶èµ·äº†ä¸€é“æ¡¥, è®© <code>server</code> ä¸ <code>port</code> ç»‘å®š, è®© <code>client</code> ä¸ <code>ip:port</code> è¿æ¥, è¿™æ ·å°±ç›¸å½“äº <code>client</code> è¿›ç¨‹ä¸ <code>server</code> è¿›ç¨‹ä¹‹é—´æœ‰äº†åƒæ˜¯ç®¡é“ä¸€æ ·çš„é€šä¿¡, ä¸è¿‡è¿™ä¸ªé€šä¿¡æ˜¯å…¨åŒå·¥çš„.</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://cdn.nlark.com/yuque/0/2020/png/1337142/1588078116060-f05e42c3-f202-4d5b-9710-2db2b576c66d.png#align=left&display=inline&height=571&margin=%5Bobject%20Object%5D&originHeight=571&originWidth=663&size=0&status=done&style=none&width=663" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>æˆ‘ä»¬å›é¡¾TCPçŠ¶æ€è½¬æ¢å›¾</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://cdn.nlark.com/yuque/0/2020/webp/1337142/1588078284676-ab9b2ed5-f0ef-4478-aaa2-9a4c24f8ca26.webp#align=left&display=inline&height=1051&margin=%5Bobject%20Object%5D&originHeight=1051&originWidth=960&size=0&status=done&style=none&width=960" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>åœ¨è¿™é‡Œèƒ½å¤Ÿæ‰¾åˆ°è®¸å¤šsocketå°è£…çš„å½±å­, ä»å®¢æˆ·ç«¯æ¥çœ‹</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://cdn.nlark.com/yuque/0/2020/webp/1337142/1588078349220-34006021-21e7-47be-b4f8-63baed9382b6.webp#align=left&display=inline&height=976&margin=%5Bobject%20Object%5D&originHeight=976&originWidth=875&size=0&status=done&style=none&width=875" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>åˆ™æ›´åŠ æ˜æ˜¾</p><h2 id="å­¦ä¹ Linux-ä¸‹çš„ç½‘ç»œç¼–ç¨‹-socketç¼–ç¨‹"><a href="#å­¦ä¹ Linux-ä¸‹çš„ç½‘ç»œç¼–ç¨‹-socketç¼–ç¨‹" class="headerlink" title="å­¦ä¹ Linux ä¸‹çš„ç½‘ç»œç¼–ç¨‹(socketç¼–ç¨‹)"></a>å­¦ä¹ Linux ä¸‹çš„ç½‘ç»œç¼–ç¨‹(socketç¼–ç¨‹)</h2><h4 id="åˆ›å»ºå¥—æ¥å­—"><a href="#åˆ›å»ºå¥—æ¥å­—" class="headerlink" title="åˆ›å»ºå¥—æ¥å­—"></a>åˆ›å»ºå¥—æ¥å­—</h4><blockquote><p>int socket(int domain, int type, int protocol)<br>return : æ–‡ä»¶æè¿°ç¬¦ / or not -1<br>domain: å¥—æ¥å­—æ‰€ä½¿ç”¨çš„åè®®ç°‡<br>type: å¥—æ¥å­—æ•°æ®ä¼ è¾“ç±»å‹<br>protocol: å¥—æ¥å­—æ‰€ä½¿ç”¨çš„åè®®</p></blockquote><h5 id="æ–‡ä»¶æè¿°ç¬¦-windowsä¸‹ç§°ä¹‹ä¸ºå¥æŸ„"><a href="#æ–‡ä»¶æè¿°ç¬¦-windowsä¸‹ç§°ä¹‹ä¸ºå¥æŸ„" class="headerlink" title="æ–‡ä»¶æè¿°ç¬¦(windowsä¸‹ç§°ä¹‹ä¸ºå¥æŸ„):"></a>æ–‡ä»¶æè¿°ç¬¦(windowsä¸‹ç§°ä¹‹ä¸ºå¥æŸ„):</h5><p>ç³»ç»Ÿåˆ†é…ç»™æ–‡ä»¶æˆ–å¥—æ¥å­—çš„ä¸€ä¸ªæ•´æ•°:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://cdn.nlark.com/yuque/0/2020/png/1337142/1588118202067-721fb73c-2732-4490-9e74-44e63ba46647.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><p><a href="https://segmentfault.com/a/1190000009724931" target="_blank" rel="noopener">https://segmentfault.com/a/1190000009724931</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://cdn.nlark.com/yuque/0/2020/png/1337142/1588118218855-6ed39004-f673-4193-a505-71db6c9a7026.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><h5 id="åè®®ç°‡"><a href="#åè®®ç°‡" class="headerlink" title="åè®®ç°‡:"></a>åè®®ç°‡:</h5><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://cdn.nlark.com/yuque/0/2020/png/1337142/1588118275726-1884c176-d295-411e-8747-8c51acccf60b.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><h5 id="å¥—æ¥å­—ç±»å‹"><a href="#å¥—æ¥å­—ç±»å‹" class="headerlink" title="å¥—æ¥å­—ç±»å‹:"></a>å¥—æ¥å­—ç±»å‹:</h5><ol><li>SOCK_STREAM(æµå¼)(é¢å‘è¿æ¥)<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://cdn.nlark.com/yuque/0/2020/png/1337142/1588118553490-5f00c550-3323-4f3f-a659-99c18b66dff7.png" alt="image.png" title="">                </div>                <div class="image-caption">image.png</div>            </figure></li><li>SOCK_DGRAM(åŒ…å¼)(é¢å‘æ¶ˆæ¯)<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://cdn.nlark.com/yuque/0/2020/png/1337142/1588118710732-9129da97-e3e2-49bd-a781-58c2fe7e0411.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure></li></ol><h5 id="åè®®"><a href="#åè®®" class="headerlink" title="åè®®"></a>åè®®</h5><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://cdn.nlark.com/yuque/0/2020/png/1337142/1588119669498-7a97fde3-258f-47a8-a7df-b62090f44225.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><h4 id="sockaddr-in"><a href="#sockaddr-in" class="headerlink" title="sockaddr_in"></a>sockaddr_in</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://cdn.nlark.com/yuque/0/2020/png/1337142/1588124291436-8a2614f1-7e31-4d77-9fde-66cb601dde05.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://cdn.nlark.com/yuque/0/2020/png/1337142/1588124419227-9e3b102c-99dd-4997-a1a9-078da7a3f9b4.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><h4 id="ç½‘ç»œå­—èŠ‚åº"><a href="#ç½‘ç»œå­—èŠ‚åº" class="headerlink" title="ç½‘ç»œå­—èŠ‚åº"></a>ç½‘ç»œå­—èŠ‚åº</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://cdn.nlark.com/yuque/0/2020/png/1337142/1588134607200-d385c7b4-742b-4d3b-a2c8-0c1d39bf9908.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><p>IntelCPUé»˜è®¤éƒ½æ˜¯å°ç«¯åº, è€Œç½‘ç»œè¿æ¥ç»Ÿä¸€éƒ½æ˜¯å¤§ç«¯åº</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://cdn.nlark.com/yuque/0/2020/png/1337142/1588134657937-d32ccb9f-edae-4abb-8d0c-7add2b93172f.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://cdn.nlark.com/yuque/0/2020/png/1337142/1588134673711-34e815b2-b9fc-4578-9a8c-74887b8b3459.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><h4 id="TCPserver-clien"><a href="#TCPserver-clien" class="headerlink" title="TCPserver/clien"></a>TCPserver/clien</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://cdn.nlark.com/yuque/0/2020/png/1337142/1588134555033-16c67e97-f1d0-4c11-9306-45a335eb7672.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://cdn.nlark.com/yuque/0/2020/png/1337142/1588135167103-c016147f-80ed-40ec-83d1-3723b6d22518.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><p>æ‰€ä»¥åˆå›åˆ°äº†æœ€æœ€ä¸Šé¢çš„ç¬¬ä¸€ä¸ªå›¾:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://cdn.nlark.com/yuque/0/2020/png/1337142/1588135244153-85f9620d-3f95-4c35-9c83-d89022984acc.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><h5 id="accept"><a href="#accept" class="headerlink" title="accept()"></a>accept()</h5><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://cdn.nlark.com/yuque/0/2020/png/1337142/1588138094808-4c630103-94cb-4688-9c1b-7296217a99ca.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><p>sock: åˆ©ç”¨socket()å‡½æ•°å»ºç«‹çš„sock<br>addr: åœ°å€å˜é‡<br>addlen: ç»“æ„ä½“é•¿åº¦</p><h5 id="connect"><a href="#connect" class="headerlink" title="connect()"></a>connect()</h5><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://cdn.nlark.com/yuque/0/2020/png/1337142/1588138363087-01c3e48a-226b-4699-a0d4-649fd7c6a53b.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><h2 id="å®ç°ç®€å•çš„server-client"><a href="#å®ç°ç®€å•çš„server-client" class="headerlink" title="å®ç°ç®€å•çš„server/client"></a>å®ç°ç®€å•çš„server/client</h2><h3 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Created by xmmmmmovo on 2020/4/16.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;arpa/inet.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::to_string;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">error_handler</span><span class="params">(<span class="keyword">char</span> *message)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> serv_sock, clnt_sock;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">serv_addr</span> &#123;</span>&#125;;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">clnt_addr</span> &#123;</span>&#125;;</span><br><span class="line">    <span class="keyword">socklen_t</span> clnt_addr_size;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">string</span> message = <span class="string">"Hello World!"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Usage : %s &lt;port&gt;\n"</span>, argv[<span class="number">0</span>]);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    serv_sock = socket(PF_INET, SOCK_STREAM, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (serv_sock == <span class="number">-1</span>) &#123;</span><br><span class="line">        error_handler(<span class="string">"socket() error"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">memset</span>(&amp;serv_addr, <span class="number">0</span>, <span class="keyword">sizeof</span>(serv_addr));<span class="comment">// åˆå§‹åŒ–å†…å­˜</span></span><br><span class="line"></span><br><span class="line">    serv_addr.sin_family = AF_INET;</span><br><span class="line">    serv_addr.sin_addr.s_addr = htonl(INADDR_ANY);<span class="comment">// å½“å‰ä¸»æœºip</span></span><br><span class="line">    serv_addr.sin_port = htons(atoi(argv[<span class="number">1</span>]));</span><br><span class="line">    <span class="keyword">if</span> (bind(serv_sock, (struct sockaddr *) &amp;serv_addr, <span class="keyword">sizeof</span>(serv_addr)) == <span class="number">-1</span>) &#123;</span><br><span class="line">        error_handler(<span class="string">"bind() error"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (listen(serv_sock, <span class="number">5</span>) == <span class="number">-1</span>) &#123;</span><br><span class="line">        error_handler(<span class="string">"listen() error"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    clnt_addr_size = <span class="keyword">sizeof</span>(clnt_addr);</span><br><span class="line">    clnt_sock = accept(serv_sock, (struct sockaddr *) &amp;clnt_addr, &amp;clnt_addr_size);</span><br><span class="line">    <span class="keyword">if</span> (clnt_sock == <span class="number">-1</span>) &#123;</span><br><span class="line">        error_handler(<span class="string">"accept() error"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">4</span>; ++i) &#123;</span><br><span class="line">        sleep(rand() % <span class="number">2</span>);</span><br><span class="line">        <span class="built_in">string</span> tmp = message + to_string(i);</span><br><span class="line">        write(clnt_sock, tmp.c_str(), tmp.size());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// write(clnt_sock, message.c_str(), message.size());// è¿æ¥ä¹‹åç›´æ¥å‘clientå†™å…¥æ•°æ®</span></span><br><span class="line">    close(clnt_sock);</span><br><span class="line">    close(serv_sock);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">error_handler</span><span class="params">(<span class="keyword">char</span> *message)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">fputs</span>(message, <span class="built_in">stderr</span>);</span><br><span class="line">    fputc(<span class="string">'\n'</span>, <span class="built_in">stderr</span>);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="client"><a href="#client" class="headerlink" title="client"></a>client</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Created by xmmmmmovo on 2020/4/16.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;arpa/inet.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">error_handler</span><span class="params">(<span class="keyword">char</span> *messgae)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sock;</span><br><span class="line">    sockaddr_in serv_addr&#123;&#125;;</span><br><span class="line">    <span class="keyword">int</span> str_len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> idx = <span class="number">0</span>, read_len = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">string</span> message;<span class="comment">// ä¿¡æ¯æµ</span></span><br><span class="line">    message.resize(<span class="number">100</span>, <span class="string">'\0'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Usage : %s &lt;IP&gt; &lt;port&gt;\n"</span>, argv[<span class="number">0</span>]);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    sock = socket(PF_INET, SOCK_STREAM, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (sock == <span class="number">-1</span>) &#123;</span><br><span class="line">        error_handler(<span class="string">"socket() error"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="built_in">memset</span>(&amp;serv_addr, <span class="number">0</span>, <span class="keyword">sizeof</span>(serv_addr));</span><br><span class="line">    serv_addr.sin_family = AF_INET;</span><br><span class="line">    <span class="comment">// è¿™é‡Œä¼šè‡ªåŠ¨å°†ipå­—ç¬¦ä¸²è½¬æ¢ä¸ºuint32_tç±»å‹IPæ•°å­—</span></span><br><span class="line">    serv_addr.sin_addr.s_addr = inet_addr(argv[<span class="number">1</span>]);</span><br><span class="line">    serv_addr.sin_port = htons(atoi(argv[<span class="number">2</span>]));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (connect(sock, (sockaddr *) &amp;serv_addr, <span class="keyword">sizeof</span>(serv_addr)) == <span class="number">-1</span>) &#123;</span><br><span class="line">        error_handler(<span class="string">"connect() error!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">bool</span> check = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¯æ¬¡åªè¯»å‡ºä¸€ä¸ªå­—èŠ‚</span></span><br><span class="line">    <span class="keyword">while</span> (read_len = read(sock, &amp;message[idx++], <span class="number">1</span>)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (str_len == <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (check)</span><br><span class="line">                error_handler(<span class="string">"read() error!"</span>);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                sleep(<span class="number">3</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        str_len += read_len;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Message from server is : %s \n"</span>, message.c_str());</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Function read call count : %d \n"</span>, str_len);</span><br><span class="line">    close(sock);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">error_handler</span><span class="params">(<span class="keyword">char</span> *message)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">fputs</span>(message, <span class="built_in">stderr</span>);</span><br><span class="line">    fputc(<span class="string">'\n'</span>, <span class="built_in">stderr</span>);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h3><p>å¯ä»¥çœ‹åˆ° <code>client</code> æˆåŠŸæ¥å—åˆ°äº†æµå­—ç¬¦:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://cdn.nlark.com/yuque/0/2020/png/1337142/1588164592478-804b3536-f534-4622-bd7c-40a15e7886bf.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><p>åŒæ—¶ <code>server</code> ä¹Ÿå‘é€æˆåŠŸç»“æŸäº†ç¨‹åº:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://cdn.nlark.com/yuque/0/2020/png/1337142/1588164562852-3e156431-c24a-49c8-b4c0-5b0900c4d368.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><h2 id="å®ç°echoæœåŠ¡å™¨"><a href="#å®ç°echoæœåŠ¡å™¨" class="headerlink" title="å®ç°echoæœåŠ¡å™¨"></a>å®ç°echoæœåŠ¡å™¨</h2><h3 id="Server-1"><a href="#Server-1" class="headerlink" title="Server"></a>Server</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Created by xmmmmmovo on 2020/4/16.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;arpa/inet.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::stoi;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::to_string;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">int</span> BUF_SIZE = <span class="number">1024</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">error_handler</span><span class="params">(<span class="keyword">char</span> *message)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> serv_sock, clnt_sock;</span><br><span class="line">    <span class="keyword">char</span> message[BUF_SIZE];</span><br><span class="line">    <span class="keyword">int</span> size_len = <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">char</span> size_buf[size_len];</span><br><span class="line">    sockaddr_in serv_addr&#123;&#125;, clnt_addr&#123;&#125;;</span><br><span class="line">    <span class="keyword">socklen_t</span> clnt_addr_size;</span><br><span class="line">    <span class="keyword">int</span> str_len = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Usage : %s &lt;port&gt;\n"</span>, argv[<span class="number">0</span>]);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    serv_sock = socket(PF_INET, SOCK_STREAM, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (serv_sock == <span class="number">-1</span>) &#123;</span><br><span class="line">        error_handler(<span class="string">"socket() error"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">memset</span>(&amp;serv_addr, <span class="number">0</span>, <span class="keyword">sizeof</span>(serv_addr));<span class="comment">// åˆå§‹åŒ–å†…å­˜</span></span><br><span class="line"></span><br><span class="line">    serv_addr.sin_family = AF_INET;</span><br><span class="line">    serv_addr.sin_addr.s_addr = htonl(INADDR_ANY);<span class="comment">// å½“å‰ä¸»æœºip</span></span><br><span class="line">    serv_addr.sin_port = htons(atoi(argv[<span class="number">1</span>]));</span><br><span class="line">    <span class="keyword">if</span> (bind(serv_sock, (struct sockaddr *) &amp;serv_addr, <span class="keyword">sizeof</span>(serv_addr)) == <span class="number">-1</span>) &#123;</span><br><span class="line">        error_handler(<span class="string">"bind() error"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (listen(serv_sock, <span class="number">5</span>) == <span class="number">-1</span>) &#123;</span><br><span class="line">        error_handler(<span class="string">"listen() error"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    clnt_addr_size = <span class="keyword">sizeof</span>(clnt_addr);<span class="comment">// ç®—é•¿åº¦</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">///ä¸»ä½“</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; ++i) &#123;</span><br><span class="line">        clnt_sock = accept(serv_sock, (sockaddr *) &amp;clnt_addr, &amp;clnt_addr_size);</span><br><span class="line">        <span class="keyword">if</span> (clnt_sock == <span class="number">1</span>) &#123;</span><br><span class="line">            error_handler(<span class="string">"accept() error!"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"Connected client %d \n"</span>, i + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((str_len = read(clnt_sock, size_buf, size_len)) != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> ((str_len = read(clnt_sock, message, stoi(size_buf))) != <span class="number">0</span>) &#123;</span><br><span class="line">                    write(clnt_sock, size_buf, size_len);</span><br><span class="line">                    write(clnt_sock, message, str_len);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        close(clnt_sock);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">///</span></span><br><span class="line"></span><br><span class="line">    close(serv_sock);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">error_handler</span><span class="params">(<span class="keyword">char</span> *message)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">fputs</span>(message, <span class="built_in">stderr</span>);</span><br><span class="line">    fputc(<span class="string">'\n'</span>, <span class="built_in">stderr</span>);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Client"><a href="#Client" class="headerlink" title="Client"></a>Client</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Created by xmmmmmovo on 2020/4/16.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;arpa/inet.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::stoi;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::to_string;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">int</span> BUF_SIZE = <span class="number">1024</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">error_handler</span><span class="params">(<span class="keyword">char</span> *messgae)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sock;</span><br><span class="line">    sockaddr_in serv_addr&#123;&#125;;</span><br><span class="line">    <span class="keyword">int</span> str_len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> message[BUF_SIZE];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Usage : %s &lt;IP&gt; &lt;port&gt;\n"</span>, argv[<span class="number">0</span>]);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    sock = socket(PF_INET, SOCK_STREAM, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (sock == <span class="number">-1</span>) &#123;</span><br><span class="line">        error_handler(<span class="string">"socket() error"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="built_in">memset</span>(&amp;serv_addr, <span class="number">0</span>, <span class="keyword">sizeof</span>(serv_addr));</span><br><span class="line">    serv_addr.sin_family = AF_INET;</span><br><span class="line">    <span class="comment">// è¿™é‡Œä¼šè‡ªåŠ¨å°†ipå­—ç¬¦ä¸²è½¬æ¢ä¸ºuint32_tç±»å‹IPæ•°å­—</span></span><br><span class="line">    serv_addr.sin_addr.s_addr = inet_addr(argv[<span class="number">1</span>]);</span><br><span class="line">    serv_addr.sin_port = htons(atoi(argv[<span class="number">2</span>]));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (connect(sock, (sockaddr *) &amp;serv_addr, <span class="keyword">sizeof</span>(serv_addr)) == <span class="number">-1</span>) &#123;</span><br><span class="line">        error_handler(<span class="string">"connect() error!"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">"Connected......"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">"Input message(Q/q to quit): "</span>, <span class="built_in">stdout</span>);</span><br><span class="line">        <span class="built_in">std</span>::fgets(message, BUF_SIZE, <span class="built_in">stdin</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">strcmp</span>(message, <span class="string">"q\n"</span>) || !<span class="built_in">strcmp</span>(message, <span class="string">"Q\n"</span>)) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> l = <span class="built_in">strlen</span>(message);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"len = %d\n"</span>, l);</span><br><span class="line">        <span class="built_in">string</span> s = to_string(l);</span><br><span class="line">        s.resize(<span class="number">4</span>);</span><br><span class="line">        write(sock, s.c_str(), <span class="number">4</span>);</span><br><span class="line">        write(sock, message, <span class="built_in">strlen</span>(message));</span><br><span class="line">        <span class="keyword">char</span> buf[<span class="number">4</span>];</span><br><span class="line">        str_len = read(sock, buf, <span class="number">4</span>);</span><br><span class="line">        str_len = read(sock, message, stoi(buf));</span><br><span class="line">        message[str_len] = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Message from server: %s\n"</span>, message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    close(sock);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">error_handler</span><span class="params">(<span class="keyword">char</span> *message)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">fputs</span>(message, <span class="built_in">stderr</span>);</span><br><span class="line">    fputc(<span class="string">'\n'</span>, <span class="built_in">stderr</span>);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»“æœ-1"><a href="#ç»“æœ-1" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h3><p>client:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://cdn.nlark.com/yuque/0/2020/png/1337142/1588164525052-62e2c390-1840-462d-aee2-2a8c4c7efb34.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><p>server:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://cdn.nlark.com/yuque/0/2020/png/1337142/1588164514314-182083c4-11ca-49cd-aad0-39b7c1c1a2cc.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ä¸»è¦æ˜¯åœ¨&lt;code&gt;Linux&lt;/code&gt;ç¯å¢ƒä¸‹ç¼–å†™&lt;code&gt;socket&lt;/code&gt;ç¨‹åºï¼Œæœ¬æ¬¡å®ç°ç®€å•TCP&lt;code&gt;server&lt;/code&gt;å’Œ&lt;code&gt;client&lt;/code&gt;ä»¥åŠ&lt;code&gt;echo server&lt;/code&gt;å’Œ&lt;code&gt;echo client&lt;/code&gt;
    
    </summary>
    
    
      <category term="assignment" scheme="http://blog.fivezha.cn/categories/assignment/"/>
    
    
      <category term="c++" scheme="http://blog.fivezha.cn/tags/c/"/>
    
      <category term="socket" scheme="http://blog.fivezha.cn/tags/socket/"/>
    
  </entry>
  
  <entry>
    <title>dockerç¬”è®°</title>
    <link href="http://blog.fivezha.cn/2020/04/24/docker-note/"/>
    <id>http://blog.fivezha.cn/2020/04/24/docker-note/</id>
    <published>2020-04-24T13:31:13.000Z</published>
    <updated>2020-07-14T10:25:38.142Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€ç‚¹ç‚¹dockerç¬”è®°<a id="more"></a></p><h2 id="å®‰è£…docker"><a href="#å®‰è£…docker" class="headerlink" title="å®‰è£…docker"></a>å®‰è£…docker</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun</span><br><span class="line"></span><br><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-'EOF'</span><br><span class="line">&#123;</span><br><span class="line">    "registry-mirrors": [</span><br><span class="line">      "https://hub-mirror.c.163.com",</span><br><span class="line">      "https://mirror.baidubce.com",</span><br><span class="line">      "https://dockerhub.azk8s.cn"</span><br><span class="line">    ],</span><br><span class="line">  "insecure-registries" : [</span><br><span class="line">    "hub-mirror.c.163.com",</span><br><span class="line">    "mirror.baidubce.com",</span><br><span class="line">    "dockerhub.azk8s.cn"</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…docker-compose"><a href="#å®‰è£…docker-compose" class="headerlink" title="å®‰è£…docker-compose"></a>å®‰è£…docker-compose</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo curl -L https://github.com/docker/compose/releases/download/1.24.1/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose</span><br><span class="line">sudo chmod +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure><h2 id="åˆ©ç”¨Dockerfileå®šåˆ¶é•œåƒ"><a href="#åˆ©ç”¨Dockerfileå®šåˆ¶é•œåƒ" class="headerlink" title="åˆ©ç”¨Dockerfileå®šåˆ¶é•œåƒ"></a>åˆ©ç”¨Dockerfileå®šåˆ¶é•œåƒ</h2><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># flaskéƒ¨ç½²</span></span><br><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.7</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> . /code</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /code</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash">  ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; pip install -r /code/requirements.txt</span></span><br><span class="line"><span class="comment"># å¦‚æœå¤ªæ…¢äº†å†åŠ ä¸Šè¿™å¥ ä¸ç„¶é•œåƒç«™æœ‰å¯èƒ½åŒæ­¥ä¸å…¨å¯¼è‡´åŒ…å®‰è£…å¤±è´¥</span></span><br><span class="line"><span class="comment"># -i https://pypi.tuna.tsinghua.edu.cn/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> gunicorn app:app -c gunicorn.conf.py --error-logfile /<span class="built_in">log</span>/gunicorn.log</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker build -t 'name' .</span><br><span class="line">docker run -it 'name'</span><br><span class="line">docker run -d 'name'</span><br></pre></td></tr></table></figure><table><thead><tr><th>COPY</th><th>å¤åˆ¶æ–‡ä»¶</th></tr></thead><tbody><tr><td>CMD</td><td>å®¹å™¨å¯åŠ¨å‘½ä»¤</td></tr><tr><td>ENV</td><td>è®¾ç½®ç¯å¢ƒå˜é‡</td></tr><tr><td>WORKDIR</td><td>æŒ‡å®šå·¥ä½œç›®å½•</td></tr></tbody></table><h2 id="å¸¸ç”¨æŒ‡ä»¤"><a href="#å¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="å¸¸ç”¨æŒ‡ä»¤"></a>å¸¸ç”¨æŒ‡ä»¤</h2><ul><li>docker image/container ls <strong>åˆ—å‡ºæ‰€æœ‰é•œåƒ/å®¹å™¨</strong> </li><li>docker rm â€¦ <strong>åˆ é™¤é•œåƒ</strong> </li><li>docker attach â€¦ è¿›å…¥å®¹å™¨</li><li>docker ps -a <strong>åˆ—å‡ºæ‰€æœ‰çš„containeråŒ…æ‹¬æ²¡æœ‰è¿è¡Œçš„</strong> </li></ul><h2 id="docker-compose"><a href="#docker-compose" class="headerlink" title="docker-compose"></a>docker-compose</h2><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># flask redis nginx mysqléƒ¨ç½²</span></span><br><span class="line">version: <span class="string">'3.6'</span></span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  web:</span><br><span class="line">    build: .</span><br><span class="line">    container_name: web</span><br><span class="line">    volumes:</span><br><span class="line">      - ../logs:/log</span><br><span class="line">    depends_on:</span><br><span class="line">      - db</span><br><span class="line">      - redis</span><br><span class="line">  db:</span><br><span class="line">    image: mysql:<span class="number">5.7</span></span><br><span class="line">    environment:</span><br><span class="line">      - MYSQL_ROOT_PASSWORD=mx/<span class="number">58</span>MFuLJ6^%.q</span><br><span class="line">    volumes:</span><br><span class="line">      - ./config/mysql:/docker-<span class="keyword">entrypoint</span><span class="bash">-initdb.d</span></span><br><span class="line">  nginx:</span><br><span class="line">    image: nginx:<span class="number">1.17</span></span><br><span class="line">    volumes:</span><br><span class="line">      - ./config/nginx/default.conf:/etc/nginx/conf.d/default.conf</span><br><span class="line">    depends_on:</span><br><span class="line">      - web</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="number">8888</span>:<span class="number">80</span></span><br><span class="line">  redis:</span><br><span class="line">    image: redis:<span class="number">5.0</span>.<span class="number">8</span></span><br><span class="line">    volumes:</span><br><span class="line">    - ./config/redis/redis.conf:/etc/redis/redis.conf</span><br><span class="line">    command: redis-server</span><br><span class="line">    privileged: true</span><br></pre></td></tr></table></figure><ul><li>build <strong>åˆ©ç”¨Dockerfileç¼–è¯‘çš„ç›®å½•</strong></li><li>image <strong>é•œåƒ</strong> </li><li>volumes <strong>ç›®å½•æ˜ å°„å…³ç³»</strong> </li><li>depend_on <strong>ä¾èµ–äº å½“ä¾èµ–å¯åŠ¨åæœ¬serviceæ‰èƒ½å¯åŠ¨</strong> </li><li>port <strong>å¼€æ”¾çš„ç«¯å£æ˜ å°„</strong> </li><li>environment <strong>ç¯å¢ƒå˜é‡</strong> </li><li>privileged <strong>æƒé™</strong> </li><li>command <strong>è‡ªå¸¦å‘½ä»¤è¡Œ</strong> </li></ul><h2 id="å¸¸ç”¨æŒ‡ä»¤-1"><a href="#å¸¸ç”¨æŒ‡ä»¤-1" class="headerlink" title="å¸¸ç”¨æŒ‡ä»¤"></a>å¸¸ç”¨æŒ‡ä»¤</h2><ul><li>docker-compose start</li><li>docker-compose stop</li><li>docker-compose top</li></ul><h2 id="å¥‡æŠ€æ·«å·§"><a href="#å¥‡æŠ€æ·«å·§" class="headerlink" title="å¥‡æŠ€æ·«å·§"></a>å¥‡æŠ€æ·«å·§</h2><h3 id="åˆ—å‡ºæ‰€æœ‰çš„å®¹å™¨-ID"><a href="#åˆ—å‡ºæ‰€æœ‰çš„å®¹å™¨-ID" class="headerlink" title="åˆ—å‡ºæ‰€æœ‰çš„å®¹å™¨ ID"></a>åˆ—å‡ºæ‰€æœ‰çš„å®¹å™¨ ID</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -aq</span><br></pre></td></tr></table></figure><h3 id="åœæ­¢æ‰€æœ‰çš„å®¹å™¨"><a href="#åœæ­¢æ‰€æœ‰çš„å®¹å™¨" class="headerlink" title="åœæ­¢æ‰€æœ‰çš„å®¹å™¨"></a>åœæ­¢æ‰€æœ‰çš„å®¹å™¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop $(docker ps -aq)</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤æ‰€æœ‰çš„å®¹å™¨"><a href="#åˆ é™¤æ‰€æœ‰çš„å®¹å™¨" class="headerlink" title="åˆ é™¤æ‰€æœ‰çš„å®¹å™¨"></a>åˆ é™¤æ‰€æœ‰çš„å®¹å™¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm $(docker ps -aq)</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤æ‰€æœ‰çš„é•œåƒ"><a href="#åˆ é™¤æ‰€æœ‰çš„é•œåƒ" class="headerlink" title="åˆ é™¤æ‰€æœ‰çš„é•œåƒ"></a>åˆ é™¤æ‰€æœ‰çš„é•œåƒ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi $(docker images -q)</span><br></pre></td></tr></table></figure><h3 id="docker1-3ä¹‹åçš„èµ„æºæ¸…ç†"><a href="#docker1-3ä¹‹åçš„èµ„æºæ¸…ç†" class="headerlink" title="docker1.3ä¹‹åçš„èµ„æºæ¸…ç†"></a>docker1.3ä¹‹åçš„èµ„æºæ¸…ç†</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker image prune --force --all # åˆ é™¤æ‰€æœ‰ä¸ä½¿ç”¨çš„é•œåƒ</span><br><span class="line">docker container prune -f # åˆ é™¤æ‰€æœ‰åœæ­¢çš„å®¹å™¨</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸€ç‚¹ç‚¹dockerç¬”è®°
    
    </summary>
    
    
      <category term="docker" scheme="http://blog.fivezha.cn/categories/docker/"/>
    
    
      <category term="docker" scheme="http://blog.fivezha.cn/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>é¡µé¢ç½®æ¢ç®—æ³•ä¹‹LRUç®—æ³•(C++å®ç°)</title>
    <link href="http://blog.fivezha.cn/2019/12/10/page-LRU/"/>
    <id>http://blog.fivezha.cn/2019/12/10/page-LRU/</id>
    <published>2019-12-10T01:55:45.000Z</published>
    <updated>2020-07-14T10:26:21.143Z</updated>
    
    <content type="html"><![CDATA[<p>å› ä¸ºæ“ä½œç³»ç»Ÿå®éªŒè¦å†™ æ‰€ä»¥å†™äº†</p><a id="more"></a><h2 id=""><a href="#" class="headerlink" title="?"></a>?</h2><p><strong>LRU(Least Recently Used)</strong>ç½®æ¢ç®—æ³•çš„æè¿°</p><p>é€‰æ‹©<strong>æœ€åä¸€æ¬¡è®¿é—®æ—¶é—´è·ç¦»å½“å‰æ—¶é—´æœ€é•¿**</strong>çš„ä¸€é¡µå¹¶æ·˜æ±°ä¹‹ã€‚</p><p>å³æ·˜æ±°æ²¡æœ‰ä½¿ç”¨çš„æ—¶é—´æœ€é•¿çš„é¡µã€‚å®ç°ä»£ä»·å¾ˆé«˜(æ—¶é—´æˆ³æˆ–ç¡¬ä»¶æ–¹æ³•)</p><h2 id="-1"><a href="#-1" class="headerlink" title="!"></a>!</h2><p>è¯¦è§: <a href="https://github.com/xmmmmmovo/ZhaOS/blob/master/OperatorSystem/exp5/LRUMain.cpp" target="_blank" rel="noopener">GIthub</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/12/10/Q0XctI.png" alt="Q0XctI.png" title="">                </div>                <div class="image-caption">Q0XctI.png</div>            </figure><p>ä¸‹é¢æ˜¯æµ‹è¯•æ•°æ®, æ ¹æ®çš„æ˜¯ä¸Šè¯¾çš„ppt:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/12/10/Q0jAgK.jpg" alt="Q0jAgK.jpg" title="">                </div>                <div class="image-caption">Q0jAgK.jpg</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/12/10/Q0Xr0H.png" alt="Q0Xr0H.png" title="">                </div>                <div class="image-caption">Q0Xr0H.png</div>            </figure><p>å¯ä»¥çœ‹åˆ°, 9æ¬¡é¡µé¢ç½®æ¢è·Ÿç¼ºé¡µç‡éƒ½æ˜¯æ­£ç¡®çš„</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å› ä¸ºæ“ä½œç³»ç»Ÿå®éªŒè¦å†™ æ‰€ä»¥å†™äº†&lt;/p&gt;
    
    </summary>
    
    
      <category term="assignment" scheme="http://blog.fivezha.cn/categories/assignment/"/>
    
    
      <category term="c++" scheme="http://blog.fivezha.cn/tags/c/"/>
    
      <category term="os" scheme="http://blog.fivezha.cn/tags/os/"/>
    
  </entry>
  
  <entry>
    <title>é¡µé¢ç½®æ¢ç®—æ³•ä¹‹FIFOç®—æ³•(C++å®ç°)</title>
    <link href="http://blog.fivezha.cn/2019/12/09/page-fifo/"/>
    <id>http://blog.fivezha.cn/2019/12/09/page-fifo/</id>
    <published>2019-12-09T14:09:16.000Z</published>
    <updated>2020-07-14T10:26:25.390Z</updated>
    
    <content type="html"><![CDATA[<p>å› ä¸ºæ“ä½œç³»ç»Ÿå®éªŒè¦å†™ æ‰€ä»¥å†™äº†</p><a id="more"></a><h2 id=""><a href="#" class="headerlink" title="?"></a>?</h2><p><strong>å…ˆè¿›å…ˆå‡º(FIFO)</strong>é¡µé¢ç½®æ¢ç®—æ³•</p><p>é€‰æ‹©åœ¨å†…å­˜ä¸­<strong>é©»ç•™æ—¶é—´æœ€é•¿</strong>çš„é¡µå¹¶æ·˜æ±°ä¹‹</p><h2 id="-1"><a href="#-1" class="headerlink" title="!"></a>!</h2><p>è¯¦è§: <a href="https://github.com/xmmmmmovo/ZhaOS/blob/master/OperatorSystem/exp5/PageFIFOMain.cpp" target="_blank" rel="noopener">GIthub</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/12/09/Q0tuB6.png" alt="Q0tuB6.png" title="">                </div>                <div class="image-caption">Q0tuB6.png</div>            </figure><p>ä¸‹é¢æ˜¯æµ‹è¯•æ•°æ®, æ ¹æ®çš„æ˜¯ä¸Šè¯¾çš„ppt:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/12/09/Q0Yv1s.jpg" alt="testdata.jpg" title="">                </div>                <div class="image-caption">testdata.jpg</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/12/09/Q0tKHK.png" alt="Q0tKHK.png" title="">                </div>                <div class="image-caption">Q0tKHK.png</div>            </figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å› ä¸ºæ“ä½œç³»ç»Ÿå®éªŒè¦å†™ æ‰€ä»¥å†™äº†&lt;/p&gt;
    
    </summary>
    
    
      <category term="assignment" scheme="http://blog.fivezha.cn/categories/assignment/"/>
    
    
      <category term="c++" scheme="http://blog.fivezha.cn/tags/c/"/>
    
      <category term="os" scheme="http://blog.fivezha.cn/tags/os/"/>
    
  </entry>
  
  <entry>
    <title>é“¶è¡Œå®¶ç®—æ³•çš„C++å®ç°</title>
    <link href="http://blog.fivezha.cn/2019/12/05/bank-algorithm/"/>
    <id>http://blog.fivezha.cn/2019/12/05/bank-algorithm/</id>
    <published>2019-12-05T12:12:48.000Z</published>
    <updated>2020-07-14T10:26:18.342Z</updated>
    
    <content type="html"><![CDATA[<p>å› ä¸ºæ“ä½œç³»ç»Ÿå®éªŒè¦å†™ æ‰€ä»¥å†™äº†</p><a id="more"></a><h3 id="é“¶è¡Œå®¶ç®—æ³•æ˜¯ä¸€ç§é¿å…æ­»é”çš„æ–¹æ³•"><a href="#é“¶è¡Œå®¶ç®—æ³•æ˜¯ä¸€ç§é¿å…æ­»é”çš„æ–¹æ³•" class="headerlink" title="é“¶è¡Œå®¶ç®—æ³•æ˜¯ä¸€ç§é¿å…æ­»é”çš„æ–¹æ³•"></a>é“¶è¡Œå®¶ç®—æ³•æ˜¯ä¸€ç§é¿å…æ­»é”çš„æ–¹æ³•</h3><p>åœ¨é¿å…æ­»é”çš„æ–¹æ³•ä¸­ï¼Œå…è®¸è¿›ç¨‹åŠ¨æ€åœ°ç”³è¯·èµ„æºï¼Œä½†ç³»ç»Ÿåœ¨è¿›è¡Œèµ„æºåˆ†é…ä¹‹å‰ï¼Œåº”å…ˆè®¡ç®—æ­¤æ¬¡èµ„æºåˆ†é…çš„å®‰å…¨æ€§ã€‚è‹¥æ­¤æ¬¡åˆ†é…ä¸ä¼šå¯¼è‡´ç³»ç»Ÿè¿›å…¥ä¸å®‰å…¨çŠ¶æ€ï¼Œåˆ™å°†èµ„æºåˆ†é…ç»™è¿›ç¨‹ï¼›å¦åˆ™ï¼Œä»¤è¿›ç¨‹ç­‰å¾…ã€‚<br>è™½ç„¶å¹¶éæ‰€æœ‰çš„ä¸å®‰å…¨çŠ¶æ€éƒ½å¿…ç„¶ä¼šè½¬ä¸ºæ­»é”çŠ¶æ€ï¼Œä½†å½“ç³»ç»Ÿè¿›å…¥ä¸å®‰å…¨çŠ¶æ€åï¼Œä¾¿æœ‰å¯èƒ½è¿›è€Œè¿›å…¥æ­»é”çŠ¶æ€ï¼›åä¹‹ï¼Œåªè¦ç³»ç»Ÿå¤„äºå®‰å…¨çŠ¶æ€ï¼Œç³»ç»Ÿä¾¿å¯é¿å…è¿›å…¥æ­»é”çŠ¶æ€ã€‚<br>å› æ­¤ï¼Œé¿å…æ­»é”çš„å®è´¨åœ¨äºï¼šç³»ç»Ÿåœ¨è¿›è¡Œèµ„æºåˆ†é…æ—¶ï¼Œå¦‚ä½•ä½¿ç³»ç»Ÿä¸è¿›å…¥ä¸å®‰å…¨çŠ¶æ€ã€‚</p><h3 id="é“¶è¡Œå®¶ç®—æ³•æ€æƒ³å¾ˆç®€å•"><a href="#é“¶è¡Œå®¶ç®—æ³•æ€æƒ³å¾ˆç®€å•" class="headerlink" title="é“¶è¡Œå®¶ç®—æ³•æ€æƒ³å¾ˆç®€å•"></a>é“¶è¡Œå®¶ç®—æ³•æ€æƒ³å¾ˆç®€å•</h3><p>è¿™ä¸ªç®—æ³•ä¸­,  ä¸»è¦æ˜¯ç»´æŠ¤å…¶ä¸­çš„</p><blockquote><p><code>available</code>å‘é‡</p><p><code>max</code>çŸ©é˜µ</p><p><code>allocation</code>çŸ©é˜µ</p></blockquote><p>æ¯ä¸€æ¬¡åˆ†é…, éƒ½ä¼šè½®è¯¢ä¸€éå¯åˆ†é…çŸ©é˜µ, å¯»æ±‚å¯ä»¥åˆ†é…çš„process,  å¦‚æœæ²¡æœ‰å¯ä»¥åˆ†é…çš„process, åˆ™è·³å‡ºå¾ªç¯è¿›è¡Œæ˜¯å¦è¿›å…¥æ­»é”çš„åˆ¤æ–­.</p><p>å…·ä½“<a href="https://zh.wikipedia.org/wiki/%E9%93%B6%E8%A1%8C%E5%AE%B6%E7%AE%97%E6%B3%95" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘</a>è®²çš„å…¶å®æ¯”æˆ‘å¥½</p><h3 id="é“¶è¡Œå®¶ç®—æ³•ä»£ç å¥½å†™"><a href="#é“¶è¡Œå®¶ç®—æ³•ä»£ç å¥½å†™" class="headerlink" title="é“¶è¡Œå®¶ç®—æ³•ä»£ç å¥½å†™"></a>é“¶è¡Œå®¶ç®—æ³•ä»£ç å¥½å†™</h3><p>ä¸‹é¢ä¸¤å¼ å›¾ä¸€å¼ æ˜¯æºç  ä¸€å¼ æ˜¯ç»“æœ</p><p>å…¶ä¸­æ•°æ®æ¥æºäºæ–‡ä»¶ å¯ä»¥æ–¹ä¾¿è‡ªå®šä¹‰</p><p>å…·ä½“å¯ä»¥è§æˆ‘çš„<a href="https://github.com/xmmmmmovo/ZhaOS/blob/master/OperatorSystem/exp4/BankAlgorithmMain.cpp" target="_blank" rel="noopener">GitHubä»“åº“</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/12/05/QGeZM8.png" alt="ä»£ç å†…å®¹" title="">                </div>                <div class="image-caption">ä»£ç å†…å®¹</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/12/05/QGeExf.png" alt="å†…å®¹" title="">                </div>                <div class="image-caption">å†…å®¹</div>            </figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å› ä¸ºæ“ä½œç³»ç»Ÿå®éªŒè¦å†™ æ‰€ä»¥å†™äº†&lt;/p&gt;
    
    </summary>
    
    
      <category term="assignment" scheme="http://blog.fivezha.cn/categories/assignment/"/>
    
    
      <category term="c++" scheme="http://blog.fivezha.cn/tags/c/"/>
    
      <category term="os" scheme="http://blog.fivezha.cn/tags/os/"/>
    
  </entry>
  
  <entry>
    <title>playframeworkåˆæ¶‰-2.é…ç½®MySQLå¹¶æµ‹è¯•</title>
    <link href="http://blog.fivezha.cn/2019/10/11/play-study-s/"/>
    <id>http://blog.fivezha.cn/2019/10/11/play-study-s/</id>
    <published>2019-10-10T16:14:27.000Z</published>
    <updated>2020-07-13T12:43:10.385Z</updated>
    
    <content type="html"><![CDATA[<p>æ‚²ä¼¤çš„play framework + MySQLé…ç½®è¿‡ç¨‹</p><a id="more"></a><h3 id="å› ä¸ºplayframeworkç‰ˆæœ¬å¤ªä½å¸è½½mysql8"><a href="#å› ä¸ºplayframeworkç‰ˆæœ¬å¤ªä½å¸è½½mysql8" class="headerlink" title="å› ä¸ºplayframeworkç‰ˆæœ¬å¤ªä½å¸è½½mysql8"></a>å› ä¸ºplayframeworkç‰ˆæœ¬å¤ªä½å¸è½½mysql8</h3><p>é¦–å…ˆæœ‰ä¸€ä»¶å¾ˆæ‚²ä¼¤çš„æ¶ˆæ¯ï¼Œä¸‹é¢è¿™ä¸ªç‰ˆæœ¬</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/mysql8.jpg" alt="mysql8" title="">                </div>                <div class="image-caption">mysql8</div>            </figure><p>ï¼Œå› ä¸ºplayç‰ˆæœ¬è¿‡ä½ï¼Œæ— æ³•å®Œå…¨å…¼å®¹ï¼Œéœ€è¦é™çº§åˆ°mysql5çš„ç‰ˆæœ¬ï¼Œå¦‚æœå·²ç»å®‰è£…ï¼Œé‚£ä¹ˆå¯ä»¥ä»¥<strong>ç®¡ç†å‘˜å¯åŠ¨</strong>å‘½ä»¤è¡Œ</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/cmdmaster.jpg" alt="cmd" title="">                </div>                <div class="image-caption">cmd</div>            </figure><p><strong>ç„¶åå…ˆè¾“å…¥(å‰ææ˜¯å·²ç»é…ç½®è¿‡mysqlåˆ°ç¯å¢ƒå˜é‡ å¦åˆ™è¯·åˆ°mysqlæ–‡ä»¶å¤¹ä¸­å†æ‰§è¡Œ)</strong></p><p><strong><code>net stop mysql</code></strong></p><p><strong><code>mysqld --remove</code></strong></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/realremove.jpg" alt="real remove" title="">                </div>                <div class="image-caption">real remove</div>            </figure><p> ä¹‹åæ•´ä¸ªåˆ é™¤æ•´ä¸ª<code>mysql-8.0.12-winx64</code>ç‰ˆæœ¬</p><h3 id="ç„¶åå®‰è£…MySQL5-7ç‰ˆæœ¬-åœ°ä¸‹ç¾¤ç¾¤æ–‡ä»¶é‡Œæœ‰"><a href="#ç„¶åå®‰è£…MySQL5-7ç‰ˆæœ¬-åœ°ä¸‹ç¾¤ç¾¤æ–‡ä»¶é‡Œæœ‰" class="headerlink" title="ç„¶åå®‰è£…MySQL5.7ç‰ˆæœ¬(åœ°ä¸‹ç¾¤ç¾¤æ–‡ä»¶é‡Œæœ‰)"></a>ç„¶åå®‰è£…MySQL5.7ç‰ˆæœ¬(åœ°ä¸‹ç¾¤ç¾¤æ–‡ä»¶é‡Œæœ‰)</h3><p><strong>åŸºæœ¬æ˜¯ä¸€è·¯nextå°±å¯ä»¥äº†</strong></p><p><a href="https://blog.csdn.net/s_x123456/article/details/86754486?tdsourcetag=s_pctim_aiomsg" target="_blank" rel="noopener"><strong>è¿™é‡Œä¹Ÿç»™ä¸ªå®‰è£…çš„æ•™ç¨‹</strong></a></p><p>ä¸‹é¢å‡ é¡¹æ³¨æ„ä¸‹</p><p>è¿™é‡Œé€‰customå®‰è£…</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/complete.jpg" alt="complete" title="">                </div>                <div class="image-caption">complete</div>            </figure><p>è¿™é‡Œé€‰æ·»åŠ åˆ°ç¯å¢ƒå˜é‡</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/main.jpg" alt="main" title="">                </div>                <div class="image-caption">main</div>            </figure><p>è®¾å®šç™»å½•å¯†ç </p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/login.jpg" alt="login" title="">                </div>                <div class="image-caption">login</div>            </figure><p>è¿™é‡ŒåŠ¡å¿…é€‰æ‹©utf8ç¼–ç </p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/utf8.jpg" alt="utf-8" title="">                </div>                <div class="image-caption">utf-8</div>            </figure><p>å¤§æ¦‚å°±æ˜¯è¿™äº›ï¼Œæœ€åä¸€è·¯nextåˆ°åº•å°±è¡Œäº†ï¼Œç»è¿‡æ¼«é•¿çš„ç­‰å¾…ï¼Œå¯èƒ½ä¼šè®©ä½ é‡å¯ï¼Œé‡å¯å°±å¯ä»¥äº†</p><p><strong>æ³¨ï¼šå¦‚æœæ— å“åº”ï¼Œé‚£å°±ç›´æ¥å…³äº†ç„¶åå†æ‰“å¼€å®‰è£…æ–‡ä»¶ï¼Œé€‰æ‹©repairé€‰é¡¹ï¼Œå®Œæˆä¹‹åé‡å¯</strong></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/repair.jpg" alt="repair" title="">                </div>                <div class="image-caption">repair</div>            </figure><p>é‡å¯ä¹‹åå†ä»¥<strong>ç®¡ç†å‘˜æ‰“å¼€</strong>å‘½ä»¤æç¤ºè¡Œï¼Œæ‰§è¡Œä¸‹é¢ä¸¤è¡Œè¯­å¥</p><p><code>mysqld -install</code></p><p><code>net start mysql</code></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/start.jpg" alt="start" title="">                </div>                <div class="image-caption">start</div>            </figure><p>æ­¤æ—¶ï¼Œä¾¿å¯ä»¥è¾“å…¥<code>mysql -u root</code>è¿›å…¥æ•°æ®åº“äº†</p><p>ä¸è¿‡è¿™ä¸ªå¼€å§‹æ—¶æ²¡æœ‰å¯†ç çš„ï¼Œä½ éœ€è¦è¾“å…¥ä»¥ä¸‹ä¸¤è¡Œæ›´æ–°å¯†ç </p><p><strong><code>set password for &#39;root&#39;@&#39;localhost&#39;=password(&#39;123456&#39;);</code>æ³¨ï¼špassword()é‡Œé¢çš„å°±æ˜¯ä½ è®¾å®šçš„å¯†ç </strong></p><p><strong><code>flush privileges;</code>è¿™ä¸€æ­¥æ˜¯æ›´æ–°æƒé™</strong></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/password.jpg" alt="change password" title="">                </div>                <div class="image-caption">change password</div>            </figure><p>å¥½äº† è¿™æ ·ä½ çš„æ•°æ®åº“ä¾¿é…ç½®å®Œæˆäº†</p><p>ç„¶åæ–°å»ºä¸€ä¸ªdatabase(mysqlé‡Œçš„databaseç­‰åŒäºäºscheme)</p><p><strong><code>create database test;</code>(testæ˜¯ä½ æ–°å»ºæ•°æ®åº“çš„åå­— éšä¾¿å†™)</strong></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/database.jpg" alt="database" title="">                </div>                <div class="image-caption">database</div>            </figure><p>æ­¤æ—¶å›åˆ°playä½ æ–°å»ºçš„appä¸­åœ¨application.confä¸­è®¾ç½®mysql</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/setting.jpg" alt="setting" title="">                </div>                <div class="image-caption">setting</div>            </figure><p>å¦‚æœä½ è·Ÿæˆ‘åšçš„ä¸€æ ·ï¼Œé‚£ä¹ˆåº”è¯¥æ˜¯ä¸‹é¢è¿™æ ·:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/setting2.jpg" alt="setting2" title="">                </div>                <div class="image-caption">setting2</div>            </figure><p>éšåç¼–å†™æµ‹è¯•ç¨‹åº</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/user.jpg" alt="user" title="">                </div>                <div class="image-caption">user</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/test.jpg" alt="test" title="">                </div>                <div class="image-caption">test</div>            </figure><p>è¿è¡Œappï¼Œè®¿é—®ç½‘å€åï¼Œçœ‹åˆ°æœ‰æ­£å¸¸è¾“å‡º</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/succ.jpg" alt="success" title="">                </div>                <div class="image-caption">success</div>            </figure><p>ä¸”æ•°æ®åº“ä¸­æœ‰ä¸œè¥¿</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/sqlin.jpg" alt="sql" title="">                </div>                <div class="image-caption">sql</div>            </figure><p>é‚£ä¹ˆåˆ™è¯´æ˜é…ç½®æˆåŠŸäº†ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ‚²ä¼¤çš„play framework + MySQLé…ç½®è¿‡ç¨‹&lt;/p&gt;
    
    </summary>
    
    
      <category term="assignment" scheme="http://blog.fivezha.cn/categories/assignment/"/>
    
    
      <category term="play" scheme="http://blog.fivezha.cn/tags/play/"/>
    
      <category term="java" scheme="http://blog.fivezha.cn/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>æ°´é¢˜äº”é“</title>
    <link href="http://blog.fivezha.cn/2019/09/12/lab-summer-question/"/>
    <id>http://blog.fivezha.cn/2019/09/12/lab-summer-question/</id>
    <published>2019-09-12T12:10:14.000Z</published>
    <updated>2020-07-11T13:43:15.075Z</updated>
    
    <content type="html"><![CDATA[<p>å®éªŒå®¤æš‘å‡è€ƒæ ¸é¢˜ç›®</p><p>éšä¾¿å†™å†™è§£é¢˜æ€è·¯æ¥ç€</p><a id="more"></a><h3 id="824-å±±ç¾Šæ‹‰ä¸æ–‡"><a href="#824-å±±ç¾Šæ‹‰ä¸æ–‡" class="headerlink" title="824.å±±ç¾Šæ‹‰ä¸æ–‡"></a>824.å±±ç¾Šæ‹‰ä¸æ–‡</h3><blockquote><p>ç»™å®šä¸€ä¸ªç”±ç©ºæ ¼åˆ†å‰²å•è¯çš„å¥å­ Sã€‚æ¯ä¸ªå•è¯åªåŒ…å«å¤§å†™æˆ–å°å†™å­—æ¯ã€‚</p><p>æˆ‘ä»¬è¦å°†å¥å­è½¬æ¢ä¸º â€œGoat Latinâ€ï¼ˆä¸€ç§ç±»ä¼¼äº çŒªæ‹‰ä¸æ–‡ - Pig Latin çš„è™šæ„è¯­è¨€ï¼‰ã€‚</p><p>å±±ç¾Šæ‹‰ä¸æ–‡çš„è§„åˆ™å¦‚ä¸‹ï¼š</p><p>å¦‚æœå•è¯ä»¥å…ƒéŸ³å¼€å¤´ï¼ˆa, e, i, o, uï¼‰ï¼Œåœ¨å•è¯åæ·»åŠ â€maâ€ã€‚<br>ä¾‹å¦‚ï¼Œå•è¯â€appleâ€å˜ä¸ºâ€applemaâ€ã€‚</p><p>å¦‚æœå•è¯ä»¥è¾…éŸ³å­—æ¯å¼€å¤´ï¼ˆå³éå…ƒéŸ³å­—æ¯ï¼‰ï¼Œç§»é™¤ç¬¬ä¸€ä¸ªå­—ç¬¦å¹¶å°†å®ƒæ”¾åˆ°æœ«å°¾ï¼Œä¹‹åå†æ·»åŠ â€maâ€ã€‚<br>ä¾‹å¦‚ï¼Œå•è¯â€goatâ€å˜ä¸ºâ€oatgmaâ€ã€‚</p><p>æ ¹æ®å•è¯åœ¨å¥å­ä¸­çš„ç´¢å¼•ï¼Œåœ¨å•è¯æœ€åæ·»åŠ ä¸ç´¢å¼•ç›¸åŒæ•°é‡çš„å­—æ¯â€™aâ€™ï¼Œç´¢å¼•ä»1å¼€å§‹ã€‚<br>ä¾‹å¦‚ï¼Œåœ¨ç¬¬ä¸€ä¸ªå•è¯åæ·»åŠ â€aâ€ï¼Œåœ¨ç¬¬äºŒä¸ªå•è¯åæ·»åŠ â€aaâ€ï¼Œä»¥æ­¤ç±»æ¨ã€‚<br>è¿”å›å°† S è½¬æ¢ä¸ºå±±ç¾Šæ‹‰ä¸æ–‡åçš„å¥å­ã€‚</p><p>æ¥æºï¼š</p><p>leetcode 824</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">toGoatLatin</span><span class="params">(self, S: str)</span> -&gt; str:</span></span><br><span class="line">        vowel = <span class="string">"aeiouAEIOU"</span></span><br><span class="line"></span><br><span class="line">        spllit_str = S.split(<span class="string">" "</span>)</span><br><span class="line">        <span class="keyword">for</span> k, s <span class="keyword">in</span> enumerate(spllit_str):</span><br><span class="line">            <span class="keyword">if</span> s[<span class="number">0</span>] <span class="keyword">not</span> <span class="keyword">in</span> vowel:</span><br><span class="line">                s = s[<span class="number">1</span>:] + s[<span class="number">0</span>]</span><br><span class="line">            s += <span class="string">"ma"</span> + <span class="string">"a"</span> * (k + <span class="number">1</span>)</span><br><span class="line">            spllit_str[k] = s</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">' '</span>.join(spllit_str)</span><br></pre></td></tr></table></figure><p>å¾ˆç®€å•å¾—æš´åŠ›é¢˜ç›® ç›´æ¥æå®š</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="img/1.png" alt="1" title="">                </div>                <div class="image-caption">1</div>            </figure><h3 id="1078-Bigram-åˆ†è¯"><a href="#1078-Bigram-åˆ†è¯" class="headerlink" title="1078.Bigram åˆ†è¯"></a>1078.Bigram åˆ†è¯</h3><blockquote><p>ç»™å‡ºç¬¬ä¸€ä¸ªè¯ first å’Œç¬¬äºŒä¸ªè¯ secondï¼Œè€ƒè™‘åœ¨æŸäº›æ–‡æœ¬ text ä¸­å¯èƒ½ä»¥ â€œfirst second thirdâ€ å½¢å¼å‡ºç°çš„æƒ…å†µï¼Œå…¶ä¸­ second ç´§éš first å‡ºç°ï¼Œthird ç´§éš second å‡ºç°ã€‚</p><p>å¯¹äºæ¯ç§è¿™æ ·çš„æƒ…å†µï¼Œå°†ç¬¬ä¸‰ä¸ªè¯ â€œthirdâ€ æ·»åŠ åˆ°ç­”æ¡ˆä¸­ï¼Œå¹¶è¿”å›ç­”æ¡ˆã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><p>è¾“å…¥ï¼štext = â€œalice is a good girl she is a good studentâ€, first = â€œaâ€, second = â€œgoodâ€<br>è¾“å‡ºï¼š[â€œgirlâ€,â€studentâ€]<br>ç¤ºä¾‹ 2ï¼š</p><p>è¾“å…¥ï¼štext = â€œwe will we will rock youâ€, first = â€œweâ€, second = â€œwillâ€<br>è¾“å‡ºï¼š[â€œweâ€,â€rockâ€]</p><p>æç¤ºï¼š</p><p>1 &lt;= text.length &lt;= 1000<br>text ç”±ä¸€äº›ç”¨ç©ºæ ¼åˆ†éš”çš„å•è¯ç»„æˆï¼Œæ¯ä¸ªå•è¯éƒ½ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ<br>1 &lt;= first.length, second.length &lt;= 10<br>first å’Œ second ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ</p><p>æ¥æºï¼š</p><p>leetcode 1078</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findOcurrences</span><span class="params">(self, text: str, first: str, second: str)</span> -&gt; List[str]:</span></span><br><span class="line">        ans = []</span><br><span class="line"></span><br><span class="line">        split_str = text.split()</span><br><span class="line">        length = len(split_str)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> k, s <span class="keyword">in</span> enumerate(split_str):</span><br><span class="line">            <span class="keyword">if</span> s == first <span class="keyword">and</span> k + <span class="number">1</span> &lt; length <span class="keyword">and</span> k + <span class="number">2</span> &lt; length:</span><br><span class="line">                <span class="keyword">if</span> split_str[k + <span class="number">1</span>] == second:</span><br><span class="line">                    ans.append(split_str[k + <span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure><p>æš´åŠ›å®Œäº‹å„¿ï¼Œè¿™é‡Œé¡ºä¾¿ä¼˜åŒ–ä¸€ä¸‹ï¼Œå¯ä»¥æŠŠ60msæåˆ°40mså·¦å³</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findOcurrences</span><span class="params">(self, text: str, first: str, second: str)</span> -&gt; List[str]:</span></span><br><span class="line">        ans = []</span><br><span class="line"></span><br><span class="line">        split_str = text.split()</span><br><span class="line">        length = len(split_str)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> k, s <span class="keyword">in</span> enumerate(split_str[:<span class="number">-2</span>]):</span><br><span class="line">            <span class="keyword">if</span> s == first <span class="keyword">and</span> split_str[k + <span class="number">1</span>] == second:</span><br><span class="line">                ans.append(split_str[k + <span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure><p>æå®š</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="img/2.png" alt="2" title="">                </div>                <div class="image-caption">2</div>            </figure><h3 id="120-ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ"><a href="#120-ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ" class="headerlink" title="120. ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ"></a>120. ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ</h3><blockquote><p>ç»™å®šä¸€ä¸ªä¸‰è§’å½¢ï¼Œæ‰¾å‡ºè‡ªé¡¶å‘ä¸‹çš„æœ€å°è·¯å¾„å’Œã€‚æ¯ä¸€æ­¥åªèƒ½ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œä¸­ç›¸é‚»çš„ç»“ç‚¹ä¸Šã€‚</p><p>ä¾‹å¦‚ï¼Œç»™å®šä¸‰è§’å½¢ï¼š</p><p>[<br>     [2],<br>    [3,4],<br>   [6,5,7],<br>  [4,1,8,3]<br>]<br>è‡ªé¡¶å‘ä¸‹çš„æœ€å°è·¯å¾„å’Œä¸º 11ï¼ˆå³ï¼Œ2 + 3 + 5 + 1 = 11ï¼‰ã€‚</p><p>è¯´æ˜ï¼š</p><p>å¦‚æœä½ å¯ä»¥åªä½¿ç”¨ O(n) çš„é¢å¤–ç©ºé—´ï¼ˆn ä¸ºä¸‰è§’å½¢çš„æ€»è¡Œæ•°ï¼‰æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé‚£ä¹ˆä½ çš„ç®—æ³•ä¼šå¾ˆåŠ åˆ†ã€‚</p><p>æ¥æºï¼š</p><p>leetcode  120</p></blockquote><p>dp è¯´æ˜¯ç©ºé—´å¤æ‚åº¦O(N)ï¼Œä½†å…¶å®è¿™ä¸ªé¢˜ç›®ç©ºé—´å¤æ‚åº¦å¯ä»¥åˆ°O(1)</p><p>å…ˆå°è¯•ç”¨DFS</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minimumTotal</span><span class="params">(self, triangle: List[List[int]])</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># DFS</span></span><br><span class="line">        floors = len(triangle)</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">dfs</span><span class="params">(floor, left, right)</span>:</span></span><br><span class="line">            <span class="comment"># åˆ¤æ–­æ˜¯å¦æœ€ä¸‹å±‚ä¹Ÿè®¡ç®—è¿‡äº†</span></span><br><span class="line">            <span class="keyword">if</span> floor == floors:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span> <span class="comment"># æœ€ä½ç«¯å†å¾€ä¸‹æƒé‡å°±æ˜¯0</span></span><br><span class="line"></span><br><span class="line">            ans = <span class="number">0</span> <span class="comment"># åˆå§‹ä¸º0</span></span><br><span class="line">            <span class="keyword">if</span> left &lt; floor + <span class="number">1</span>:</span><br><span class="line">                tl = dfs(floor + <span class="number">1</span>, left, left + <span class="number">1</span>) + triangle[floor][left]</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> right &lt; floor + <span class="number">1</span>:</span><br><span class="line">                tr = dfs(floor + <span class="number">1</span>, right, right + <span class="number">1</span>) + triangle[floor][right]</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> ans + min(tl, tr)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dfs(<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>) + triangle[<span class="number">0</span>][<span class="number">0</span>]</span><br></pre></td></tr></table></figure><p>ç»“æœæœç„¶åä¸½ä¸½çš„è¶…æ—¶äº†ï¼Œæ‰“çœ¼ä¸€çœ‹è¿‡äº†42ä¸ªï¼Œå¡åœ¨äº†æœ€åä¸€ä¸ªï¼Œå¯èƒ½æ”¹æ”¹å°±èƒ½è¿‡äº†å§(å¯èƒ½æ€§æ¯”è¾ƒå°ï¼Œå› ä¸ºç”¨C++è¯•äº†ä¸‹ä¹Ÿè¶…æ—¶ï¼Œåº”è¯¥æ˜¯å¡çš„æ—¶é—´)ï¼Œä¸è¿‡ä¹Ÿæ˜¯å¾ˆæé™äº†ï¼Œæ‰€ä»¥æ”¹ç”¨dpå†™ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minimumTotal</span><span class="params">(self, triangle: List[List[int]])</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># dp</span></span><br><span class="line">        floors = len(triangle)</span><br><span class="line">        <span class="keyword">if</span> floors == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(floors - <span class="number">2</span>, <span class="number">-1</span>, <span class="number">-1</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(i + <span class="number">1</span>):</span><br><span class="line">                triangle[i][j] += min(triangle[i + <span class="number">1</span>][j + <span class="number">1</span>], triangle[i + <span class="number">1</span>][j])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> triangle[<span class="number">0</span>][<span class="number">0</span>]</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå¯ä»¥ä¸ç”¨å¼€æ–°çš„dpæ•°ç»„(æ— è®ºæ˜¯äºŒç»´è¿˜æ˜¯ä¸€ç»´)ï¼Œå› ä¸ºæ˜¯ä»ä¸‹å¾€ä¸Šçš„ï¼Œåªéœ€è¦æœ€ç»ˆç»“æœï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥åˆ©ç”¨åŸä¸‰è§’å½¢æ•°ç»„å½“ä½œdpæ•°ç»„ï¼Œæ‰€ä»¥ç©ºé—´å°±å˜æˆäº†O(1)äº†ã€‚</p><p>ä¸è¿‡è¿™ä¸ªæ‰åªæ‰“è´¥äº†50%çš„äººï¼Œç”šè‡³ç©ºé—´åªæ‰“è´¥äº†5%</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="img/3.png" alt="3" title="">                </div>                <div class="image-caption">3</div>            </figure><p>ä¸‹é¢è¿™ä¸ªæ˜¯æœ€å¿«ç”¨æ—¶çš„ç­”æ¡ˆï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minimumTotal</span><span class="params">(self, triangle: List[List[int]])</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> triangle:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        res = triangle[<span class="number">-1</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(triangle) - <span class="number">2</span>, <span class="number">-1</span>, <span class="number">-1</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(len(triangle[i])):</span><br><span class="line">                res[j] = min(res[j], res[j + <span class="number">1</span>]) + triangle[i][j]</span><br><span class="line">        <span class="keyword">return</span> res[<span class="number">0</span>]</span><br></pre></td></tr></table></figure><p>ä»ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ï¼š</p><ol><li>å…¶å®å®šä¹‰è¿‡å¤šå˜é‡ä¼šå‡ç¼“é€Ÿåº¦å¹¶ä¸”å¢åŠ ç©ºé—´ç”¨é‡ï¼Œç¼–è¯‘å™¨ä¼šç»™ä¼˜åŒ–çš„ã€‚</li><li>å°½é‡ç”¨ä¸€ç»´listç´¢å¼•ï¼Œé€Ÿåº¦ä¼šå¿«å¾ˆå¤š</li><li>å°½é‡ä½¿ç”¨ç›¸åŒçš„listè¿›è¡Œç´¢å¼•ï¼Œç¼–è¯‘å™¨ä¼šä¼˜åŒ–</li></ol><h3 id="872-å¶å­ç›¸ä¼¼çš„æ ‘"><a href="#872-å¶å­ç›¸ä¼¼çš„æ ‘" class="headerlink" title="872. å¶å­ç›¸ä¼¼çš„æ ‘"></a>872. å¶å­ç›¸ä¼¼çš„æ ‘</h3><blockquote><p>è¯·è€ƒè™‘ä¸€é¢—äºŒå‰æ ‘ä¸Šæ‰€æœ‰çš„å¶å­ï¼Œè¿™äº›å¶å­çš„å€¼æŒ‰ä»å·¦åˆ°å³çš„é¡ºåºæ’åˆ—å½¢æˆä¸€ä¸ª å¶å€¼åºåˆ— ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œç»™å®šä¸€é¢—å¶å€¼åºåˆ—ä¸º (6, 7, 4, 9, 8) çš„æ ‘ã€‚</p><p>å¦‚æœæœ‰ä¸¤é¢—äºŒå‰æ ‘çš„å¶å€¼åºåˆ—æ˜¯ç›¸åŒï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è®¤ä¸ºå®ƒä»¬æ˜¯ å¶ç›¸ä¼¼ çš„ã€‚</p><p>å¦‚æœç»™å®šçš„ä¸¤ä¸ªå¤´ç»“ç‚¹åˆ†åˆ«ä¸º root1 å’Œ root2 çš„æ ‘æ˜¯å¶ç›¸ä¼¼çš„ï¼Œåˆ™è¿”å› trueï¼›å¦åˆ™è¿”å› false ã€‚</p><p>æç¤ºï¼š</p><p>ç»™å®šçš„ä¸¤é¢—æ ‘å¯èƒ½ä¼šæœ‰ 1 åˆ° 100 ä¸ªç»“ç‚¹ã€‚</p><p>æ¥æºï¼š</p><p>leetcode 872</p></blockquote><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="img/tree4.png" alt="treepic" title="">                </div>                <div class="image-caption">treepic</div>            </figure><p>ç›´æ¥å‰åºéå†åŠ åˆ¤æ–­ï¼Œæš´åŠ›å°±å®Œäº‹å„¿</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.left = <span class="literal">None</span></span><br><span class="line">        self.right = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">leafSimilar</span><span class="params">(self, root1: TreeNode, root2: TreeNode)</span> -&gt; bool:</span></span><br><span class="line">        <span class="comment"># å‰åºéå†</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">tree_leaf_sim_calcu</span><span class="params">(root: TreeNode)</span>:</span></span><br><span class="line">            stack, ans = [], []  <span class="comment"># ç”¨list</span></span><br><span class="line">            <span class="keyword">while</span> len(stack) <span class="keyword">or</span> root:</span><br><span class="line">                <span class="keyword">if</span> root:</span><br><span class="line">                    <span class="keyword">if</span> root.left <span class="keyword">is</span> root.right <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                        ans.append(root.val)</span><br><span class="line">                    stack.append(root)</span><br><span class="line">                    root = root.left</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    root = stack.pop().right</span><br><span class="line">            <span class="keyword">return</span> ans</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> tree_leaf_sim_calcu(root1) == tree_leaf_sim_calcu(root2)</span><br></pre></td></tr></table></figure><p>ä½†å…¶å®è¿™æ ·åªå‡»è´¥äº†44%çš„ç”¨æˆ·ï¼Œçœ‹äº†ä¸€ä¸‹ç”¨æ—¶å¿«çš„å›ç­”ï¼Œå‘ç°åŸºæœ¬ä¸Šéƒ½æ˜¯ç”¨çš„é€’å½’ï¼Œé€’å½’å ç”¨èµ„æºå¤ªå¤§ï¼Œæ‰€ä»¥å°±ä¸æ”¹äº†ï¼Œæ€æƒ³éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="img/4.png" alt="4" title="">                </div>                <div class="image-caption">4</div>            </figure><p>ä¸ºä»€ä¹ˆé€’å½’ç”¨æ—¶ä¼šçŸ­å‘¢ï¼Œè¿™æ˜¯å› ä¸ºpythoné‡Œçš„whileå¾ªç¯æ˜¯ç”¨çº¯pythonç¼–å†™çš„ï¼Œæ‰€ä»¥æ•ˆç‡è¿œä¸åŠç®€å•å‡½æ•°å †æ ˆçš„æ•ˆç‡ï¼Œæ‰€ä»¥ä¼šå‡ºç°éé€’å½’æ¯”é€’å½’ç”¨æ—¶é•¿çš„ç°è±¡ï¼Œå¦‚æœç”¨åˆ«çš„è¯­è¨€(æ²¡é”™å°±æ˜¯C++)æ˜¯ä¸ä¼šå‡ºç°è¿™ç§é—®é¢˜çš„ï¼</p><h3 id="863-äºŒå‰æ ‘ä¸­æ‰€æœ‰è·ç¦»ä¸º-K-çš„ç»“ç‚¹"><a href="#863-äºŒå‰æ ‘ä¸­æ‰€æœ‰è·ç¦»ä¸º-K-çš„ç»“ç‚¹" class="headerlink" title="863. äºŒå‰æ ‘ä¸­æ‰€æœ‰è·ç¦»ä¸º K çš„ç»“ç‚¹"></a>863. äºŒå‰æ ‘ä¸­æ‰€æœ‰è·ç¦»ä¸º K çš„ç»“ç‚¹</h3><blockquote><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼ˆå…·æœ‰æ ¹ç»“ç‚¹ rootï¼‰ï¼Œ ä¸€ä¸ªç›®æ ‡ç»“ç‚¹ target ï¼Œå’Œä¸€ä¸ªæ•´æ•°å€¼ K ã€‚</p><p>è¿”å›åˆ°ç›®æ ‡ç»“ç‚¹ target è·ç¦»ä¸º K çš„æ‰€æœ‰ç»“ç‚¹çš„å€¼çš„åˆ—è¡¨ã€‚ ç­”æ¡ˆå¯ä»¥ä»¥ä»»ä½•é¡ºåºè¿”å›ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><p>è¾“å…¥ï¼šroot = [3,5,1,6,2,0,8,null,null,7,4], target = 5, K = 2</p><p>è¾“å‡ºï¼š[7,4,1]</p><p>è§£é‡Šï¼š<br>æ‰€æ±‚ç»“ç‚¹ä¸ºä¸ç›®æ ‡ç»“ç‚¹ï¼ˆå€¼ä¸º 5ï¼‰è·ç¦»ä¸º 2 çš„ç»“ç‚¹ï¼Œ<br>å€¼åˆ†åˆ«ä¸º 7ï¼Œ4ï¼Œä»¥åŠ 1</p><p>æ³¨æ„ï¼Œè¾“å…¥çš„ â€œrootâ€ å’Œ â€œtargetâ€ å®é™…ä¸Šæ˜¯æ ‘ä¸Šçš„ç»“ç‚¹ã€‚<br>ä¸Šé¢çš„è¾“å…¥ä»…ä»…æ˜¯å¯¹è¿™äº›å¯¹è±¡è¿›è¡Œäº†åºåˆ—åŒ–æè¿°ã€‚</p><p>æç¤ºï¼š</p><p>ç»™å®šçš„æ ‘æ˜¯éç©ºçš„ï¼Œä¸”æœ€å¤šæœ‰ K ä¸ªç»“ç‚¹ã€‚<br>æ ‘ä¸Šçš„æ¯ä¸ªç»“ç‚¹éƒ½å…·æœ‰å”¯ä¸€çš„å€¼ 0 &lt;= node.val &lt;= 500 ã€‚<br>ç›®æ ‡ç»“ç‚¹ target æ˜¯æ ‘ä¸Šçš„ç»“ç‚¹ã€‚<br>0 &lt;= K &lt;= 1000.</p><p>æ¥æºï¼š</p><p>leetcode 863</p></blockquote><p>dfsåŠ çˆ¶èŠ‚ç‚¹è½¬æˆå›¾é—®é¢˜å†åˆ©ç”¨bfså¯»æ‰¾targetä¸ºä¸­å¿ƒçš„èŠ‚ç‚¹ã€‚è¿™é‡Œä»£ç å‚è€ƒäº†æ ‡å‡†ç­”æ¡ˆï¼Œæƒ³çœ‹çš„å»é¢˜è§£çœ‹ç¬¬ä¸€ä¸ªå°±okäº†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">distanceK</span><span class="params">(self, root, target, K)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type root: TreeNode</span></span><br><span class="line"><span class="string">        :type target: TreeNode</span></span><br><span class="line"><span class="string">        :type K: int</span></span><br><span class="line"><span class="string">        :rtype: List[int]</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åˆ¤æ–­æ˜¯å¦æ˜¯æœ¬èº«</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> K:</span><br><span class="line">            <span class="keyword">return</span> [target.val]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># dfsæ ‡è®°çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">dfs</span><span class="params">(node: TreeNode, father_node: TreeNode)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> node:</span><br><span class="line">                node.father = father_node</span><br><span class="line">                dfs(node.left, node)</span><br><span class="line">                dfs(node.right, node)</span><br><span class="line"></span><br><span class="line">        dfs(root, <span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è¿™ä¸€æ­¥è¿‡åå…¶å®å°±å˜æˆäº†å›¾é—®é¢˜ï¼Œæ¯ä¸ªéƒ½æœ‰ä¸‰ä¸ªèŠ‚ç‚¹çš„å›¾</span></span><br><span class="line">        <span class="comment"># ä¸‹é¢å¯¹äºtargetè¿›è¡Œbfs</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">bfs</span><span class="params">()</span>:</span></span><br><span class="line">            search = &#123;target&#125;</span><br><span class="line">            queue = deque([(target, <span class="number">0</span>)])  <span class="comment"># å­˜0 å³åŸç‚¹</span></span><br><span class="line">            <span class="keyword">while</span> queue:</span><br><span class="line">                <span class="keyword">if</span> queue[<span class="number">0</span>][<span class="number">1</span>] == K:</span><br><span class="line">                    <span class="keyword">return</span> [node.val <span class="keyword">for</span> node, N <span class="keyword">in</span> queue]</span><br><span class="line">                node, N = queue.popleft()</span><br><span class="line">                <span class="keyword">for</span> n <span class="keyword">in</span> (node.left, node.right, node.father):</span><br><span class="line">                    <span class="keyword">if</span> n <span class="keyword">and</span> n <span class="keyword">not</span> <span class="keyword">in</span> search:</span><br><span class="line">                        queue.append((n, N + <span class="number">1</span>))</span><br><span class="line">                        search.add(n)</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> bfs()</span><br></pre></td></tr></table></figure><p>çœ‹äº†ä¸€ä¸‹é€Ÿåº¦æœ€å¿«çš„å›ç­”ï¼Œä¹Ÿæ˜¯dfså»ºå›¾+bfsæœç´¢ï¼Œé™¤äº†ä¸€äº›éªšæ“ä½œï¼Œåº”è¯¥å¤§éƒ¨åˆ†éƒ½æ˜¯ä¼˜åŒ–è¿™ä¸ªæ€è·¯çš„ä»£ç å®ç°ã€‚</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="img/5.png" alt="5" title="">                </div>                <div class="image-caption">5</div>            </figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å®éªŒå®¤æš‘å‡è€ƒæ ¸é¢˜ç›®&lt;/p&gt;
&lt;p&gt;éšä¾¿å†™å†™è§£é¢˜æ€è·¯æ¥ç€&lt;/p&gt;
    
    </summary>
    
    
      <category term="assignment" scheme="http://blog.fivezha.cn/categories/assignment/"/>
    
    
      <category term="algorithm" scheme="http://blog.fivezha.cn/tags/algorithm/"/>
    
      <category term="python" scheme="http://blog.fivezha.cn/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>playframeworkåˆæ¶‰-1.ç¯å¢ƒé…ç½®</title>
    <link href="http://blog.fivezha.cn/2019/09/04/play-study-f/"/>
    <id>http://blog.fivezha.cn/2019/09/04/play-study-f/</id>
    <published>2019-09-04T09:24:50.000Z</published>
    <updated>2020-07-13T12:43:05.539Z</updated>
    
    <content type="html"><![CDATA[<p>å› ä¸ºJavaeeè¯¾è¦ç”¨è¿™ä¸ªæ¡†æ¶ æ‰€ä»¥ç¨å¾®å­¦äº†ä¸‹</p><a id="more"></a><h2 id="1-è¿è¡Œç¯å¢ƒé…ç½®"><a href="#1-è¿è¡Œç¯å¢ƒé…ç½®" class="headerlink" title="1.è¿è¡Œç¯å¢ƒé…ç½®"></a>1.è¿è¡Œç¯å¢ƒé…ç½®</h2><h3 id="1-1ç¡®ä¿æ‹¥æœ‰Javaç¯å¢ƒ"><a href="#1-1ç¡®ä¿æ‹¥æœ‰Javaç¯å¢ƒ" class="headerlink" title="1.1ç¡®ä¿æ‹¥æœ‰Javaç¯å¢ƒ"></a>1.1ç¡®ä¿æ‹¥æœ‰Javaç¯å¢ƒ</h3><p>æ£€æŸ¥ç¯å¢ƒï¼š</p><p>å¯èƒ½ä¹‹å‰æœ‰äººé…ç½®è¿‡Javaç¯å¢ƒï¼Œæ‰€ä»¥é¦–å…ˆå…ˆåˆ¤æ–­ä½ æ˜¯å¦æœ‰å®‰è£…è¿‡Javaï¼ŒæŒ‰ä¸‹<code>win + R</code>é”®ï¼Œå‡ºç°è¿è¡Œç•Œé¢<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="run.png" alt="run" title="">                </div>                <div class="image-caption">run</div>            </figure></p><p>è¾“å…¥<code>cmd</code>ä¼šå‡ºç°ç†Ÿæ‚‰çš„å‘½ä»¤æç¤ºæ¡†ï¼Œæ­¤æ—¶è¾“å…¥<code>Java</code>ç„¶åæŒ‰å›è½¦å¦‚æœæ˜¾ç¤ºä¸‹é¢ç±»ä¼¼çš„ä¾¿å¯ä»¥è·³è¿‡åˆ°1.2å»<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="cmd.png" alt="cmd" title="">                </div>                <div class="image-caption">cmd</div>            </figure></p><p>å¦‚æœæ˜¯ä¸‹å›¾æƒ…å†µ</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="wrong_env.png" alt="wrong_env" title="">                </div>                <div class="image-caption">wrong_env</div>            </figure><p>è¯·é…ç½®ç¯å¢ƒï¼š</p><ol><li><p>å®‰è£…Java(è¯·çœ‹ç¾¤æ–‡ä»¶javaeeæ–‡ä»¶å¤¹æˆ–è€…è‡ªå·±å»å®˜ç½‘ä¸‹è½½)</p></li><li><p>åœ¨æ­¤ç”µè„‘å³é”®ç‚¹å±æ€§<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="env2.png" alt="env1](env1.png)![env1" title="">                </div>                <div class="image-caption">env1](env1.png)![env1</div>            </figure></p></li><li><p>åŒå‡»ç‚¹è¿›å»ï¼Œå¦‚ä¸‹é…ç½®<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="env_3.png" alt="env3" title="">                </div>                <div class="image-caption">env3</div>            </figure></p></li><li><p>ä¸€è·¯ç‚¹ç¡®å®šä¸‹å»ï¼Œæœ€åå†é‡å¤æœ€ä¸Šé¢çš„æ£€æŸ¥ç¯å¢ƒæ“ä½œè¿›è¡Œåˆ¤æ–­ã€‚</p></li></ol><h3 id="1-2-é…ç½®play-frameworkç¯å¢ƒ"><a href="#1-2-é…ç½®play-frameworkç¯å¢ƒ" class="headerlink" title="1.2 é…ç½®play frameworkç¯å¢ƒ"></a>1.2 é…ç½®play frameworkç¯å¢ƒ</h3><p>è¿™é‡Œé€‰å–çš„æ˜¯<code>1.5.1</code>ç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨å®˜ç½‘æˆ–è€…ç¾¤æ–‡ä»¶ä¸­ä¸‹è½½ï¼Œç„¶åæ‰¾åˆ°ä½ çš„<code>play-1.5.1</code>çš„ä¸‹è½½çš„æœ¬åœ°æ–‡ä»¶å¤¹ï¼Œè§£å‹ç¼©åæŠŠ<code>play-1.5.1</code>æ–‡ä»¶å¤¹æ”¾åˆ°ç¯å¢ƒå˜é‡é‡Œ<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="env_4.png" alt="env_4" title="">                </div>                <div class="image-caption">env_4</div>            </figure></p><p>æ­¤æ—¶åœ¨å‘½ä»¤æ¡†ä¸­è¾“å…¥playåˆ™ä¼šå‡ºç°å¦‚ä¸‹<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="play_env2.png" alt="play_env2" title="">                </div>                <div class="image-caption">play_env2</div>            </figure></p><p>åˆ™è¯´æ˜ç¯å¢ƒå·²ç»é…ç½®å¥½äº†</p><h3 id="1-3-æ–°å»ºwebé¡¹ç›®"><a href="#1-3-æ–°å»ºwebé¡¹ç›®" class="headerlink" title="1.3 æ–°å»ºwebé¡¹ç›®"></a>1.3 æ–°å»ºwebé¡¹ç›®</h3><p>è¿™é‡Œåªéœ€è¦åˆ°ä½ æƒ³è¦åˆ›å»ºé¡¹ç›®çš„æ–‡ä»¶å¤¹ä¸­ï¼ŒæŒ‰ä½<code>shift + å³é”®</code><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="right_click.png" alt="rc" title="">                </div>                <div class="image-caption">rc</div>            </figure></p><p>ç„¶åè¾“å…¥<code>play new é¡¹ç›®å</code></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="play_new.png" alt="new" title="">                </div>                <div class="image-caption">new</div>            </figure><p><strong>ç„¶åè¾“å…¥<code>cd é¡¹ç›®å</code>ï¼Œåœ¨è¾“å…¥<code>play idealize</code>(ç”¨eclipseçš„è¯å°±æ˜¯<code>play eclipsify</code>)</strong></p><p><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="idea_succ.png" alt="succ" title="">                </div>                <div class="image-caption">succ</div>            </figure></p><h2 id="2-IDEç¯å¢ƒé…ç½®"><a href="#2-IDEç¯å¢ƒé…ç½®" class="headerlink" title="2. IDEç¯å¢ƒé…ç½®"></a>2. IDEç¯å¢ƒé…ç½®</h2><p>é…ç½®å¥½äº†è¿è¡Œç¯å¢ƒï¼Œé‚£ä¹ˆå°±åº”è¯¥å¼€å§‹é…ç½®æˆ‘ä»¬ä½¿ç”¨çš„IDEç¯å¢ƒäº†ï¼Œè¿™é‡Œæœ‰ä¸¤ä¸ªé€‰æ‹©</p><ol><li>IDEA</li><li>eclipse</li></ol><p>è¿™è¿™ä¸¤ä¸ªideä¸ªäººæ¨èä½¿ç”¨IDEAï¼Œä½†æ˜¯eclipseé…ç½®ç®€å•ï¼Œè¿™ä¸ªåªèƒ½è¯´æ˜¯è§ä»è§æ™ºäº†ã€‚</p><h3 id="2-1-é…ç½®IDEA"><a href="#2-1-é…ç½®IDEA" class="headerlink" title="2.1 é…ç½®IDEA"></a>2.1 é…ç½®IDEA</h3><p>æ‰¾åˆ°ideaå®‰è£…æ–‡ä»¶(å®˜ç½‘æˆ–è€…QQç¾¤é‡Œæœ‰)ï¼Œå®‰è£…ä¸€ç›´nextåˆ°æœ€åï¼Œå‡ºç°é€‰é¡¹é€‰ä¸‹é¢è¿™å‡ ä¸ª<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="ch1.png" alt="ch1" title="">                </div>                <div class="image-caption">ch1</div>            </figure></p><p>ç„¶åé¦–æ¬¡å¯åŠ¨IDEAè·Ÿç€ä¸‹é¢çš„é…ç½®æ¥å°±å¯ä»¥ï¼Œ</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="ch2.png" alt="ch2" title="">                </div>                <div class="image-caption">ch2</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="ch3.png" alt="ch2" title="">                </div>                <div class="image-caption">ch2</div>            </figure><p>è¿™é‡Œæ˜¯é€‰æ‹©ä½ çš„é¢œè‰²ä¸»é¢˜ ä½ å¯ä»¥é€‰æ‹©æš—è‰²æˆ–è€…äº®è‰²</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="ch4.png" alt="ch2" title="">                </div>                <div class="image-caption">ch2</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="ch5.png" alt="ch2" title="">                </div>                <div class="image-caption">ch2</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="ch6.png" alt="ch2" title="">                </div>                <div class="image-caption">ch2</div>            </figure><h3 id="2-2-é¡¹ç›®é…ç½®æµç¨‹"><a href="#2-2-é¡¹ç›®é…ç½®æµç¨‹" class="headerlink" title="2.2 é¡¹ç›®é…ç½®æµç¨‹"></a>2.2 é¡¹ç›®é…ç½®æµç¨‹</h3><p>è¿™é‡Œå¦‚æœä½ æŒ‰ç…§ä¸Šé¢çš„æ“ä½œè¿›è¡Œäº†<code>play idealize</code>æ“ä½œä¹‹åï¼Œä½ é¡¹ç›®çš„æ–‡ä»¶å¤¹é‡Œé¢åº”è¯¥ä¼šå‡ºç°ä¸€ä¸ª<code>é¡¹ç›®å.ipr</code>çš„æ–‡ä»¶ï¼ŒåŒå‡»æ‰“å¼€ä¾¿å¯ä»¥ç›´æ¥æ‰“å¼€ideaå¹¶åŠ è½½é¡¹ç›®äº†ã€‚</p><p>é¦–å…ˆå…ˆæŠŠä¸‹é¢çš„tipså…³æ‰(å› ä¸ºå¤ªçƒ¦äººäº†)</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="tipoff.png" alt="ch2" title="">                </div>                <div class="image-caption">ch2</div>            </figure><p>ç‚¹å¼€ï¼Œå·¦é¢çš„<code>project</code>å‡ºç°æ–‡ä»¶ç»“æ„ï¼Œå¦‚æœä¸ä¸€æ ·è¯·å¯»æ‰¾æ˜¯å¦æœ‰æ¼æ‰çš„æ­¥éª¤ï¼Œç„¶åæ‰“å¼€<code>controllers/Application.java</code>å¯èƒ½ä¼šæç¤ºä½ å¡«SDKï¼Œé€‰æ‹©å…¶ä¸­ä¸€ä¸ª<code>jdk</code>å°±å¯ä»¥äº†</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="jdk1.png" alt="ch2" title="">                </div>                <div class="image-caption">ch2</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="jdk2.png" alt="ch2" title="">                </div>                <div class="image-caption">ch2</div>            </figure><p>ç„¶åæˆ‘ä»¬ä¼šå‘ç°å› ä¸ºdocviewerå¯¼åŒ…é—®é¢˜ä¼šæœ‰ä¸€å †éº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥åˆ äº†å°±å¯ä»¥ã€‚</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="delete1.png" alt="delete" title="">                </div>                <div class="image-caption">delete</div>            </figure><p>ç„¶åæˆ‘ä»¬é…ç½®å¯åŠ¨ç¨‹åº</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="run1.png" alt="add" title="">                </div>                <div class="image-caption">add</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="run2.png" alt="add2" title="">                </div>                <div class="image-caption">add2</div>            </figure><p>å…¶ä¸­VM optionsæ˜¯<code>-Dapplication.path=.</code></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="setting.png" alt="run3" title="">                </div>                <div class="image-caption">run3</div>            </figure><p>ç„¶åæˆ‘ä»¬å¼€å§‹è¿è¡Œï¼Œå¦‚æœå‡ºç°modelsä¸å­˜åœ¨çš„bugï¼Œè¿™ä¸ªæ˜¯å› ä¸ºä½ modelsæ–‡ä»¶å¤¹é‡Œé¢æ²¡æœ‰å­˜åœ¨æ–‡ä»¶ï¼Œæ·»åŠ ä¸€ä¸ªå°±å¯ä»¥äº†ã€‚</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="wrong_pack.png" alt="file" title="">                </div>                <div class="image-caption">file</div>            </figure><p>ç„¶åå°±å¯ä»¥è¿è¡Œäº†ï¼Œå½“ä½ çœ‹åˆ° </p><p><img src="run_succ.png" alt="run"></p><p>çš„æ—¶å€™æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥<code>http://localhost:9000/</code>å›è½¦</p><p>å¦‚æœçœ‹è§ä¸‹é¢è¿™ä¸ªå°±è¯´æ˜é…ç½®æˆåŠŸäº†</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="succ.png" alt="succ" title="">                </div>                <div class="image-caption">succ</div>            </figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å› ä¸ºJavaeeè¯¾è¦ç”¨è¿™ä¸ªæ¡†æ¶ æ‰€ä»¥ç¨å¾®å­¦äº†ä¸‹&lt;/p&gt;
    
    </summary>
    
    
      <category term="assignment" scheme="http://blog.fivezha.cn/categories/assignment/"/>
    
    
      <category term="play" scheme="http://blog.fivezha.cn/tags/play/"/>
    
      <category term="java" scheme="http://blog.fivezha.cn/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>opencvä¸­é«˜æ–¯æ¨¡ç³Š(æ»¤æ³¢å™¨)çš„æºç è§£æ(c++ç‰ˆ)</title>
    <link href="http://blog.fivezha.cn/2019/02/25/gaussianbulr-analyze/"/>
    <id>http://blog.fivezha.cn/2019/02/25/gaussianbulr-analyze/</id>
    <published>2019-02-25T11:40:25.000Z</published>
    <updated>2020-07-11T13:34:51.677Z</updated>
    
    <content type="html"><![CDATA[<p><strong>å› ä¸ºå®éªŒå®¤å‡æœŸéœ€è¦å†™ä¸€ç¯‡å…³äºopencvçš„ä½œä¸š æ‰€ä»¥é¡ºä¾¿çœ‹äº†ä¸€ä¸‹opencv(ç‰ˆæœ¬3.2.0)é‡Œé¢å…³äºé«˜æ–¯æ¨¡ç³Šçš„æºç </strong></p><a id="more"></a><h2 id="åˆ†æå‡½æ•°æ¥å£"><a href="#åˆ†æå‡½æ•°æ¥å£" class="headerlink" title="åˆ†æå‡½æ•°æ¥å£"></a>åˆ†æå‡½æ•°æ¥å£</h2><p>é¦–å…ˆï¼Œåœ¨ä¸‹ç”¨çš„æ˜¯vsç‰ˆæœ¬çš„opencvï¼Œæ˜¯ç›´æ¥ç¼–è¯‘å¥½ç»™ä½ é™æ€åº“(.lib)æ–‡ä»¶çš„ï¼Œæ‰€ä»¥å½“æˆ‘æŒ‰ä½<code>ctrl</code>å¯»æ‰¾<code>GaussianBlur</code>è¿™ä¸ªå‡½æ•°æ—¶ åªå‘ç°äº†å…¶åœ¨<code>imgproc.hpp</code>é‡Œé¢æä¾›ç»™ä½ çš„æ¥å£ã€‚</p><p>å¤§æ¦‚æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­çš„:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/é«˜æ–¯å‡½æ•°æ¥å£2.png" alt="é«˜æ–¯æ¨¡ç³Šå‡½æ•°æ¥å£1" title="">                </div>                <div class="image-caption">é«˜æ–¯æ¨¡ç³Šå‡½æ•°æ¥å£1</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/é«˜æ–¯å‡½æ•°.png" alt="é«˜æ–¯æ¨¡ç³Šå‡½æ•°æ¥å£2" title="">                </div>                <div class="image-caption">é«˜æ–¯æ¨¡ç³Šå‡½æ•°æ¥å£2</div>            </figure><blockquote><p>è¯¥å‡½æ•°å°†æºå›¾åƒä¸æŒ‡å®šçš„å·ç§¯æ ¸è¿›è¡Œå·ç§¯ã€‚å¹¶ä¸”æ”¯æŒåŸå›¾åƒç›´æ¥è¿›è¡Œæ»¤æ³¢æ“ä½œã€‚</p></blockquote><p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªå‡½æ•°æ¥å£ä¸»è¦ç”±å››ä¸ªéƒ¨åˆ†ç»„æˆ:</p><ol><li><code>CV_EXPORTS_W</code><br>ç»§ç»­å¾€ä¸Šæ‰¾ å¯ä»¥å‘ç°è¿™æ˜¯ä¸€ä¸ªå®å®šä¹‰<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/å®å®šä¹‰2.png)<br>è¿™é‡Œåˆæ˜¯ä¸€ä¸ªå®ç»„æˆçš„ç”¨ä»¥å®šä¹‰`CV_EXPORTS`çš„å®ç»„ï¼Œè¿™ä¸€æ®µå…¶å®å°±æ˜¯ç±»ä¼¼äº`if" alt="å®å®šä¹‰1](pic/å®å®šä¹‰.png)<br>å¯ä»¥å‘ç° è¿™ä¸ªå®å®šä¹‰æ˜¯åœ¨**ç¼–è¯‘é˜¶æ®µ**å°†`CV_EXPORTS`æ›¿æ¢ä¸ºäº†`CV_EXPORTS_W`å†å‘ä¸ŠæŸ¥æ‰¾ ä¼šå‘ç°<br>![å®å®šä¹‰2" title="else`çš„ç»“æ„ï¼Œä¸»è¦çš„ä½œç”¨æœºç†ä¾¿æ˜¯**é€‚é…å„ç±»ç¯å¢ƒ(æ“ä½œç³»ç»Ÿ">                </div>                <div class="image-caption">else`çš„ç»“æ„ï¼Œä¸»è¦çš„ä½œç”¨æœºç†ä¾¿æ˜¯**é€‚é…å„ç±»ç¯å¢ƒ(æ“ä½œç³»ç»Ÿ</div>            </figure>** ã€‚ä»ä¸­ï¼Œæˆ‘ä»¬è¿™é‡Œåˆåˆ†æˆäº†ä¸‰ä¸ªéƒ¨åˆ†è¿›è¡Œè§£æ:<ol><li><code>#if (defined WIN32 || defined _WIN32 || defined WINCE || defined __CYGWIN__) &amp;&amp; defined CVAPI_EXPORTS</code><br>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œåˆ¤æ–­äº†ä¸¤ä¸ªè¡¨è¾¾å¼çš„é€»è¾‘ä¸(<code>(defined WIN32 || defined _WIN32 || defined WINCE || defined __CYGWIN__)</code>å’Œ<code>defined CVAPI_EXPORTS</code>)<ol><li>é¦–å…ˆï¼Œ<code>defined</code>çš„æ„ä¹‰åœ¨äºå¯»æ‰¾åé¢çš„å­—æ®µæ˜¯å¦å·²ç»è¢«å®å®šä¹‰è¿‡ã€‚</li><li>å…¶æ¬¡ï¼Œè§‚å¯Ÿç¬¬ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå‘ç°<code>_WIN32</code> åœ¨ä¹‹å‰å·²ç»è¢«å®šä¹‰è¿‡äº†ï¼Œé€šè¿‡æŸ¥é˜…<a href="https://docs.microsoft.com/en-us/cpp/preprocessor/predefined-macros?view=vs-2017" target="_blank" rel="noopener">å¾®è½¯å®˜æ–¹å®å®šä¹‰æ–‡æ¡£</a>å‘ç°è¿™ä¸ªå­—æ®µä½œç”¨æ˜¯åŸºäºç¼–è¯‘å™¨ä¸€ä¸ªä¿¡å·ï¼Œè¡¨æ˜æ˜¯Windowsç¯å¢ƒä¸‹ç¼–è¯‘åŠè¿è¡Œçš„ç¨‹åºã€‚<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/WIN32.png)<br>å†æŸ¥æ‰¾å‰åæœªå®šä¹‰è¿‡çš„å­—æ®µï¼Œç»§è€Œå‘ç°`WIN32`æ˜¯**åªè¦åŒ…å«äº†" alt="WIN" title="Windows.hï¼Œé‚£ä¹ˆ">                </div>                <div class="image-caption">Windows.hï¼Œé‚£ä¹ˆ</div>            </figure></li><li>å†æ¬¡ï¼Œè§‚å¯Ÿç¬¬äºŒä¸ªè¡¨è¾¾å¼ï¼Œä¹Ÿæ˜¯æŸ¥æ‰¾å­—æ®µæ˜¯å¦å®šä¹‰è¿‡ï¼Œè¿™ä¸ªæŸ¥äº†ä¸€ä¸‹ï¼Œå‘ç°è¿™ä¸ªå®å®šä¹‰æ˜¯å­˜åœ¨äºopencv.dllè¿™ä¸ªæ–‡ä»¶é‡Œé¢çš„ã€‚ä¹Ÿå°±æ˜¯åˆ¤æ–­æ˜¯å¦å·²ç»é“¾æ¥äº†åŠ¨æ€åº“ã€‚</li><li>è¿™æ ·è¿™ä¸€è¡Œä¾¿å¾ˆå®¹æ˜“æ‡‚äº†ï¼Œç›®çš„ä¾¿æ˜¯åˆ¤æ–­ç¨‹åºç¯å¢ƒ<strong>æ˜¯å¦ä¸ºWindows</strong>ä¸”å·²ç»é“¾æ¥opencv.dllçš„åº“ç”¨ä»¥è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚</li><li>å†æä¸€å¥ï¼Œå…³äºè¿™ä¸ªæ“ä½œç³»ç»Ÿ(ç¯å¢ƒ)çš„åˆ¤å®šå…¶å®è¿˜æœ‰å¾ˆå¤šï¼Œè¿™é‡Œæ”¾ä¸€ä¸ª<a href="https://github.com/qt/qt/blob/4.8/src/corelib/global/qglobal.h" target="_blank" rel="noopener">Qté‡Œé¢å…³äºç³»ç»Ÿåˆ¤å®šçš„å¤´æ–‡ä»¶(147è¡Œå¼€å§‹)(ç‰ˆæœ¬æ¯”è¾ƒè€äº† å¯è‡ªè¡Œå†è‡ªå·±qté‡ŒæŸ¥çœ‹)</a></li></ol></li><li><code># define CV_EXPORTS __declspec(dllexport)</code><br>è¿™ä¸€å¥æ¶‰åŠåˆ°çš„ä¸»è¦æ˜¯dllå‡½æ•°å¯¼å…¥ï¼Œéœ€è¦å’Œä¸‹é¢æœ€åä¸‰è¡Œè”åˆèµ·æ¥çœ‹<br><code>#define CV_EXPORTS</code><br>ç¬¬äºŒè¡Œéœ€è¦è”åˆä¸Šé¢è¿™å¥ä¸€åŒåˆ†æï¼Œé¦–å…ˆï¼Œè¿™ä¸ªå¤´æ–‡ä»¶å†…éƒ¨å†™çš„éƒ½æ˜¯æ¥å£ï¼Œéƒ½æ˜¯ä½œè€…è‡ªå·±ç¼–å†™ç•™ç»™åˆ«äººç”¨ä»¥è°ƒç”¨çš„ï¼Œå¹¶ä¸”ä»ç¬¬ä¸€ç‚¹åˆ†æçš„ç»“æœæ¥çœ‹ï¼Œè¿™äº›æ¥å£çš„<strong>å®ç°</strong>éƒ½æ˜¯æ”¾åœ¨opencv.dllæ–‡ä»¶ä¸­çš„ï¼Œè€Œç¬¬ä¸€è¡Œçš„åˆ¤æ–­ä¾¿æ˜¯åˆ¤æ–­ä½ æ˜¯å¦åœ¨æœ€éœ€è¦éšå¼è°ƒç”¨ï¼Œå¦‚æœæœ‰ï¼Œé‚£ä¹ˆç›´æ¥å¯ä»¥åˆ©ç”¨éšå¼è°ƒç”¨çš„æ–¹æ³•è¿›è¡Œ<a href="https://blog.csdn.net/W_Y2010/article/details/80428067" target="_blank" rel="noopener"><strong>å‡½æ•°å¯¼å‡º(å…·ä½“__declspecä¹Ÿæœ‰åœ¨å¾®è½¯æ–‡æ¡£é‡Œå†™)</strong></a><br>åä¹‹ï¼Œå¦‚æœåˆ¤æ–­äº‹å…ˆæœªè¿›è¡Œé“¾æ¥ï¼Œé‚£ä¹ˆä½¿ç”¨çš„æ—¶å€™å¿…ç„¶æ˜¯æ˜¾å¼è°ƒç”¨(æ²¡é”™ï¼Œå°±æ˜¯é…ç½®ç¯å¢ƒçš„æ—¶å€™é…ç½®çš„libæ–‡ä»¶é“¾æ¥ï¼Œé‚£å°±æ˜¯æ˜¾å¼è°ƒç”¨äº†<a href="https://wenku.baidu.com/view/f7a24236b52acfc789ebc999.html" target="_blank" rel="noopener">å‚è€ƒæ­¤ç¯‡æ–‡ç« </a>)ï¼Œæ—¢ç„¶æ˜¯æ˜¾å¼è°ƒç”¨ï¼Œè‡ªç„¶ä¾¿ä¸éœ€è¦è¿›è¡Œå‡½æ•°å¯¼å‡ºæ“ä½œã€‚æ‰€ä»¥å°†<code>CV_EXPORTS</code>å­—æ®µè®¾ç½®ä¸ºç©ºã€‚</li><li><code>elif defined __GNUC__ &amp;&amp; __GNUC__ &gt;= 4</code><br><code>define CV_EXPORTS __attribute__((visibility(&quot;default&quot;)))</code><br>è¿™ä¸¤å¥æ¶‰åŠçš„ä¸»è¦æœ‰ä¸¤ä¸ªåŠŸèƒ½: 1. <a href="https://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html" target="_blank" rel="noopener">åˆ¤æ–­æ˜¯å¦ä¸ºGCCç¼–è¯‘ç¯å¢ƒ</a> 2. <a href="https://blog.csdn.net/mutourenzhang/article/details/47803803" target="_blank" rel="noopener">ä¸ºå…¨å±€åŠ¨æ€åº“å‡½æ•°è®¾ç½®ééšè—å£°æ˜</a><br>å¯¹äºç¬¬ä¸€ç‚¹ï¼Œç±»ä¼¼äºåˆ†æç¬¬ä¸€æ¡ï¼Œå¯ä»¥çŸ¥é“è¿™å¥çš„æ„æ€ä¾¿æ˜¯æ£€æŸ¥gccå¹¶æµ‹è¯•æ˜¯å¦é«˜äº4.0.0ç‰ˆæœ¬(çŒœæµ‹ä¸c++æ ‡å‡†æœ‰å…³)</li></ol></li><li><code>void</code><br>å‡½æ•°è¿”å›å€¼ï¼Œè¿™é‡Œè¿”å›å€¼ä¸ºç©º</li><li><code>GaussianBlur</code><br>å‡½æ•°åï¼Œè¿™é‡Œå› ä¸ºæ˜¯å£°æ˜æ‰€ä»¥æ˜¯è·Ÿæºç çš„å‡½æ•°ä¸€æ ·ï¼Œå¯ä»¥å¾ˆå¿«æ‰¾åˆ°æºç å®šä¹‰ã€‚</li><li><code>()</code><br>æ‹¬å·é‡Œé¢çš„æ˜¯å‡½æ•°å‚æ•°æ ¹æ®ä¸Šé¢çš„è¯´æ˜æ³¨é‡Šï¼Œä¾¿å¯è§£è¯»å‡ºè¿™ä¸ªå‡½æ•°æ‰€æœ‰å‚æ•°æ„ä¹‰:<ul><li><code>src</code>  è¿™æ˜¯è¾“å…¥å›¾åƒï¼Œè¿™ä¸ªå›¾åƒå¯ä»¥æ‹¥æœ‰ä»»æ„æ•°é‡çš„é€šé“ï¼Œè¿™äº›é€šé“æ˜¯ç‹¬ç«‹å¤„ç†çš„ï¼Œä½†æ·±åº¦åº”è¯¥æ˜¯CV_8Uï¼ŒCV_16Uï¼ŒCV_16Sï¼ŒCV_32Fæˆ–CV_64Fã€‚</li><li><code>dst</code> è¿™æ˜¯è¾“å‡ºå›¾åƒï¼Œå¤§å°ä¸ç±»å‹ä¸srcç›¸åŒã€‚</li><li><code>ksize</code> è¿™æ˜¯å·ç§¯æ ¸çš„å¤§å°å‚æ•°(æ˜¯æ•°å­—desu)ã€‚å…¶ä¸­ksize.widthå’Œksize.heightå¯ä»¥ä¸åŒï¼Œä½†æ˜¯å®ƒä»¬å¿…é¡»æ˜¯ä¸€ä¸ªæ­£å¥‡æ•°(æˆ–è€…é›¶)ï¼Œå¹¶ä¸”æ‚¨ä¸ç”¨æ‹…å¿ƒå·ç§¯æ ¸å†…éƒ¨å‚æ•°é—®é¢˜ï¼Œå·ç§¯æ ¸ä¼šæ ¹æ®sigmaæ¥è®¡ç®—ã€‚</li><li><code>sigmaX</code> Xæ–¹å‘çš„å·ç§¯æ ¸æ ‡å‡†åå·®ã€‚</li><li><code>sigmaY</code> Yæ–¹å‘çš„é«˜æ–¯æ ¸æ ‡å‡†åå·®; å¦‚æœsigmaYä¸ºé›¶ï¼Œåˆ™è®¾ç½®ä¸ºç­‰äºsigmaXï¼Œå¦‚æœä¸¤ä¸ªsigmaéƒ½æ˜¯é›¶ï¼Œåˆ™å®ƒä»¬æ˜¯ä»ksize.widthå’Œksize.heightè®¡ç®—çš„ï¼ˆè¯¦è§cv :: getGaussianKernelï¼‰; è¿™äº›è¯­ä¹‰æœªæ¥å‡æœ‰å¯èƒ½ä¿®æ”¹ï¼Œå»ºè®®æŒ‡å®šæ‰€æœ‰ksizeï¼ŒsigmaXå’ŒsigmaYã€‚</li><li><code>borderType</code> åƒç´ å¤–æ¨æ¨¡å¼ï¼Œè¯·å‚é˜…cv :: BorderTypes</li><li><code>sepFilter2D, filter2D, blur, boxFilter, bilateralFilter, medianBlur</code>ã€‚è¿™é‡Œæ˜¾ç¤ºäº†å‡½æ•°çš„ç›¸å…³å‡½æ•°ï¼Œæ˜¯è§‚å¯Ÿæºç çš„é‡è¦æç¤º</li></ul></li></ol><p>è¿™æ ·ï¼Œå¯¹äºå‡½æ•°æ¥å£çš„è§£æå°±ç®—æ˜¯å®Œæˆäº†ï¼Œä»ä¸­æˆ‘ä»¬å¯ä»¥å¾—å‡ºä»¥ä¸‹å‡ ä¸ªç»“è®ºï¼š</p><ol><li>ç›´æ¥ctrlå¯»æ‰¾åˆ°åº•æ˜¯ä¸èƒ½æ‰¾åˆ°åŸå‡½æ•°ä»£ç çš„ã€‚</li><li>æ‰¾åˆ°åŸå‡½æ•°çš„åŒæ—¶ä¹Ÿéœ€è¦sepFilter2D, filter2D, blur, boxFilter, bilateralFilter, medianBlurè¿™ä¸€äº›åˆ—å‡½æ•°è¾…åŠ©ç†è§£ã€‚</li><li>è¿™ä¸ªå‡½æ•°åœ¨cvå‘½åç©ºé—´ä¸­ï¼Œåç§°åº”è¯¥ä¸º<code>cv::GaussianBlur</code> ã€‚</li></ol><p>æ‰€ä»¥æ¥ä¸‹æ¥ç¬¬ä¸€æ­¥ä¾¿æ˜¯éœ€è¦åœ¨æºç ä¸­å¯»æ‰¾åˆ°çœŸæ­£çš„å‡½æ•°å®ç°ã€‚</p><h2 id="æºç è§£æ"><a href="#æºç è§£æ" class="headerlink" title="æºç è§£æ"></a>æºç è§£æ</h2><h3 id="ç†è§£é«˜æ–¯æ¨¡ç³Šå‡½æ•°"><a href="#ç†è§£é«˜æ–¯æ¨¡ç³Šå‡½æ•°" class="headerlink" title="ç†è§£é«˜æ–¯æ¨¡ç³Šå‡½æ•°"></a>ç†è§£é«˜æ–¯æ¨¡ç³Šå‡½æ•°</h3><p>é«˜æ–¯æ¨¡ç³Šå‡½æ•°æœ¬è´¨æ˜¯åˆ©ç”¨<strong>é«˜æ–¯æ»¤æ³¢å™¨</strong>å¯¹äºç»™å®šå›¾åƒè¿›è¡Œ<strong>å¹³æ»‘</strong>æ“ä½œã€‚å¹³æ»‘æ“ä½œæ—¶ä»€ä¹ˆï¼Œæ˜¯å‡å°‘å™ªç‚¹ã€‚å™ªç‚¹çš„åŸå› åˆæ˜¯ä»€ä¹ˆï¼Œæ˜¯å•ä¸ªåƒç´ åŒ…å«çš„ä¿¡æ¯è¿‡äºç‹¬ç«‹ã€‚å¦‚ä½•å‡å°‘å™ªç‚¹ï¼Œå¾ˆç®€å•ï¼Œåªéœ€è¦è®©æ¯ä¸ªåƒç´ ç‚¹åŒ…å«æœ‰å‘¨å›´åƒç´ çš„éƒ¨åˆ†ä¿¡æ¯å°±è¡Œäº†å‘—ã€‚é€‰ç”¨ä»€ä¹ˆæ–¹æ³•ï¼Œæœ€ç®€å•çš„æ–¹æ³•ä¾¿æ˜¯â€”â€”å·ç§¯(è§ä¸‹å›¾)ã€‚åˆ©ç”¨ä¸€ä¸ªç»™å®šçš„ä»¥æŸç§åˆ†å¸ƒå‡½æ•°æ„å»ºçš„äºŒç»´å·ç§¯å†…æ ¸ï¼Œå°†ä¸­å¿ƒç‚¹å¯¹å‡†åƒç´ ç‚¹ï¼Œè¿›è¡Œå·ç§¯æ“ä½œï¼Œå¾—åˆ°çš„åƒç´ ç‚¹ä¾¿åŒ…å«äº†å‘¨å›´åƒç´ çš„ä¸å®Œå…¨ä¿¡æ¯ï¼Œè¿™æ ·å­é™„è¿‘çš„åƒç´ ç‚¹å·®å¼‚æ€§ä¾¿ä¼šè¶Šæ¥è¶Šå°ï¼Œå½“æ•´å¼ å›¾åƒ(æˆ–é€‰ä¸­éƒ¨åˆ†)å·ç§¯å®Œæˆåï¼Œæ¯ä¸ªåƒç´ ç‚¹ä¾¿ä¸å†è¿‡äºç‹¬ç«‹ï¼Œæ¯ä¸ªä¾¿æœ‰äº†é™„è¿‘åƒç´ ç‚¹çš„ä¿¡æ¯ï¼Œè¿™æ ·å­—å›¾åƒä¾¿ä¸ä¼šçœ‹ä¸Šå»é‚£ä¹ˆçš„â€œæ‰çœ¼â€ï¼Œä¼šæ¸©æ¶¦å¹³æ»‘è®¸å¤šï¼Œè¿™å°±æ˜¯é«˜æ–¯æ¨¡ç³Šçš„æœ¬è´¨äº†ã€‚</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/å·ç§¯.png" alt="å·ç§¯æ“ä½œ" title="">                </div>                <div class="image-caption">å·ç§¯æ“ä½œ</div>            </figure><center>[ç›¸ä¿¡çœ‹å›¾å¤§æ¦‚å¤§å®¶å°±èƒ½æ˜ç™½å·ç§¯æ˜¯ä¸ªå•¥ä¸œè¥¿äº† å†ç»“åˆä¸Šé¢è¯­å¥åº”è¯¥å°±å·®ä¸å¤šäº†]</center><h3 id="æŸ¥æ‰¾å‡½æ•°"><a href="#æŸ¥æ‰¾å‡½æ•°" class="headerlink" title="æŸ¥æ‰¾å‡½æ•°"></a>æŸ¥æ‰¾å‡½æ•°</h3><p>åˆ©ç”¨grepå‘½ä»¤ï¼Œå¾ˆå®¹æ˜“ä¾¿èƒ½æ‰¾åˆ°è¿™ä¸ªå‡½æ•°ï¼Œæ‰¾åˆ°æ–‡ä»¶å¹¶åˆ‡åˆ°è¿™ä¸ªå‡½æ•°å®šä¹‰ï¼Œä¾¿å¯ä»¥çª¥è§æ•´ä¸ªå‡½æ•°çš„å…¨è²Œäº†ã€‚</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/å…³é”®å­—æŸ¥æ‰¾1.png" alt="æŸ¥æ‰¾" title="">                </div>                <div class="image-caption">æŸ¥æ‰¾</div>            </figure><p>ä»¥ä¸‹æ˜¯cv::GaussianBlurå‡½æ•°å…¨è²Œ:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/å‡½æ•°1.png" alt="func1" title="">                </div>                <div class="image-caption">func1</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/å‡½æ•°2.png" alt="func2" title="">                </div>                <div class="image-caption">func2</div>            </figure><h3 id="åˆ†æå‡½æ•°"><a href="#åˆ†æå‡½æ•°" class="headerlink" title="åˆ†æå‡½æ•°"></a>åˆ†æå‡½æ•°</h3><p>åˆ†æè¿™ä¸ªå‡½æ•°ä¹‹å‰ï¼Œé¦–å…ˆå…ˆè¦ä»å†…éƒ¨å…³è”çš„å‡½æ•°çœ‹èµ·ã€‚</p><h4 id="CV-INSTRUMENT-REGION"><a href="#CV-INSTRUMENT-REGION" class="headerlink" title="CV_INSTRUMENT_REGION()"></a>CV_INSTRUMENT_REGION()</h4><p>è¿™ä¸€è¡Œæœ«å°¾æ²¡æœ‰åˆ†å·ï¼Œè¿™æ ·çš„ç±»ä¼¼å‡½æ•°çš„å­—ç¬¦æ®µæœ‰å¾ˆå¤§å¯èƒ½æ˜¯ä¸€ä¸ªå®å®šä¹‰å˜é‡ï¼Œç»æŸ¥æ‰¾ï¼Œåœ¨private.hppæ–‡ä»¶ä¸­æœ‰ä»¥ä¸‹å®šä¹‰ï¼š</p><blockquote><p> ///// General instrumentation<br> // General OpenCV region instrumentation macro<br> #define CV_INSTRUMENT_REGION() CV_INSTRUMENT_REGION_META(cv::instr::TYPE_GENERAL, cv::instr::IMPL_PLAIN) </p></blockquote><p>ç»æŸ¥æ‰¾ï¼Œè¿™ä¸ªå­—æ®µä¸»è¦æ˜¯å…³äºåˆå§‹åŒ–ä»¥åŠè¾¹ç•Œç±»å‹çš„åˆ¤æ–­ã€‚</p><h4 id="if-borderType-BORDER-CONSTANT-amp-amp-borderType-amp-BORDER-ISOLATED-0"><a href="#if-borderType-BORDER-CONSTANT-amp-amp-borderType-amp-BORDER-ISOLATED-0" class="headerlink" title="if( borderType != BORDER_CONSTANT &amp;&amp; (borderType &amp; BORDER_ISOLATED) != 0 )"></a>if( borderType != BORDER_CONSTANT &amp;&amp; (borderType &amp; BORDER_ISOLATED) != 0 )</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> type = _src.type();</span><br><span class="line">Size <span class="built_in">size</span> = _src.<span class="built_in">size</span>();</span><br><span class="line">_dst.create( <span class="built_in">size</span>, type );</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    æ ¹æ®è¯´æ˜æ–‡æ¡£ä¸­æ‰€å†™çš„</span></span><br><span class="line"><span class="comment">    BORDER_CONSTANT    = 0, //!&lt; `iiiiii|abcdefgh|iiiiiii`with some specified `i`</span></span><br><span class="line"><span class="comment">    BORDER_REPLICATE   = 1, //!&lt; `aaaaaa|abcdefgh|hhhhhhh`</span></span><br><span class="line"><span class="comment">    BORDER_REFLECT     = 2, //!&lt; `fedcba|abcdefgh|hgfedcb`</span></span><br><span class="line"><span class="comment">    BORDER_WRAP        = 3, //!&lt; `cdefgh|abcdefgh|abcdefg`</span></span><br><span class="line"><span class="comment">    BORDER_REFLECT_101 = 4, //!&lt; `gfedcb|abcdefgh|gfedcba`</span></span><br><span class="line"><span class="comment">    BORDER_TRANSPARENT = 5, //!&lt; `uvwxyz|absdefgh|ijklmno`</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    BORDER_REFLECT101  = BORDER_REFLECT_101, //!&lt; same as BORDER_REFLECT_101</span></span><br><span class="line"><span class="comment">    BORDER_DEFAULT     = BORDER_REFLECT_101, //!&lt; same as BORDER_REFLECT_101</span></span><br><span class="line"><span class="comment">    BORDER_ISOLATED    = 16 //!&lt; do not look outside of ROI</span></span><br><span class="line"><span class="comment">    </span></span><br><span class="line"><span class="comment">    BORDER_CONSTANT éœ€è¦è®¾ç½®borderValue æŒ‡å®š ' i ' å€¼ï¼ˆå¸¸æ•°ï¼‰</span></span><br><span class="line"><span class="comment">    BORDER_REPLICATE ï¼Œå¤åˆ¶è¾¹ç•Œåƒç´ </span></span><br><span class="line"><span class="comment">    BORDER_REFLECT  ï¼Œåå°„å¤åˆ¶è¾¹ç•Œåƒç´    </span></span><br><span class="line"><span class="comment">    BORDER_REFLECT_101ï¼Œä»¥è¾¹ç•Œä¸ºå¯¹ç§°è½´åå°„å¤åˆ¶åƒç´ </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è¿™é‡Œæ˜¯è¯´å¦‚æœè¾¹ç¼˜æ‰©å±•ä¸æ˜¯å¸¸æ•°æ‰©å±•ï¼Œä¸”åœ¨è§„å®šå›¾åƒèŒƒå›´å†…éƒ¨ï¼Œä¾¿æ‰§è¡Œä¸‹åˆ—æ“ä½œ</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">if</span>( borderType != BORDER_CONSTANT &amp;&amp; (borderType &amp; BORDER_ISOLATED) != <span class="number">0</span> )</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å¦‚æœè¾“å…¥çŸ©é˜µæ˜¯ä¸€ä¸ªè¡Œå‘é‡ï¼Œåˆ™æ»¤æ³¢æ ¸çš„é«˜å¼ºåˆ¶ä¸º1</span></span><br><span class="line">    <span class="comment">// ä¸‹é¢åŒç†</span></span><br><span class="line">    <span class="keyword">if</span>( <span class="built_in">size</span>.<span class="built_in">height</span> == <span class="number">1</span> )</span><br><span class="line">        ksize.<span class="built_in">height</span> = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>( <span class="built_in">size</span>.<span class="built_in">width</span> == <span class="number">1</span> )</span><br><span class="line">        ksize.<span class="built_in">width</span> = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœæ ¸å®½è·Ÿæ ¸é«˜éƒ½æ˜¯ä¸€ç›´æ¥å¤åˆ¶è¾“å‡º</span></span><br><span class="line"><span class="keyword">if</span>( ksize.<span class="built_in">width</span> == <span class="number">1</span> &amp;&amp; ksize.<span class="built_in">height</span> == <span class="number">1</span> )</span><br><span class="line">&#123;</span><br><span class="line">    _src.copyTo(_dst);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="CV-OVX-RUN-true-openvx-gaussianBlur-src-dst-ksize-sigma1-sigma2-borderType"><a href="#CV-OVX-RUN-true-openvx-gaussianBlur-src-dst-ksize-sigma1-sigma2-borderType" class="headerlink" title="CV_OVX_RUN(true, openvx_gaussianBlur(_src, _dst, ksize, sigma1, sigma2, borderType))"></a>CV_OVX_RUN(true, openvx_gaussianBlur(_src, _dst, ksize, sigma1, sigma2, borderType))</h4><p>è¿™é‡Œå¾ˆæ˜æ˜¾æ˜¯ä¸€ä¸ªè¢«å®å®šä¹‰çš„å­—æ®µï¼Œé€šè¿‡æŸ¥æ‰¾ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ‰¾åˆ°å…¶å®šä½åœ¨<code>modules/core/include/opencv2/core/openvx/ovx_defs.hpp</code>å½“ä¸­</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/å‡½æ•°3.png" alt="func3" title="">                </div>                <div class="image-caption">func3</div>            </figure><p>æŒ‰æ¯è¡Œè§£æçš„è¯å°±æ˜¯å¦‚ä¸‹:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”¨äºæ£€æµ‹åŸºäºOpenVXçš„å®ç°çš„å®ç”¨ç¨‹åºå®</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> HAVE_OPENVX</span></span><br><span class="line"><span class="comment">// å¦‚æœæ£€æµ‹åˆ°OPENVXä¾¿æ‰§è¡Œä¸‹åˆ—è¯­å¥</span></span><br><span class="line"><span class="comment">// ä¸‹é¢è¿™ä¸¤å¥ä¸»è¦ä½œç”¨ä¹Ÿæ˜¯æ ‡è¯†</span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">define</span> IVX_HIDE_INFO_WARNINGS <span class="comment">// éšè—è­¦å‘Šä¿¡æ¯</span></span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">define</span> IVX_USE_OPENCV <span class="comment">// ä½¿ç”¨opencvçš„æ ‡è¯†</span></span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ivx.hpp"</span> <span class="comment">// å°†hppæ–‡ä»¶åŒ…å«è¿›æ¥</span></span></span><br><span class="line"></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">define</span> CV_OVX_RUN(condition, func, ...)          \ <span class="comment">// ...ä¼šè¢«æ›¿æ¢</span></span></span><br><span class="line">    <span class="comment">// è¿™é‡Œä¸ºäº†ç»™å¤–ç•Œæä¾›OpenVXä½¿ç”¨è¡¨ç¤º åˆ©ç”¨å®å®šä¹‰åšæˆäº†ä¸€ä¸ªæ¥å£</span></span><br><span class="line"><span class="comment">// è€Œè¿™ä¸ªæ¥å£åˆ™æ˜¯ä¸»è¦ä¸ºäº†æä¾›ç¡¬ä»¶å±‚é¢åŠ é€Ÿç”¨çš„(ä¸»è¦é¢å‘å¯¹è±¡æ˜¯åµŒå…¥å¼è®¾è®¡)</span></span><br><span class="line">        <span class="keyword">if</span> (cv::useOpenVX() &amp;&amp; (condition) &amp;&amp; func)   \</span><br><span class="line">        &#123;                                             \</span><br><span class="line">        <span class="comment">// __VA_ARGS__æ˜¯å¯å˜å‚æ•°å®å®šä¹‰ ç”¨ä»¥æ›¿æ¢ä¸Šé¢...çš„å†…å®¹</span></span><br><span class="line">            <span class="keyword">return</span> __VA_ARGS__;                       \</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="comment">// å¦åˆ™ä¾¿æ‰§è¡Œä¸‹é¢è¿™æ¡</span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">define</span> CV_OVX_RUN(condition, func, ...)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// HAVE_OPENVX</span></span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>useOpenVX()</code>å‡½æ•°ä¸»è¦æ˜¯è¿”å›ä¸€ä¸ªboolç±»å‹çš„å˜é‡ç”¨ä»¥åˆ¤æ–­æ˜¯å¦ä½¿ç”¨openVXç”¨ä»¥è®¡ç®—ã€‚</p><p>æ‰€ä»¥<code>CV_OVX_RUN()</code>è¿™å¥è¯ä¾¿æ˜¯å¯¹äºåµŒå…¥å¼è®¾è®¡è¿›è¡Œå°è¯•æ€§çš„ä¼˜åŒ–æ“ä½œã€‚</p><h4 id="ifdefè‡³endiféƒ¨åˆ†"><a href="#ifdefè‡³endiféƒ¨åˆ†" class="headerlink" title="ifdefè‡³endiféƒ¨åˆ†"></a>ifdefè‡³endiféƒ¨åˆ†</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è‹¥ä¹‹å‰æœ‰è¿‡HAVE_TEGRA_OPTIMIZATIONä¼˜åŒ–é€‰é¡¹çš„å®šä¹‰ï¼Œåˆ™æ‰§è¡Œå®ä½“ä¸­çš„tegraä¼˜åŒ–ç‰ˆå‡½æ•°å¹¶è¿”å›</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> HAVE_TEGRA_OPTIMIZATION</span></span><br><span class="line"><span class="comment">// æ‹·è´åˆ°ä¸´æ—¶å˜é‡(æš‚ä¸çŸ¥ä¸ºä»€ä¹ˆè¦æ‹·è´åˆ°ä¸€ä¸ªä¸´æ—¶å˜é‡é‡Œé¢å»)</span></span><br><span class="line">    Mat src = _src.getMat();</span><br><span class="line">    Mat dst = _dst.getMat();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(sigma1 == <span class="number">0</span> &amp;&amp; sigma2 == <span class="number">0</span> &amp;&amp; tegra::useTegra() &amp;&amp; tegra::gaussian(src, dst, ksize, borderType))</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œä¹Ÿæ˜¾è€Œæ˜“è§æ˜¯å°è¯•tegraä¼˜åŒ–ã€‚</p><p>ä½†æ˜¯ä¸ºä»€ä¹ˆæ‹·è´åˆ°ä¸´æ—¶å˜é‡é‡Œä¹Ÿå¯ä»¥æ”¹å˜åŸå€¼ï¼Œè¿™é‡Œéœ€è¦è¿›ä¸€æ­¥åˆ°Matå˜é‡çš„è¿ç®—ç¬¦é‡è½½é‡Œé¢è¿›è¡Œå‚è€ƒã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">inline</span></span><br><span class="line">Mat&amp; Mat::<span class="keyword">operator</span> = (<span class="keyword">const</span> Mat&amp; m)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>( <span class="keyword">this</span> != &amp;m )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>( m.u )</span><br><span class="line">            CV_XADD(&amp;m.u-&gt;refcount, <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">release</span>(); <span class="comment">// å½’é›¶åˆå§‹åŒ–</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">        å½’é›¶åè¿›è¡ŒåŸºæœ¬æ•°æ®å…±äº«</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        flags = m.flags;</span><br><span class="line">        <span class="keyword">if</span>( dims &lt;= <span class="number">2</span> &amp;&amp; m.dims &lt;= <span class="number">2</span> )</span><br><span class="line">        &#123;</span><br><span class="line">            dims = m.dims;</span><br><span class="line">            rows = m.rows;</span><br><span class="line">            cols = m.cols;</span><br><span class="line">            <span class="built_in">step</span>[<span class="number">0</span>] = m.<span class="built_in">step</span>[<span class="number">0</span>];</span><br><span class="line">            <span class="built_in">step</span>[<span class="number">1</span>] = m.<span class="built_in">step</span>[<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            copySize(m);</span><br><span class="line">        data = m.data;</span><br><span class="line">        datastart = m.datastart; <span class="comment">// å…±äº«æ•°æ®å¤´</span></span><br><span class="line">        dataend = m.dataend; <span class="comment">// å…±äº«æ•°æ®å°¾</span></span><br><span class="line">        datalimit = m.datalimit;</span><br><span class="line">        allocator = m.allocator; <span class="comment">// å†…å­˜å…±äº«</span></span><br><span class="line">        u = m.u;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>; <span class="comment">// è¿”å›å½“å‰å¯¹è±¡çš„å¼•ç”¨</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥å‘ç°åœ¨<code>=</code>é‡è½½çš„æ—¶å€™ä»…æ˜¯è¿›è¡Œçš„æµ…æ‹·è´æ“ä½œï¼Œæ„æ€æ˜¯åªå°†æ•°æ®å¤´æ•°æ®å°¾è¿›è¡Œå¤åˆ¶ï¼Œè€Œæ‰€æœ‰æ•°æ®çš„å†…å­˜æ•°æ®éƒ½æ˜¯ç›¸é€šå…±äº«çš„ã€‚å›ºä»…éœ€è¦ä¸€æ–¹å˜é‡æ›´æ”¹ä¾¿ä¼šè”åŠ¨æ‰€æœ‰å¯¹å…¶è¿›è¡Œè¿‡æµ…æ‹·è´çš„å˜é‡å˜åŒ–ã€‚</p><h4 id="å‰©ä¸‹éƒ¨åˆ†"><a href="#å‰©ä¸‹éƒ¨åˆ†" class="headerlink" title="å‰©ä¸‹éƒ¨åˆ†"></a>å‰©ä¸‹éƒ¨åˆ†</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">è¿™é‡Œä¸»è¦æ˜¯é’ˆå¯¹opencl(GPUåŠ é€Ÿ)æ— æ³•ä½¿ç”¨çš„æƒ…å†µè¿›è¡ŒCPUç‰ˆæœ¬è®¡ç®—</span></span><br><span class="line"><span class="comment">è¿™ä¸ªIPPæ˜¯ä¸€ä¸ªIntelæä¾›çš„å¼€æºçš„è®¡ç®—æœºè§†è§‰åŠ é€Ÿåº“ï¼Œå¯ä»¥æä¾›å¾ˆå¤šç®—æ³•çš„Intelä¸“å±çš„å¤šçº¿ç¨‹ä¼˜åŒ–æ–¹æ¡ˆAPIï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¸‹é¢åœ¨openclçš„gpuä¼˜åŒ–ä»£ç ä¹‹åè¿˜åˆæ·»åŠ äº†åˆ©ç”¨CPUç‰ˆæœ¬çš„filter2Dçš„è®¡ç®—æ–¹æ¡ˆ(å› ä¸ºæœ‰éƒ¨åˆ†Intelä¸“å±çš„ä¼˜åŒ–å‡½æ•°ï¼Œé’ˆå¯¹APUå’Œè€å¼çš„Intel CPU(09å¹´ä¹‹å‰)æ— æ³•è¿›è¡Œè®¡ç®—ï¼Œæ‰€ä»¥åªèƒ½é€‰å–æœ€æ™®é€šçš„filter2Dè®¡ç®—æ–¹æ¡ˆæ‰§è¡Œ)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">å®˜ç½‘FAQ(æœ‰å…´è¶£å¯ä»¥äº†è§£ä¸€ä¸‹): https://software.intel.com/en-us/articles/intel-integrated-performance-primitives-intel-ipp-open-source-computer-vision-library-opencv-faq/</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">CV_IPP_RUN(!(ocl::useOpenCL() &amp;&amp; _dst.isUMat()), ipp_GaussianBlur( _src,  _dst,  ksize, sigma1,  sigma2, borderType));</span><br><span class="line"></span><br><span class="line">Mat kx, ky;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">è¿™é‡Œæ˜¯æ–°å»ºä¸€ä¸ªé«˜æ–¯å·ç§¯å†…æ ¸(åé¢è®²)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">createGaussianKernels(kx, ky, type, ksize, sigma1, sigma2);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">è¿™é‡Œæ˜¯é’ˆå¯¹ksize = 3 or 5çš„æƒ…å†µåšäº†openclä¼˜åŒ–(Aå¡Nå¡å‡å¯äº«å—openclä¼˜åŒ–qwq)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">CV_OCL_RUN(_dst.isUMat() &amp;&amp; _src.dims() &lt;= <span class="number">2</span> &amp;&amp;</span><br><span class="line">           ((ksize.<span class="built_in">width</span> == <span class="number">3</span> &amp;&amp; ksize.<span class="built_in">height</span> == <span class="number">3</span>) ||</span><br><span class="line">            (ksize.<span class="built_in">width</span> == <span class="number">5</span> &amp;&amp; ksize.<span class="built_in">height</span> == <span class="number">5</span>)) &amp;&amp;</span><br><span class="line">           (<span class="keyword">size_t</span>)_src.rows() &gt; ky.total() &amp;&amp; (<span class="keyword">size_t</span>)_src.cols() &gt; kx.total(),</span><br><span class="line">           ocl_GaussianBlur_8UC1(_src, _dst, ksize, CV_MAT_DEPTH(type), kx, ky, borderType));</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">è¿™é‡Œä¾¿æ˜¯åˆ©ç”¨filter2Dè¿›è¡Œæ“ä½œäº†</span></span><br><span class="line"><span class="comment">ä¼ å…¥Point(-1, -1) æ˜¯æŒ‡å†…æ ¸ä¸­çš„é”šç‚¹(å°±æ˜¯åé¢çš„anchor)ä½ç½®ã€‚é»˜è®¤å€¼ï¼ˆ-1ï¼Œ-1ï¼‰è¡¨ç¤ºé”šç‚¹ä½äºå†…æ ¸ä¸­å¿ƒã€‚</span></span><br><span class="line"><span class="comment">0 åˆ™æ˜¯å­˜å‚¨å•ä½ é»˜è®¤æ˜¯0 åé¢ä¼šé€šè¿‡è®¡ç®—æ”¹å˜å¹¶å­˜å‚¨</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">sepFilter2D(_src, _dst, CV_MAT_DEPTH(type), kx, ky, Point(<span class="number">-1</span>,<span class="number">-1</span>), <span class="number">0</span>, borderType);</span><br></pre></td></tr></table></figure><p>è¿™é‡Œåœ¨ä¸‹ä¸»è¦è§£æ<code>createGaussianKernels</code>ä¸<code>sepFilter2D</code>è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œä¸»è¦æ˜¯å› ä¸ºæ— è®ºæ˜¯<code>openvx_gaussianBlur</code>è¿˜æ˜¯<code>ipp_GaussianBlur</code>ä»¥åŠ<code>ocl_GaussianBlur_8UC1</code>éƒ½æœ‰ç€å¤§é‡æœªçŸ¥çš„APIï¼Œè¦è¯»æ‡‚è¿™äº›APIè¿˜éœ€è¦å¤§é‡æ–‡æ¡£æŸ¥é˜…ï¼Œåœ¨ä¸‹åœ¨æ­¤å°±å…ˆä¸è§£æäº†ã€‚</p><p>æ‰€ä»¥é¦–å…ˆå…ˆæ¥çœ‹ä¸€ä¸‹<code>createGaussianKernels</code>è¿™ä¸ªå‡½æ•°ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">è¿™ä¸ªå‡½æ•°ä»…æ˜¯ç”¨äºæ˜¯åˆ›å»ºé«˜æ–¯å·ç§¯æ ¸</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">createGaussianKernels</span><span class="params">( Mat &amp; kx, Mat &amp; ky, <span class="keyword">int</span> type, Size ksize,</span></span></span><br><span class="line"><span class="function"><span class="params">                                   <span class="keyword">double</span> sigma1, <span class="keyword">double</span> sigma2 )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> depth = CV_MAT_DEPTH(type); <span class="comment">// æ ¹æ®è¾“å…¥å›¾åƒç±»å‹è·å¾—ä½æ·±åº¦</span></span><br><span class="line">    <span class="keyword">if</span>( sigma2 &lt;= <span class="number">0</span> )</span><br><span class="line">        sigma2 = sigma1; <span class="comment">// éæ­£åˆ™ä¸sigma1ç›¸åŒ</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»sigmaè‡ªåŠ¨æ£€æµ‹å†…æ ¸å¤§å°(å¦‚æœç”¨æˆ·æ²¡æœ‰è®¾ç½®ksizeçš„è¯)</span></span><br><span class="line">    <span class="comment">// æ ¹æ®CV_8Uæ¥è®¡ç®— å¤§è‡´æ¥è¿‘7*sigma æˆ–è€… 9*sigma</span></span><br><span class="line">    <span class="comment">// cvRoundå‡½æ•°è¿˜å†…è”äº†æ±‡ç¼– åœ¨ä¸‹çœ‹ä¸æ‡‚äº†</span></span><br><span class="line">    <span class="comment">// |1 çš„åŸå› æ˜¯ä½¿å®½é«˜ä¸ºå¥‡æ•°</span></span><br><span class="line">    <span class="keyword">if</span>( ksize.<span class="built_in">width</span> &lt;= <span class="number">0</span> &amp;&amp; sigma1 &gt; <span class="number">0</span> )</span><br><span class="line">        ksize.<span class="built_in">width</span> = cvRound(sigma1*(depth == CV_8U ? <span class="number">3</span> : <span class="number">4</span>)*<span class="number">2</span> + <span class="number">1</span>)|<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>( ksize.<span class="built_in">height</span> &lt;= <span class="number">0</span> &amp;&amp; sigma2 &gt; <span class="number">0</span> )</span><br><span class="line">        ksize.<span class="built_in">height</span> = cvRound(sigma2*(depth == CV_8U ? <span class="number">3</span> : <span class="number">4</span>)*<span class="number">2</span> + <span class="number">1</span>)|<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿™å¥åªæ˜¯ä¸ºäº†ä¿è¯å·ç§¯æ ¸çš„å®½è·Ÿé«˜æ˜¯æ­£å¥‡æ•°</span></span><br><span class="line">    CV_Assert( ksize.<span class="built_in">width</span> &gt; <span class="number">0</span> &amp;&amp; ksize.<span class="built_in">width</span> % <span class="number">2</span> == <span class="number">1</span> &amp;&amp;</span><br><span class="line">        ksize.<span class="built_in">height</span> &gt; <span class="number">0</span> &amp;&amp; ksize.<span class="built_in">height</span> % <span class="number">2</span> == <span class="number">1</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å–æœ€å¤§</span></span><br><span class="line">    sigma1 = <span class="built_in">std</span>::<span class="built_in">max</span>( sigma1, <span class="number">0.</span> );</span><br><span class="line">    sigma2 = <span class="built_in">std</span>::<span class="built_in">max</span>( sigma2, <span class="number">0.</span> );</span><br><span class="line"></span><br><span class="line">    kx = getGaussianKernel( ksize.<span class="built_in">width</span>, sigma1, <span class="built_in">std</span>::<span class="built_in">max</span>(depth, CV_32F) );</span><br><span class="line">    <span class="keyword">if</span>( ksize.<span class="built_in">height</span> == ksize.<span class="built_in">width</span> &amp;&amp; <span class="built_in">std</span>::<span class="built_in">abs</span>(sigma1 - sigma2) &lt; DBL_EPSILON )</span><br><span class="line">        <span class="comment">// è¿™é‡Œ å¦‚æœåˆ¤æ–­æ ¸é«˜ä¸æ ¸å®½ç›¸ç­‰ï¼Œä¸”sigmaç›¸å·®å¾ˆå°çš„æƒ…å†µä¸‹</span></span><br><span class="line">        <span class="comment">// ä¾¿å¯ä»¥ç›´æ¥è¿›è¡Œèµ‹å€¼æ“ä½œï¼Œå‡å°‘äº†è®¡ç®—é‡</span></span><br><span class="line">        ky = kx;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        ky = getGaussianKernel( ksize.<span class="built_in">height</span>, sigma2, <span class="built_in">std</span>::<span class="built_in">max</span>(depth, CV_32F) );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»ä¸­æˆ‘ä»¬è¿˜éœ€è¦è§£æ<code>getGaussianKernel</code>è¿™ä¸ªå‡½æ•°ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">cv::Mat <span class="title">cv::getGaussianKernel</span><span class="params">( <span class="keyword">int</span> n, <span class="keyword">double</span> sigma, <span class="keyword">int</span> ktype )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªå¸¸é‡ç”¨ä»¥è§„å®šå¤§å°</span></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">int</span> SMALL_GAUSSIAN_SIZE = <span class="number">7</span>;</span><br><span class="line">    <span class="comment">// ä¸€ä¸ª4 * 7çš„çŸ©é˜µï¼Œç”¨äºå¯¹å¥‡æ•°é•¿åº¦å°å†…æ ¸è¿›è¡Œä¼˜åŒ–è®¡ç®—</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">float</span> small_gaussian_tab[][SMALL_GAUSSIAN_SIZE] =</span><br><span class="line">    &#123;</span><br><span class="line">        &#123;<span class="number">1.f</span>&#125;,</span><br><span class="line">        &#123;<span class="number">0.25f</span>, <span class="number">0.5f</span>, <span class="number">0.25f</span>&#125;,</span><br><span class="line">        &#123;<span class="number">0.0625f</span>, <span class="number">0.25f</span>, <span class="number">0.375f</span>, <span class="number">0.25f</span>, <span class="number">0.0625f</span>&#125;,</span><br><span class="line">        &#123;<span class="number">0.03125f</span>, <span class="number">0.109375f</span>, <span class="number">0.21875f</span>, <span class="number">0.28125f</span>, <span class="number">0.21875f</span>, <span class="number">0.109375f</span>, <span class="number">0.03125f</span>&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    è¿™é‡Œè®¡ç®—æ»¤æ³¢ç³»æ•°ï¼ˆæ•°ç»„ï¼‰</span></span><br><span class="line"><span class="comment">    å¦‚æœ å†…æ ¸å°ºå¯¸ä¸ºå¥‡æ•° ä¸”å°äº7</span></span><br><span class="line"><span class="comment">    å¹¶ä¸”sigmaå°äºç­‰äº0</span></span><br><span class="line"><span class="comment">    é‚£ä¹ˆæ»¤æ³¢ç³»æ•°ä¾¿æ˜¯æ ¹æ®ä¸Šé¢çš„small_gaussian_tabå†³å®šçš„</span></span><br><span class="line"><span class="comment">    å¦åˆ™ä¾¿æ˜¯0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">float</span>* fixed_kernel = n % <span class="number">2</span> == <span class="number">1</span> &amp;&amp; n &lt;= SMALL_GAUSSIAN_SIZE &amp;&amp; sigma &lt;= <span class="number">0</span> ? small_gaussian_tab[n&gt;&gt;<span class="number">1</span>] : <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    æ£€æµ‹æ•°æ®ç±»å‹æ˜¯å¦ä¸ºfloatå’Œdouble</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    CV_Assert( ktype == CV_32F || ktype == CV_64F );</span><br><span class="line">    <span class="function">Mat <span class="title">kernel</span><span class="params">(n, <span class="number">1</span>, ktype)</span></span>; <span class="comment">// å»ºç«‹ä¸€ç»´å‘é‡</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å®šä¹‰æŒ‡é’ˆæŒ‡å‘æ•°æ®</span></span><br><span class="line">    <span class="keyword">float</span>* cf = kernel.ptr&lt;<span class="keyword">float</span>&gt;();</span><br><span class="line">    <span class="keyword">double</span>* cd = kernel.ptr&lt;<span class="keyword">double</span>&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å½“sigmaå°äº0æ—¶ï¼Œé‡‡ç”¨å…¬å¼å¾—åˆ°sigma(åªä¸næœ‰å…³)ï¼Œå¤§äº0å°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ã€‚</span></span><br><span class="line">    <span class="keyword">double</span> sigmaX = sigma &gt; <span class="number">0</span> ? sigma : ((n<span class="number">-1</span>)*<span class="number">0.5</span> - <span class="number">1</span>)*<span class="number">0.3</span> + <span class="number">0.8</span>;</span><br><span class="line">    <span class="comment">// è¡¨è¾¾å¼ä¸­eæŒ‡æ•°è¦ç”¨åˆ°</span></span><br><span class="line">    <span class="keyword">double</span> scale2X = <span class="number">-0.5</span>/(sigmaX*sigmaX);</span><br><span class="line">    <span class="keyword">double</span> sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">for</span>( i = <span class="number">0</span>; i &lt; n; i++ )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">double</span> x = i - (n<span class="number">-1</span>)*<span class="number">0.5</span>;</span><br><span class="line">        <span class="comment">// æ ¹æ®ä¸Šé¢è®¡ç®—å‡ºæ¥çš„ç³»æ•°æ¥å†³å®šæ˜¯å¦é‡æ–°è®¡ç®—å€¼</span></span><br><span class="line">        <span class="keyword">double</span> t = fixed_kernel ? (<span class="keyword">double</span>)fixed_kernel[i]:<span class="built_in">std</span>::<span class="built_in">exp</span>(scale2X*x*x);</span><br><span class="line">        <span class="comment">//æ ¹æ®ç²¾åº¦é€‰æ‹©å˜é‡</span></span><br><span class="line">        <span class="keyword">if</span>( ktype == CV_32F )</span><br><span class="line">        &#123;</span><br><span class="line">            cf[i] = (<span class="keyword">float</span>)t;</span><br><span class="line">            sum += cf[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            cd[i] = t;</span><br><span class="line">            sum += cd[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    sum = <span class="number">1.</span>/sum; <span class="comment">// å½’ä¸€åŒ–æ“ä½œï¼Œè®¡ç®—éœ€è¦é™¤çš„æ•°å€¼</span></span><br><span class="line">    <span class="keyword">for</span>( i = <span class="number">0</span>; i &lt; n; i++ )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>( ktype == CV_32F )</span><br><span class="line">            cf[i] = (<span class="keyword">float</span>)(cf[i]*sum);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            cd[i] *= sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> kernel; <span class="comment">// è¿”å›å»ºç«‹å¥½çš„ä¸€ç»´å†…æ ¸</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸¤ä¸ªå‡½æ•°çš„ä¸»è¦ç›®çš„å°±æ˜¯è®¡ç®—å‡ºé«˜æ–¯å·ç§¯æ ¸ï¼Œè¿™é‡Œé€‰ç”¨åˆ†ç¦»è®¡ç®—ï¼Œå°±æ˜¯å…ˆè®¡ç®—æ°´å¹³ï¼ˆxï¼‰æ–¹å‘çš„ä¸€ç»´å·ç§¯æ ¸ï¼Œå†æ ¹æ®sigmaåˆ¤æ–­æ˜¯å¦é‡æ–°è®¡ç®—å‚ç›´ï¼ˆyï¼‰æ–¹å‘çš„ä¸€ç»´å·ç§¯å†…æ ¸ï¼Œè¿™æ ·å­åˆ†ç¦»è®¡ç®—å†é’ˆå¯¹å°ºå¯¸è¾ƒå¤§çš„æ»¤æ³¢å™¨ä¹Ÿå¯ä»¥æœ‰å¾ˆé«˜çš„æ•ˆç‡ï¼Œå¹¶ä¸”åˆ†ç¦»è®¡ç®—ç»“åˆå¤šçº¿ç¨‹ä¹Ÿæ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚</p><p>çœ‹å®Œé«˜æ–¯å†…æ ¸çš„å»ºç«‹ï¼Œæˆ‘ä»¬çŸ¥é“é«˜æ–¯æ¨¡ç³Šä¸»è¦åˆ©ç”¨äº†åˆ†ç¦»è®¡ç®—ï¼Œé‚£æœ€å<code>sepFilter2D</code>å‡½æ•°ä¹Ÿå¾ˆå®¹æ˜“çœ‹æ‡‚äº†ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">cv::sepFilter2D</span><span class="params">( InputArray _src, OutputArray _dst, <span class="keyword">int</span> ddepth,</span></span></span><br><span class="line"><span class="function"><span class="params">                      InputArray _kernelX, InputArray _kernelY, Point anchor,</span></span></span><br><span class="line"><span class="function"><span class="params">                      <span class="keyword">double</span> delta, <span class="keyword">int</span> borderType )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    CV_INSTRUMENT_REGION()</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è¿™é‡Œè€ƒè™‘å¦‚æœè¾“å…¥å‡½æ•°æ˜¯UMatå½¢å¼ä¸”ç»´åº¦å°äºç­‰äº2çš„æƒ…å†µä¸‹</span></span><br><span class="line"><span class="comment">ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨openclä¼˜åŒ–è¿‡çš„filter2Dè®¡ç®—</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">    CV_OCL_RUN(_dst.isUMat() &amp;&amp; _src.dims() &lt;= <span class="number">2</span> </span><br><span class="line">               &amp;&amp; (<span class="keyword">size_t</span>)_src.rows() &gt; _kernelY.total() </span><br><span class="line">               &amp;&amp; (<span class="keyword">size_t</span>)_src.cols() &gt; _kernelX.total(),</span><br><span class="line">               ocl_sepFilter2D(_src, _dst, ddepth, _kernelX, _kernelY, anchor, delta, borderType))</span><br><span class="line"></span><br><span class="line">    Mat src = _src.getMat(), </span><br><span class="line">    kernelX = _kernelX.getMat(), </span><br><span class="line">    kernelY = _kernelY.getMat();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>( ddepth &lt; <span class="number">0</span> )</span><br><span class="line">        ddepth = src.depth();</span><br><span class="line"></span><br><span class="line">    _dst.create( src.<span class="built_in">size</span>(), CV_MAKETYPE(ddepth, src.channels()) );</span><br><span class="line">    Mat dst = _dst.getMat();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    æ‰¾åˆ°srcçš„çŸ©é˜µçš„çŸ©é˜µå¤´å­˜å…¥wszå½“ä¸­ï¼Œå¹¶ä¸”å°†åç§»é‡å­˜å…¥ofså˜é‡ä¸­</span></span><br><span class="line"><span class="comment">    è¿™ä¸¤ä¸ªå˜é‡ç”¨äºå¿«é€Ÿè¯»å–å…¨éƒ¨å›¾åƒ</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    Point ofs;</span><br><span class="line">    <span class="function">Size <span class="title">wsz</span><span class="params">(src.cols, src.rows)</span></span>;</span><br><span class="line">    <span class="keyword">if</span>( (borderType &amp; BORDER_ISOLATED) == <span class="number">0</span> )</span><br><span class="line">        src.locateROI( wsz, ofs );</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    è¿›è¡Œé¢„å…ˆæ£€æµ‹å†…æ ¸æ˜¯å¦æœ‰è¯¯</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    CV_Assert( kernelX.type() == kernelY.type() &amp;&amp;</span><br><span class="line">               (kernelX.cols == <span class="number">1</span> || kernelX.rows == <span class="number">1</span>) &amp;&amp;</span><br><span class="line">               (kernelY.cols == <span class="number">1</span> || kernelY.rows == <span class="number">1</span>) );</span><br><span class="line"></span><br><span class="line">    Mat contKernelX = kernelX.isContinuous() ? kernelX : kernelX.clone();</span><br><span class="line">    Mat contKernelY = kernelY.isContinuous() ? kernelY : kernelY.clone();</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    ç”Ÿæˆä¸€ä¸ªäºŒç»´æ»¤æ³¢(filter2D)å¼•æ“</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    Ptr&lt;hal::SepFilter2D&gt; c = hal::SepFilter2D::create(</span><br><span class="line">        src.type(), dst.type(), kernelX.type(),</span><br><span class="line">        contKernelX.data, </span><br><span class="line">        kernelX.cols + kernelX.rows - <span class="number">1</span>,</span><br><span class="line">        contKernelY.data, </span><br><span class="line">        kernelY.cols + kernelY.rows - <span class="number">1</span>,</span><br><span class="line">        anchor.x, </span><br><span class="line">        anchor.y, </span><br><span class="line">        delta, </span><br><span class="line">        borderType &amp; ~BORDER_ISOLATED);</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    è°ƒç”¨è¿™ä¸ªå¼•æ“</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    c-&gt;apply(src.data, src.<span class="built_in">step</span>, dst.data, dst.<span class="built_in">step</span>, dst.cols, dst.rows, wsz.<span class="built_in">width</span>, wsz.<span class="built_in">height</span>, ofs.x, ofs.y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‰©ä¸‹çš„ä¾¿æ˜¯å¯»æ‰¾åˆ°è¿™ä¸ªå¼•æ“è·Ÿè°ƒç”¨å‡½æ•°çš„å®ç°äº†ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Ptrç±»ä¼¼äºboost::shared_ptrï¼Œå®ƒæ˜¯Booståº“çš„ä¸€éƒ¨åˆ†</span></span><br><span class="line"><span class="comment">(http://www.boost.org/doc/libs/release/libs/smart_ptr/shared_ptr.htm)</span></span><br><span class="line"><span class="comment">å’Œ std::shared_ptr[C ++ 11æ ‡å‡†]ï¼ˆhttp://en.wikipedia.org/wiki/C++11ï¼‰</span></span><br><span class="line"><span class="comment">P.S.å…¶å®å¤§éƒ¨åˆ†c++11æ ‡å‡†éƒ½æ˜¯booståº“é‡Œé¢æŠ„è¿‡æ¥çš„</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Ptr&lt;SepFilter2D&gt; <span class="title">SepFilter2D::create</span><span class="params">(<span class="keyword">int</span> stype, <span class="keyword">int</span> dtype, <span class="keyword">int</span> ktype,</span></span></span><br><span class="line"><span class="function"><span class="params">                                     uchar * kernelx_data, <span class="keyword">int</span> kernelx_len,</span></span></span><br><span class="line"><span class="function"><span class="params">                                     uchar * kernely_data, <span class="keyword">int</span> kernely_len,</span></span></span><br><span class="line"><span class="function"><span class="params">                                     <span class="keyword">int</span> anchor_x, <span class="keyword">int</span> anchor_y, <span class="keyword">double</span> delta, <span class="keyword">int</span> borderType)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    &#123;</span><br><span class="line">        ReplacementSepFilter * impl = <span class="keyword">new</span> ReplacementSepFilter();</span><br><span class="line">        <span class="keyword">if</span> (impl-&gt;init(stype, dtype, ktype,</span><br><span class="line">                       kernelx_data, kernelx_len,</span><br><span class="line">                       kernely_data, kernely_len,</span><br><span class="line">                       anchor_x, anchor_y, delta, borderType))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> Ptr&lt;hal::SepFilter2D&gt;(impl);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">delete</span> impl;</span><br><span class="line">    &#125;</span><br><span class="line">    &#123;</span><br><span class="line">        OcvSepFilter * impl = <span class="keyword">new</span> OcvSepFilter();</span><br><span class="line">        impl-&gt;init(stype, dtype, ktype,</span><br><span class="line">                   kernelx_data, kernelx_len,</span><br><span class="line">                   kernely_data, kernely_len,</span><br><span class="line">                   anchor_x, anchor_y, delta, borderType);</span><br><span class="line">        <span class="keyword">return</span> Ptr&lt;hal::SepFilter2D&gt;(impl);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»æŸ¥æ‰¾ï¼Œ<code>SepFilter2D</code>æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œå†…å«æœ‰ä¸Šé¢çš„createå‡½æ•°ä»¥åŠä¸¤ä¸ªè™šå‡½æ•°(applyä¸ææ„å‡½æ•°)ï¼Œè¿™å°±è¯´æ˜å¯¹äºä¸åŒçš„implæœ‰ç€ä¸åŒçš„applyè·Ÿinitã€‚</p><p>ç„¶åï¼Œä»<code>ReplacementSepFilter</code>çš„å‡½æ•°å¼€å§‹çœ‹èµ·:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">è¿™ä¸ªç»“æ„ä½“ç»§æ‰¿è‡ªSepFilter2D</span></span><br><span class="line"><span class="comment">å…·ä½“ä½œç”¨ä¾¿æ˜¯ä½¿ç”¨hal apiè¿›è¡Œä¼˜åŒ–åŠ é€Ÿè®¡ç®—</span></span><br><span class="line"><span class="comment">æ˜¯ä¸€ä¸ªå…³äºç§»åŠ¨å’ŒåµŒå…¥å¼è®¾è®¡çš„åº“</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ReplacementSepFilter</span> :</span> <span class="keyword">public</span> hal::SepFilter2D</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">è¿™é‡Œçš„cvhalFilter2Dæ˜¯ä¸€ä¸ªç»“æ„ä½“</span></span><br><span class="line"><span class="comment">å…¶ç›®çš„å°±æ˜¯ä½œä¸ºcontextå˜é‡ä½¿ç”¨(ctx ä¾¿æ˜¯contextç®€å†™)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">    cvhalFilter2D *ctx;</span><br><span class="line">    <span class="keyword">bool</span> isInitialized;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    å§”æ‰˜æ„é€ å‡½æ•° å§”æ‰˜äº†ä¸¤ä¸ªæ„é€ å‡½æ•°è¿›è¡Œæ„é€ </span></span><br><span class="line"><span class="comment">    ä¸€ä¸ªæ˜¯å®šä¹‰äº†contextä¸º0ï¼Œå¦ä¸€ä¸ªåˆ™æ˜¯å®šä¹‰äº†isInitializedä¸ºå¦</span></span><br><span class="line"><span class="comment">    å…³äºcontext(ä¸Šä¸‹æ–‡)è¿™ä¸ªæ¦‚å¿µå¯ä»¥ç™¾åº¦ä¸€ä¸‹</span></span><br><span class="line"><span class="comment">    åœ¨ä¸‹æ˜¯çœ‹çš„è¿™ç¯‡:</span></span><br><span class="line"><span class="comment">    https://wanderinghorse.net/computing/papers/context_types.html</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    ReplacementSepFilter() : ctx(<span class="number">0</span>), isInitialized(<span class="literal">false</span>) &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    åˆå§‹åŒ–å‡½æ•°</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> stype, <span class="keyword">int</span> dtype, <span class="keyword">int</span> ktype,</span></span></span><br><span class="line"><span class="function"><span class="params">              uchar * kernelx_data, <span class="keyword">int</span> kernelx_len,</span></span></span><br><span class="line"><span class="function"><span class="params">              uchar * kernely_data, <span class="keyword">int</span> kernely_len,</span></span></span><br><span class="line"><span class="function"><span class="params">              <span class="keyword">int</span> anchor_x, <span class="keyword">int</span> anchor_y, <span class="keyword">double</span> delta, <span class="keyword">int</span> borderType)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œè¿”å›çš„å€¼æ ¹æ®æ˜¯å¦åˆå§‹åŒ–æˆåŠŸèµ‹å€¼çš„</span></span><br><span class="line">        <span class="keyword">int</span> res = cv_hal_sepFilterInit(&amp;ctx, stype, dtype, ktype,</span><br><span class="line">                                       kernelx_data, kernelx_len,</span><br><span class="line">                                       kernely_data, kernely_len,</span><br><span class="line">                                       anchor_x, anchor_y, delta, borderType);</span><br><span class="line">        <span class="comment">// è¿™é‡Œé¦–å…ˆåˆ¤æ–­resæ˜¯å¦ä¸CV_HAL_ERROR_OK(0)ç›¸ç­‰</span></span><br><span class="line">        <span class="comment">// å¦‚æœä¸ç›¸ç­‰ä¾¿å°†0èµ‹å€¼ç»™isInitialized</span></span><br><span class="line">        <span class="comment">// å¦åˆ™ä¾¿æ˜¯å°†1èµ‹å€¼</span></span><br><span class="line">        isInitialized = (res == CV_HAL_ERROR_OK);</span><br><span class="line">        <span class="keyword">return</span> isInitialized;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    è¿™ä¸ªæ˜¯ReplacementSepFilterçš„æ‰§è¡Œå‡½æ•°</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">apply</span><span class="params">(uchar* src_data, <span class="keyword">size_t</span> src_step, uchar* dst_data, <span class="keyword">size_t</span></span></span></span><br><span class="line"><span class="function"><span class="params">    dst_step, <span class="keyword">int</span> <span class="built_in">width</span>, <span class="keyword">int</span> <span class="built_in">height</span>, <span class="keyword">int</span> full_width, <span class="keyword">int</span> full_height,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">int</span> offset_x, <span class="keyword">int</span> offset_y)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isInitialized)</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œæ˜¯è°ƒç”¨å¹¶è¿”å›æ˜¯å¦æˆåŠŸçš„ç»“æœ</span></span><br><span class="line">            <span class="keyword">int</span> res = cv_hal_sepFilter(ctx, src_data, src_step, dst_data,</span><br><span class="line">            dst_step, <span class="built_in">width</span>, <span class="built_in">height</span>, full_width,</span><br><span class="line">            full_height, offset_x, offset_y);</span><br><span class="line">            <span class="comment">// åˆ¤æ–­resæ˜¯å¦ä¸CV_HAL_ERROR_OK(0)ä¸ç­‰</span></span><br><span class="line">            <span class="comment">// å¦‚æœä¸ç­‰ä¾¿æ— æ³•è°ƒç”¨</span></span><br><span class="line">            <span class="comment">// è¿›å…¥é”™è¯¯é€‰é¡¹è·³å‡ºæ»¤æ³¢å™¨</span></span><br><span class="line">            <span class="keyword">if</span> (res != CV_HAL_ERROR_OK)</span><br><span class="line">                CV_Error(Error::StsNotImplemented, <span class="string">"Failed to run HAL sepFilter implementation"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    è¿™é‡Œçš„ææ„å‡½æ•°åœ¨æœ¬ç¯‡ä¸è§£æ</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    ~ReplacementSepFilter()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (isInitialized)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> res = cv_hal_sepFilterFree(ctx);</span><br><span class="line">            <span class="keyword">if</span> (res != CV_HAL_ERROR_OK)</span><br><span class="line">                CV_Error(Error::StsNotImplemented, <span class="string">"Failed to run HAL sepFilter implementation"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åœ¨æ¥ä¸‹æ¥ä¾¿æ˜¯<code>OcvSepFilter</code>å‡½æ•°:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">OcvSepFilter</span> :</span> <span class="keyword">public</span> hal::SepFilter2D</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">å»ºç«‹ä¸€ä¸ªæ»¤æ³¢å¼•æ“ f</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">    Ptr&lt;FilterEngine&gt; f;</span><br><span class="line">    <span class="keyword">int</span> src_type;</span><br><span class="line">    <span class="keyword">int</span> dst_type;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> stype, <span class="keyword">int</span> dtype, <span class="keyword">int</span> ktype,</span></span></span><br><span class="line"><span class="function"><span class="params">              uchar * kernelx_data, <span class="keyword">int</span> kernelx_len,</span></span></span><br><span class="line"><span class="function"><span class="params">              uchar * kernely_data, <span class="keyword">int</span> kernely_len,</span></span></span><br><span class="line"><span class="function"><span class="params">              <span class="keyword">int</span> anchor_x, <span class="keyword">int</span> anchor_y, <span class="keyword">double</span> delta, <span class="keyword">int</span> borderType)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        src_type = stype;</span><br><span class="line">        dst_type = dtype;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">        åˆ†ç¦»å·ç§¯æ‰€ä»¥å»ºç«‹äº†Xä¸Yçš„å·ç§¯å†…æ ¸</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="function">Mat <span class="title">kernelX</span><span class="params">(Size(kernelx_len, <span class="number">1</span>), ktype, kernelx_data)</span></span>;</span><br><span class="line">        <span class="function">Mat <span class="title">kernelY</span><span class="params">(Size(kernely_len, <span class="number">1</span>), ktype, kernely_data)</span></span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">        åˆ›å»ºä¸€ä¸ªåˆ›å»ºå¯åˆ†ç¦»çš„çº¿æ€§æ»¤æ³¢å™¨</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        f = createSeparableLinearFilter( stype, dtype, kernelX, kernelY,</span><br><span class="line">                                         Point(anchor_x, anchor_y),</span><br><span class="line">                                         delta, borderType &amp; ~BORDER_ISOLATED );</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">apply</span><span class="params">(uchar* src_data, <span class="keyword">size_t</span> src_step, uchar* dst_data, <span class="keyword">size_t</span> </span></span></span><br><span class="line"><span class="function"><span class="params">    dst_step, nt <span class="built_in">width</span>, <span class="keyword">int</span> <span class="built_in">height</span>, <span class="keyword">int</span> full_width, <span class="keyword">int</span> full_height,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">int</span> offset_x, <span class="keyword">int</span> offset_y)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="function">Mat <span class="title">src</span><span class="params">(Size(<span class="built_in">width</span>, <span class="built_in">height</span>), src_type, src_data, src_step)</span></span>;</span><br><span class="line">        <span class="function">Mat <span class="title">dst</span><span class="params">(Size(<span class="built_in">width</span>, <span class="built_in">height</span>), dst_type, dst_data, dst_step)</span></span>;</span><br><span class="line">        <span class="comment">// å› ä¸ºPtrå°†æ¨¡æ¿è®¾ç½®ä¸ºäº†FilterEngineï¼Œæ‰€ä»¥è¿™é‡Œapplyè°ƒç”¨çš„æ˜¯FilterEngineçš„å¯åŠ¨å‡½æ•°</span></span><br><span class="line">        f-&gt;apply(src, dst, Size(full_width, full_height), Point(offset_x,</span><br><span class="line">        offset_y));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç„¶åä¾¿æ˜¯åˆ†æ<code>createSeparableLinearFilter</code> è¿™ä¸ªå‡½æ•°ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">å¯ä»¥çœ‹åˆ°å…¶è¿”å›çš„æ˜¯æ˜¯ä¸€ä¸ªå¼•æ“ï¼Œ</span></span><br><span class="line"><span class="comment">æ‰€ä»¥é‡Œé¢è‚¯å®šæ˜¯æœ‰æ¨ªå‘ä¸çºµå‘çº¿æ€§æ»¤æ³¢å™¨äº†(æ‰€ä»¥æ‰ä½¿ç”¨å¯åˆ†ç¦»çš„qwq)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">cv::Ptr&lt;cv::FilterEngine&gt; <span class="title">cv::createSeparableLinearFilter</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">int</span> _srcType, <span class="keyword">int</span> _dstType,</span></span></span><br><span class="line"><span class="function"><span class="params">    InputArray __rowKernel, InputArray __columnKernel,</span></span></span><br><span class="line"><span class="function"><span class="params">    Point _anchor, <span class="keyword">double</span> _delta,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">int</span> _rowBorderType, <span class="keyword">int</span> _columnBorderType,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> Scalar&amp; _borderValue )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰å˜é‡</span></span><br><span class="line">    Mat _rowKernel = __rowKernel.getMat(), </span><br><span class="line">    _columnKernel = __columnKernel.getMat();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ±‚çŸ©é˜µçš„æ•°ç»„ç±»å‹ï¼Œæ•°æ®ç±»å‹åŒ…è¿‡é€šé“æ•°ï¼Œæ·±åº¦ï¼Œå’Œæ®ç±»å‹3ç§</span></span><br><span class="line">    _srcType = CV_MAT_TYPE(_srcType); </span><br><span class="line">    _dstType = CV_MAT_TYPE(_dstType);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ±‚æ·±åº¦(è¾“å…¥è¾“å‡ºéƒ½æ±‚)</span></span><br><span class="line">    <span class="keyword">int</span> sdepth = CV_MAT_DEPTH(_srcType),</span><br><span class="line">    ddepth = CV_MAT_DEPTH(_dstType);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ±‚è¾“å…¥çŸ©é˜µçš„é€šé“æ•°å¹¶åˆ¤æ–­è¾“å…¥çŸ©é˜µæ˜¯å¦ä¸è¾“å‡ºçŸ©é˜µé€šé“æ•°ç›¸ç­‰</span></span><br><span class="line">    <span class="keyword">int</span> cn = CV_MAT_CN(_srcType);</span><br><span class="line">    CV_Assert( cn == CV_MAT_CN(_dstType) );</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// rowsize</span></span><br><span class="line">    <span class="keyword">int</span> rsize = _rowKernel.rows + _rowKernel.cols - <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// columnsize</span></span><br><span class="line">    <span class="keyword">int</span> csize = _columnKernel.rows + _columnKernel.cols - <span class="number">1</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¦‚æœå†…æ ¸é”šç‚¹æ˜¯è´Ÿæ•°ï¼Œåˆ™ä»ä¸­å¿ƒç‚¹å¼€å§‹è¿›è¡Œ</span></span><br><span class="line">    <span class="keyword">if</span>( _anchor.x &lt; <span class="number">0</span> )</span><br><span class="line">        _anchor.x = rsize/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span>( _anchor.y &lt; <span class="number">0</span> )</span><br><span class="line">        _anchor.y = csize/<span class="number">2</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    è·å¾—å†…æ ¸çš„ç±»å‹</span></span><br><span class="line"><span class="comment">    å¤§è‡´åˆ†ä¸ºäº”ç§ï¼š</span></span><br><span class="line"><span class="comment">    KERNEL_GENERAL é€šç”¨å†…æ ¸ æ— ä»»ä½•å¯¹ç§°æ€§æˆ–å…¶ä»–å±æ€§</span></span><br><span class="line"><span class="comment">    KERNEL_SYMMETRICAL kernel[i] == kernel[ksize-i-1] (ç³»æ•°å¯¹ç§°)ï¼Œä¸”é”šç‚¹ä½äºä¸­å¿ƒ</span></span><br><span class="line"><span class="comment">    KERNEL_ASYMMETRICAL kernel[i] == -kernel[ksize-i-1] (ç³»æ•°ç›¸åå¯¹ç§°)ï¼Œé”šç‚¹åŒä¸Š</span></span><br><span class="line"><span class="comment">    KERNEL_SMOOTH  æ‰€æœ‰å†…æ ¸å…ƒç´ éƒ½æ˜¯éè´Ÿçš„å¹¶ä¸”æ€»å’Œä¸º1</span></span><br><span class="line"><span class="comment">    KERNEL_INTEGER æ‰€æœ‰å†…æ ¸ç³»æ•°éƒ½æ˜¯æ•´æ•°</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">int</span> rtype = getKernelType(_rowKernel,</span><br><span class="line">        _rowKernel.rows == <span class="number">1</span> ? Point(_anchor.x, <span class="number">0</span>) : Point(<span class="number">0</span>, _anchor.x));</span><br><span class="line">    <span class="keyword">int</span> ctype = getKernelType(_columnKernel,</span><br><span class="line">        _columnKernel.rows == <span class="number">1</span> ? Point(_anchor.y, <span class="number">0</span>) : Point(<span class="number">0</span>, _anchor.y));</span><br><span class="line">    Mat rowKernel, columnKernel;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    åœ¨CV_32F, sdepth, ddepthä¸­æ‰¾åˆ°æœ€å¤§å€¼å¹¶èµ‹å€¼ç»™bdepth</span></span><br><span class="line"><span class="comment">    bdepth: ä½æ·±åº¦</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">int</span> bdepth = <span class="built_in">std</span>::<span class="built_in">max</span>(CV_32F,<span class="built_in">std</span>::<span class="built_in">max</span>(sdepth, ddepth));</span><br><span class="line">    <span class="keyword">int</span> bits = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    åˆ¤æ–­å¦‚æœ</span></span><br><span class="line"><span class="comment">    è¾“å…¥è¾“å‡ºå›¾åƒéƒ½æ˜¯8ä½æ— ç¬¦å·å‹ä¸”å†…æ ¸ä½¿ç”¨å¹³æ»‘å¯¹ç§°æ ¸</span></span><br><span class="line"><span class="comment">    æˆ–è€…</span></span><br><span class="line"><span class="comment">    è¾“å‡ºå›¾åƒä¸º16ä½æœ‰ç¬¦å·å‹ä¸”ä½¿ç”¨æ•´å½¢å¯¹ç§°æˆ–åå¯¹ç§°æ ¸</span></span><br><span class="line"><span class="comment">    é‚£ä¹ˆå°±ä¸éœ€è¦è¿›è¡Œä»»ä½•è½¬æ¢ä¾¿å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œ</span></span><br><span class="line"><span class="comment">    å¦åˆ™ä¾¿éœ€è¦è½¬æ¢ï¼Œå› ä¸ºè¾“å…¥å‰åçš„å›¾åƒæ ¼å¼æ˜¯å®Œå…¨ç›¸ç­‰çš„</span></span><br><span class="line"><span class="comment">    æ‰€ä»¥deltaå°±é»˜è®¤æ˜¯0äº†</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">if</span>( sdepth == CV_8U &amp;&amp;</span><br><span class="line">        (</span><br><span class="line">             (rtype == KERNEL_SMOOTH+KERNEL_SYMMETRICAL &amp;&amp;</span><br><span class="line">              ctype == KERNEL_SMOOTH+KERNEL_SYMMETRICAL &amp;&amp;</span><br><span class="line">              ddepth == CV_8U) </span><br><span class="line">             ||</span><br><span class="line">             (</span><br><span class="line">                  (rtype &amp; (KERNEL_SYMMETRICAL+KERNEL_ASYMMETRICAL)) &amp;&amp;</span><br><span class="line">                  (ctype &amp; (KERNEL_SYMMETRICAL+KERNEL_ASYMMETRICAL)) &amp;&amp;</span><br><span class="line">                  (rtype &amp; ctype &amp; KERNEL_INTEGER) &amp;&amp;</span><br><span class="line">                  ddepth == CV_16S</span><br><span class="line">             )</span><br><span class="line">        ) </span><br><span class="line">      )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// é‡æ–°ç»™bdepthèµ‹å€¼</span></span><br><span class="line">        bdepth = CV_32S;</span><br><span class="line">        <span class="comment">// æ­¤æ—¶bits(å•ä½å­—èŠ‚)å°†æ ¹æ®ä½æ·±åº¦è¿›è¡Œè®¡ç®—ï¼Œå¦‚æœæ˜¯8ä½æ— ç¬¦å·å‹åˆ™ç›´æ¥èµ‹å€¼ä¸º8ä½</span></span><br><span class="line">        bits = ddepth == CV_8U ? <span class="number">8</span> : <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// æ­¤æ—¶å°†rowå†…æ ¸è½¬æ¢ä¸ºCV_32Sï¼Œå³32ä½æ•´æ•°å‹ï¼Œå¹¶ä¸”æ ¹æ®å•ä½å­—èŠ‚è½¬æ¢æ¯”ä¾‹å› å­</span></span><br><span class="line">        <span class="comment">// å¦‚æœä¸åŠ æ¯”ä¾‹å› å­é‚£ä¹ˆå›¾åƒä¼šå˜å¾—å¾ˆç™½</span></span><br><span class="line">        <span class="comment">// (å¯å‚è§è¿™ç¯‡æé—®https://bbs.csdn.net/topics/392411554)</span></span><br><span class="line">        <span class="comment">// æ¯”ä¾‹å› å­ï¼šå°†åŸçŸ©é˜µçš„æ‰€æœ‰å…ƒç´ ä¹˜ä»¥alpha</span></span><br><span class="line">        _rowKernel.convertTo( rowKernel, CV_32S, <span class="number">1</span> &lt;&lt; bits );</span><br><span class="line">        _columnKernel.convertTo( columnKernel, CV_32S, <span class="number">1</span> &lt;&lt; bits );</span><br><span class="line">        <span class="comment">// åœ¨è¿™é‡Œæ˜¯å°†å•ä½å­—èŠ‚*2</span></span><br><span class="line">        bits *= <span class="number">2</span>;</span><br><span class="line">        <span class="comment">// æ ¹æ®å•ä½å­—èŠ‚è®¡ç®—å‡ºäº†å­˜å‚¨å•ä½(åç§»é‡)</span></span><br><span class="line">        _delta *= (<span class="number">1</span> &lt;&lt; bits);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">        å¦‚æœä¸å±äºä¸Šé¢ifé‡Œçš„ä»»ä½•ä¸€ç§æƒ…å†µï¼Œé‚£ä¹ˆéœ€è¦è¿›è¡Œè½¬æ¢ï¼Œç”¨ä»¥ä½¿æ•°æ®ç±»å‹ç»Ÿä¸€</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="keyword">if</span>( _rowKernel.type() != bdepth )</span><br><span class="line">            _rowKernel.convertTo( rowKernel, bdepth );</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            rowKernel = _rowKernel;</span><br><span class="line">        <span class="keyword">if</span>( _columnKernel.type() != bdepth )</span><br><span class="line">            _columnKernel.convertTo( columnKernel, bdepth );</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            columnKernel = _columnKernel;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¼“å†²åŒºå­˜å‚¨ï¼Œç”¨äºå†™å…¥å•ä¸ªè‰²æ‰€æœ‰ç´ ä¿¡æ¯(åŒ…æ‹¬å¤šé€šé“ä¸æ·±åº¦ä¿¡æ¯)</span></span><br><span class="line">    <span class="keyword">int</span> _bufType = CV_MAKETYPE(bdepth, cn);</span><br><span class="line">    <span class="comment">// getLinearRowFilteræ˜¯æ ¹æ®ä¸åŒçš„è¾“å…¥å›¾åƒç±»å‹ï¼Œè¾“å‡ºå›¾åƒè¿”å›ä¸åŒçš„çº¿æ€§æ»¤æ³¢å™¨</span></span><br><span class="line">    Ptr&lt;BaseRowFilter&gt; _rowFilter = getLinearRowFilter(</span><br><span class="line">        _srcType, _bufType, rowKernel, _anchor.x, rtype);</span><br><span class="line">    Ptr&lt;BaseColumnFilter&gt; _columnFilter = getLinearColumnFilter(</span><br><span class="line">        _bufType, _dstType, columnKernel, _anchor.y, ctype, _delta, bits );</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ©ç”¨è¿™ä¸¤ä¸ªçº¿æ€§æ»¤æ³¢å™¨å»ºç«‹æ»¤æ³¢å¼•æ“</span></span><br><span class="line">    <span class="keyword">return</span> Ptr&lt;FilterEngine&gt;( <span class="keyword">new</span> FilterEngine(Ptr&lt;BaseFilter&gt;(), _rowFilter,</span><br><span class="line">                                               _columnFilter,_srcType, _dstType,</span><br><span class="line">                                               _bufType, _rowBorderType,</span><br><span class="line">                                               _columnBorderType, _borderValue ));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">å»ºç«‹æ»¤æ³¢å¼•æ“å‡½æ•°</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">FilterEngine::FilterEngine( <span class="keyword">const</span> Ptr&lt;BaseFilter&gt;&amp; _filter2D,</span><br><span class="line">                            <span class="keyword">const</span> Ptr&lt;BaseRowFilter&gt;&amp; _rowFilter,</span><br><span class="line">                            <span class="keyword">const</span> Ptr&lt;BaseColumnFilter&gt;&amp; _columnFilter,</span><br><span class="line">                            <span class="keyword">int</span> _srcType, <span class="keyword">int</span> _dstType, <span class="keyword">int</span> _bufType,</span><br><span class="line">                            <span class="keyword">int</span> _rowBorderType, <span class="keyword">int</span> _columnBorderType,</span><br><span class="line">                            <span class="keyword">const</span> Scalar&amp; _borderValue )</span><br><span class="line">&#123;</span><br><span class="line">    init(_filter2D, _rowFilter, _columnFilter, _srcType, _dstType, _bufType,</span><br><span class="line">         _rowBorderType, _columnBorderType, _borderValue);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">FilterEngine::init</span><span class="params">( <span class="keyword">const</span> Ptr&lt;BaseFilter&gt;&amp; _filter2D,</span></span></span><br><span class="line"><span class="function"><span class="params">                         <span class="keyword">const</span> Ptr&lt;BaseRowFilter&gt;&amp; _rowFilter,</span></span></span><br><span class="line"><span class="function"><span class="params">                         <span class="keyword">const</span> Ptr&lt;BaseColumnFilter&gt;&amp; _columnFilter,</span></span></span><br><span class="line"><span class="function"><span class="params">                         <span class="keyword">int</span> _srcType, <span class="keyword">int</span> _dstType, <span class="keyword">int</span> _bufType,</span></span></span><br><span class="line"><span class="function"><span class="params">                         <span class="keyword">int</span> _rowBorderType, <span class="keyword">int</span> _columnBorderType,</span></span></span><br><span class="line"><span class="function"><span class="params">                         <span class="keyword">const</span> Scalar&amp; _borderValue )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ä¾æ—§æ˜¯è·å–ç±»å‹</span></span><br><span class="line">    _srcType = CV_MAT_TYPE(_srcType);</span><br><span class="line">    _bufType = CV_MAT_TYPE(_bufType);</span><br><span class="line">    _dstType = CV_MAT_TYPE(_dstType);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä¸´æ—¶å˜é‡</span></span><br><span class="line">    srcType = _srcType;</span><br><span class="line">    <span class="comment">// è®¡ç®—å•ä¸ªåƒç´ å¤§å°</span></span><br><span class="line">    <span class="comment">// ä¸‹é¢ä¼šé™è§£</span></span><br><span class="line">    <span class="keyword">int</span> srcElemSize = (<span class="keyword">int</span>)getElemSize(srcType);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä¸‹é¢è¿™äº›å…¨æ˜¯å»ºç«‹ä¸´æ—¶å˜é‡çš„</span></span><br><span class="line">    dstType = _dstType;</span><br><span class="line">    bufType = _bufType;</span><br><span class="line"></span><br><span class="line">    filter2D = _filter2D;</span><br><span class="line">    rowFilter = _rowFilter;</span><br><span class="line">    columnFilter = _columnFilter;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è¿™é‡Œæ˜¯åˆ¤æ–­è¡Œåˆ—è¾¹ç¼˜ç±»å‹æ˜¯å¦å‡ºé—®é¢˜</span></span><br><span class="line">    <span class="keyword">if</span>( _columnBorderType &lt; <span class="number">0</span> )</span><br><span class="line">        _columnBorderType = _rowBorderType;</span><br><span class="line"></span><br><span class="line">    rowBorderType = _rowBorderType;</span><br><span class="line">    columnBorderType = _columnBorderType;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ£€æµ‹è¾¹ç•Œå¡«å……ç±»å‹æ˜¯å¦ä¸æ˜¯wrap(å¤åˆ¶å…ƒç´ å¡«å……)ç±»å‹</span></span><br><span class="line">    CV_Assert( columnBorderType != BORDER_WRAP );</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ£€æµ‹æ˜¯å¦ä¸ºå¯åˆ†ç¦»æ»¤æ³¢å™¨(å› ä¸ºè¿™ä¸ªæ˜¯é€šç”¨æ»¤æ³¢å¼•æ“ å¹¶ä¸çŸ¥é“æ˜¯å¦ä¸ºå¯åˆ†ç¦»æ»¤æ³¢å™¨)</span></span><br><span class="line">    <span class="keyword">if</span>( isSeparable() )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// æ£€æµ‹æ¨ªçºµæ»¤æ³¢å™¨ç±»å‹æ˜¯å¦ç›¸ç­‰</span></span><br><span class="line">        CV_Assert( rowFilter &amp;&amp; columnFilter );</span><br><span class="line">        <span class="comment">// å¹¶ä»¥æ¨ªçºµæ»¤æ³¢å™¨å®šä¹‰å†…æ ¸å¤§å°</span></span><br><span class="line">        ksize = Size(rowFilter-&gt;ksize, columnFilter-&gt;ksize);</span><br><span class="line">        <span class="comment">// é”šç‚¹ä¹Ÿæ ¹æ®æ»¤æ³¢å™¨é”šç‚¹å®šä¹‰</span></span><br><span class="line">        anchor = Point(rowFilter-&gt;anchor, columnFilter-&gt;anchor);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœä¸æ˜¯  æ£€æµ‹ç¼“å†²å›¾åƒç±»å‹æ˜¯å¦ä¸è¾“å…¥å›¾åƒç±»å‹ç›¸ç­‰</span></span><br><span class="line">        CV_Assert( bufType == srcType );</span><br><span class="line">        <span class="comment">// è¿™é‡Œè·Ÿä¸Šé¢å®šä¹‰å·®ä¸å¤šï¼Œä¸è¿‡æ˜¯éåˆ†ç¦»æ»¤æ³¢å™¨æ‰€ä»¥æ˜¯åªæœ‰ä¸€ä¸ª(filter2DäºŒç»´æ»¤æ³¢å™¨)</span></span><br><span class="line">        ksize = filter2D-&gt;ksize;</span><br><span class="line">        anchor = filter2D-&gt;anchor;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è¿™ä¸ªä¸€çœ‹å°±æ‡‚äº†</span></span><br><span class="line">    CV_Assert( m <span class="number">0</span> &lt;= anchor.x &amp;&amp; anchor.x &lt; ksize.<span class="built_in">width</span> &amp;&amp;</span><br><span class="line">               <span class="number">0</span> &lt;= anchor.y &amp;&amp; anchor.y &lt; ksize.<span class="built_in">height</span> );</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ ¹æ®è¾¹ç¼˜å¡«å……ç±»å‹è¿›è¡Œåƒç´ è®¡ç®—</span></span><br><span class="line">    borderElemSize = srcElemSize/(CV_MAT_DEPTH(srcType) &gt;= CV_32S ?</span><br><span class="line">                                  <span class="keyword">sizeof</span>(<span class="keyword">int</span>) : <span class="number">1</span>);</span><br><span class="line">    <span class="comment">// è¿™é‡Œä¹Ÿå¾ˆå¥½æ‡‚</span></span><br><span class="line">    <span class="keyword">int</span> borderLength = <span class="built_in">std</span>::<span class="built_in">max</span>(ksize.<span class="built_in">width</span> - <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="comment">// é‡å®šä¹‰è¾¹ç¼˜å‘é‡å¤§å°(è¿™é‡Œæ˜¯æ‰€å ç©ºé—´å¤§å°)</span></span><br><span class="line">    borderTab.resize(borderLength*borderElemSize);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line">    maxWidth = bufStep = <span class="number">0</span>;</span><br><span class="line">    constBorderRow.<span class="built_in">clear</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¦‚æœè¡Œåˆ—è¾¹ç•Œæ˜¯å¸¸æ•°å¡«å……çš„</span></span><br><span class="line">    <span class="keyword">if</span>( rowBorderType == BORDER_CONSTANT || columnBorderType == BORDER_CONSTANT )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// åˆ™è®¡ç®—å›¾åƒè¾¹é•¿</span></span><br><span class="line">        constBorderValue.resize(srcElemSize*borderLength);</span><br><span class="line">        <span class="keyword">int</span> srcType1 = CV_MAKETYPE(CV_MAT_DEPTH(srcType), </span><br><span class="line">                                   MIN(CV_MAT_CN(srcType),</span><br><span class="line">                                   <span class="number">4</span>));</span><br><span class="line">        <span class="comment">// æ ¹æ®ä½æ·±åº¦å°†è¾¹ç•Œåƒç´ å€¼è½¬æ¢æˆå¯ç›´æ¥ä½¿ç”¨çš„vectorå˜é‡</span></span><br><span class="line">        scalarToRawData(_borderValue, &amp;constBorderValue[<span class="number">0</span>], srcType1,</span><br><span class="line">                        borderLength*CV_MAT_CN(srcType));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–size</span></span><br><span class="line">    wholeSize = Size(<span class="number">-1</span>,<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬è¿™æ—¶å€™æ¥çœ‹ä¸Šé¢æåˆ°çš„<code>getElemSize</code>:</p><blockquote><p>æœ€ç»ˆè¿™ä¸ªå…¶å®æ˜¯ä¸ªå®å®šä¹‰ï¼Œè¿”å›çš„å°±æ˜¯è¿™ä¸ªå®å®šä¹‰è®¡ç®—çš„ç»“æœï¼š</p><p><strong>(CV_MAT_CN(type) &lt;&lt; ((((sizeof(size_t)/4+1)*16384|0x3a50) &gt;&gt; CV_MAT_DEPTH(type)*2) &amp; 3))</strong></p><p>é¦–å…ˆï¼Œé’ˆå¯¹<code>0x3a50</code>è¿™ä¸ªå¥‡æ€ªçš„æ•°å€¼ï¼Œæˆ‘ä»¬å…ˆè½¬æ¢ä¸º2è¿›åˆ¶æŸ¥çœ‹è§„å¾‹ï¼Œé€šè¿‡æŸ¥æ‰¾æ¯”å¯¹ï¼Œå‘ç°å…¶æ•°å€¼ä¸å˜é‡ç±»å‹æœ‰ç€ä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼Œç„¶å16384åˆ™æ˜¯1 &lt;&lt; 14çš„ç»“æœ(åˆšå¥½æ¯ä¸ªå¯¹åº”ä¸¤ä½äºŒè¿›åˆ¶æ•°å€¼)ï¼Œè¿™ä¸ªæ¢æˆäºŒè¿›åˆ¶åˆ™æ˜¯</p><p>â€‹    16384   = 10 00 00 00 00 00 00</p><p>â€‹    0x3a50 = 11 10 10 01 01 00 00</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pic/bin.png" alt="1" title="">                </div>                <div class="image-caption">1</div>            </figure><p>ç¨å¾®å…ˆç†è§£ä¸€ä¸‹ï¼Œåœ¨ä¸‹å…ˆè¯´ä¸€ä¸‹å‰©ä¸‹çš„å‡½æ•°ç„¶åä¸€èµ·è§£æã€‚</p><p>è¿™é‡Œå…ˆè®¡ç®—æ— ç¬¦å·æ•´å‹çš„é•¿åº¦(åœ¨64ä½ç³»ç»Ÿä¸‹æ˜¯4 desu)ç„¶åé™¤ä»¥4 å†åŠ ä¸Š1 ï¼Œ</p><p>å°±æ˜¯è¯´è¿™æ˜¯2 * 16384 | 0x3a50</p><p>å°±æ˜¯</p><p>01 00 00 00 00 00 00 00</p><p>00 11 10 10 01 01 00 00</p><hr><p>01 11 10 10 01 01 00 00</p><p>çš„ç»“æœå³ç§»2 * æ·±åº¦ï¼Œè§‚å¯Ÿä¸Šé¢ä¾¿ä¼šå‘ç°æœ€ç»ˆå³ç§»ä¹‹åä¾¿ä½¿å¾—æœ€åä¸¤ä½äºŒè¿›åˆ¶æ•°å¯¹åº”çš„åˆšå¥½ä¾¿æ˜¯å¯¹åº”å˜é‡ç±»å‹æ‰€å çš„äºŒè¿›åˆ¶æ•°ã€‚</p><p>è¿™æ ·ï¼Œåœ¨è·Ÿ3(äºŒè¿›åˆ¶ä¸º11)è¿›è¡Œ â€˜ä¸â€˜ æ“ä½œï¼Œä¾¿èƒ½å¾—åˆ°å„ä¸ªå˜é‡çš„å¯¹åº”æ‰€å å­—èŠ‚æ•°çš„å¯¹æ•°äº†ã€‚</p><p>åˆå› ä¸ºè¿™é‡Œæ˜¯ é€šé“æ•° * 2 ^ (æ‰€å å­—èŠ‚å¯¹æ•°)</p><p>æ‰€ä»¥è¿™æ ·å°±èƒ½å¤Ÿè®¡ç®—çš„å‡ºå•ä¸ªåƒç´ ç‚¹æ‰€å ç”¨çš„å¤§å°(size)äº†</p></blockquote><p>å› ä¸ºæ»¤æ³¢å¼•æ“æ˜¯ä¸€ä¸ªé€šç”¨å¼•æ“ï¼Œè¿˜å¯ç”¨ä»¥é©±åŠ¨å…¶ä»–çš„æ»¤æ³¢å™¨(ä¸­å€¼æ»¤æ³¢æˆ–è€…å…¶ä»–ä»€ä¹ˆçš„)æ‰€ä»¥ä¸»è¦çš„å°±åªä¸è¿‡æ˜¯æ ¹æ®ä¸€äº›ä¿¡æ¯åˆå§‹åŒ–ç”¨ä»¥åé¢çš„æ“ä½œ(å°±æ˜¯initå‡½æ•°çš„æ„æ€)ã€‚</p><p>è¿”å›äº†æ»¤æ³¢å¼•æ“ä¹‹åä¾¿æ˜¯è°ƒç”¨äº†ï¼Œè¿™ä¸ªæ˜¯<code>apply</code>å‡½æ•°:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">FilterEngine::apply</span><span class="params">(<span class="keyword">const</span> Mat&amp; src, Mat&amp; dst, <span class="keyword">const</span> Size &amp; wsz, <span class="keyword">const</span> Point &amp; ofs)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    CV_INSTRUMENT_REGION()</span><br><span class="line"></span><br><span class="line">    CV_Assert( src.type() == srcType &amp;&amp; dst.type() == dstType );</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è¿”å›å˜åŒ–yå€¼</span></span><br><span class="line">    <span class="keyword">int</span> y = start(src, wsz, ofs);</span><br><span class="line">    <span class="comment">// ä¼ å‚çš„æ—¶å€™åˆ‡é™¤ç¬¬ä¸€è¡Œä¸æœ€åä¸€åˆ—</span></span><br><span class="line">    proceed(src.ptr() + y*src.<span class="built_in">step</span>,</span><br><span class="line">            (<span class="keyword">int</span>)src.<span class="built_in">step</span>,</span><br><span class="line">            endY - startY,</span><br><span class="line">            dst.ptr(),</span><br><span class="line">            (<span class="keyword">int</span>)dst.<span class="built_in">step</span> );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>start</code>ä¾¿æ˜¯å¼€å§‹å‡½æ•°åé¢çš„<code>proceed</code>åˆ™æ˜¯æŒç»­å·ç§¯åˆ°æ•´ä¸ªå›¾åƒçš„å…³é”®ï¼Œ<code>start</code>å‡½æ•°æœ€ç»ˆè¿”å›äº†èµ·å§‹çš„Yå€¼ï¼Œä¸€å¥ä¸€å¥å†™å¤ªç´¯äº†ï¼Œæˆ‘å°±ä¸è§£é‡Šäº†ï¼Œåªè´´å‡º<code>start</code>ä¸<code>proceed</code>å‡½æ•°ï¼š</p><p>*<em>è¿™ä¸¤å—å…¶å®åœ¨ä¸‹åˆ†æçš„å¾ˆå·®ï¼Œå¾ˆå¤šå‡½æ•°éƒ½æ²¡çœ‹æ‡‚ï¼Œæœ‰å¾ˆå¤§å¯èƒ½é”™è¯¯ï¼Œå»ºè®®å…ˆè·³è¿‡ï¼Œåœ¨ä¸‹ä»¥åc++å­¦é€äº†è¿˜ä¼šå›æ¥æ”¹çš„ã€‚ *</em></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">æ»¤æ³¢å¼•æ“</span></span><br><span class="line"><span class="comment">å‘åŠ¨ï¼</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">FilterEngine::start</span><span class="params">(<span class="keyword">const</span> Mat&amp; src, <span class="keyword">const</span> Size &amp;wsz, <span class="keyword">const</span> Point &amp;ofs)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    start( wsz, src.<span class="built_in">size</span>(), ofs);</span><br><span class="line">    <span class="keyword">return</span> startY - ofs.y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">FilterEngine::start</span><span class="params">(<span class="keyword">const</span> Size &amp;_wholeSize, <span class="keyword">const</span> Size &amp;sz, <span class="keyword">const</span> Point &amp;ofs)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line"></span><br><span class="line">    wholeSize = _wholeSize;</span><br><span class="line">    <span class="comment">// æ ¹æ®åç§»é‡ä¸çŸ©é˜µå¤´è®¾ç½®èŒƒå›´</span></span><br><span class="line">    roi = Rect(ofs, sz);</span><br><span class="line">    <span class="comment">// ä¾æ—§æ˜¯é”™è¯¯æ£€æµ‹ï¼Œå¾ˆå¥½æ‡‚</span></span><br><span class="line">    CV_Assert( roi.x &gt;= <span class="number">0</span> &amp;&amp; roi.y &gt;= <span class="number">0</span> &amp;&amp; roi.<span class="built_in">width</span> &gt;= <span class="number">0</span> &amp;&amp; roi.<span class="built_in">height</span> &gt;= <span class="number">0</span> &amp;&amp; roi.x + roi.<span class="built_in">width</span> &lt;= wholeSize.<span class="built_in">width</span> &amp;&amp; roi.y + roi.<span class="built_in">height</span> &lt;= wholeSize.<span class="built_in">height</span> );</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä¸‹é¢è¿™äº›ä¾æ—§æ˜¯åˆå§‹åŒ–</span></span><br><span class="line">    <span class="keyword">int</span> esz = (<span class="keyword">int</span>)getElemSize(srcType);</span><br><span class="line">    <span class="keyword">int</span> bufElemSize = (<span class="keyword">int</span>)getElemSize(bufType);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å®šå€¼æ£€æŸ¥</span></span><br><span class="line">    <span class="keyword">const</span> uchar* constVal = !constBorderValue.empty() ? &amp;constBorderValue[<span class="number">0</span>] : <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> _maxBufRows = <span class="built_in">std</span>::<span class="built_in">max</span>(ksize.<span class="built_in">height</span> + <span class="number">3</span>, <span class="built_in">std</span>::<span class="built_in">max</span>(anchor.y, ksize.<span class="built_in">height</span>-anchor.y<span class="number">-1</span>)*<span class="number">2</span>+<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>( maxWidth &lt; roi.<span class="built_in">width</span> || _maxBufRows != (<span class="keyword">int</span>)rows.<span class="built_in">size</span>() )</span><br><span class="line">    &#123;</span><br><span class="line">        rows.resize(_maxBufRows);</span><br><span class="line">        maxWidth = <span class="built_in">std</span>::<span class="built_in">max</span>(maxWidth, roi.<span class="built_in">width</span>);</span><br><span class="line">        <span class="keyword">int</span> cn = CV_MAT_CN(srcType);</span><br><span class="line">        srcRow.resize(esz*(maxWidth + ksize.<span class="built_in">width</span> - <span class="number">1</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>( columnBorderType == BORDER_CONSTANT )</span><br><span class="line">        &#123;</span><br><span class="line">            constBorderRow.resize(getElemSize(bufType)</span><br><span class="line">                                  *(maxWidth + ksize.<span class="built_in">width</span> - <span class="number">1</span> + VEC_ALIGN));</span><br><span class="line">            uchar *dst = alignPtr(&amp;constBorderRow[<span class="number">0</span>], VEC_ALIGN), *tdst;</span><br><span class="line">            <span class="keyword">int</span> n = (<span class="keyword">int</span>)constBorderValue.<span class="built_in">size</span>(), N;</span><br><span class="line">            N = (maxWidth + ksize.<span class="built_in">width</span> - <span class="number">1</span>)*esz;</span><br><span class="line">            tdst = isSeparable() ? &amp;srcRow[<span class="number">0</span>] : dst;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>( i = <span class="number">0</span>; i &lt; N; i += n )</span><br><span class="line">            &#123;</span><br><span class="line">                n = <span class="built_in">std</span>::<span class="built_in">min</span>( n, N - i );</span><br><span class="line">                <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">                    tdst[i+j] = constVal[j];</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>( isSeparable() )</span><br><span class="line">                (*rowFilter)(&amp;srcRow[<span class="number">0</span>], dst, maxWidth, cn);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> maxBufStep = bufElemSize*(<span class="keyword">int</span>)alignSize(maxWidth + (!isSeparable() ? ksize.<span class="built_in">width</span> - <span class="number">1</span> : <span class="number">0</span>),VEC_ALIGN);</span><br><span class="line">        ringBuf.resize(maxBufStep*rows.<span class="built_in">size</span>()+VEC_ALIGN);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒæ•´bufstepï¼Œä½¿ç¯å½¢ç¼“å†²åŒºçš„å·²ä½¿ç”¨éƒ¨åˆ†åœ¨å†…å­˜ä¸­ä¿æŒç´§å‡‘</span></span><br><span class="line">    bufStep = bufElemSize*(<span class="keyword">int</span>)alignSize(roi.<span class="built_in">width</span> + (!isSeparable() ? ksize.<span class="built_in">width</span> - <span class="number">1</span> : <span class="number">0</span>),<span class="number">16</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// dx1æ˜¯æ£€æµ‹é”šç‚¹ä½ç½®æ˜¯å¦ä¸èŒƒå›´è¾¹ç•Œæ£€æµ‹</span></span><br><span class="line">    dx1 = <span class="built_in">std</span>::<span class="built_in">max</span>(anchor.x - roi.x, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">// æ£€æµ‹å†…æ ¸æ˜¯å¦å­˜åœ¨åå·®</span></span><br><span class="line">    dx2 = <span class="built_in">std</span>::<span class="built_in">max</span>(ksize.<span class="built_in">width</span> - anchor.x - <span class="number">1</span> + roi.x + roi.<span class="built_in">width</span> - wholeSize.<span class="built_in">width</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœå­˜åœ¨åå·®åˆ™é‡æ–°è®¡ç®—è¾¹ç•Œè¡¨</span></span><br><span class="line">    <span class="keyword">if</span>( dx1 &gt; <span class="number">0</span> || dx2 &gt; <span class="number">0</span> )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>( rowBorderType == BORDER_CONSTANT )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> nr = isSeparable() ? <span class="number">1</span> : (<span class="keyword">int</span>)rows.<span class="built_in">size</span>();</span><br><span class="line">            <span class="keyword">for</span>( i = <span class="number">0</span>; i &lt; nr; i++ )</span><br><span class="line">            &#123;</span><br><span class="line">                uchar* dst = isSeparable() ? &amp;srcRow[<span class="number">0</span>] : alignPtr(&amp;ringBuf[<span class="number">0</span>],VEC_ALIGN) + bufStep*i;</span><br><span class="line">                <span class="comment">// åœ¨å†…å­˜ä¸­ç”¨åè€…å¡«å……å‰è€…ï¼Œæœ€åä¸€ä¸ªå‚æ•°æ˜¯å¤§å°</span></span><br><span class="line">                <span class="built_in">memcpy</span>( dst, constVal, dx1*esz );</span><br><span class="line">                <span class="built_in">memcpy</span>( dst + (roi.<span class="built_in">width</span> + ksize.<span class="built_in">width</span> - <span class="number">1</span> - dx2)*esz, constVal, dx2*esz );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> xofs1 = <span class="built_in">std</span>::<span class="built_in">min</span>(roi.x, anchor.x) - roi.x;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> btab_esz = borderElemSize, wholeWidth = wholeSize.<span class="built_in">width</span>;</span><br><span class="line">            <span class="keyword">int</span>* btab = (<span class="keyword">int</span>*)&amp;borderTab[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>( i = <span class="number">0</span>; i &lt; dx1; i++ )</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> p0 = (borderInterpolate(i-dx1, wholeWidth, rowBorderType) +  xofs1)*btab_esz;</span><br><span class="line">                <span class="keyword">for</span>( j = <span class="number">0</span>; j &lt; btab_esz; j++ )</span><br><span class="line">                    btab[i*btab_esz + j] = p0 + j;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>( i = <span class="number">0</span>; i &lt; dx2; i++ )</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> p0 = (borderInterpolate(wholeWidth + i, wholeWidth,  rowBorderType) + xofs1)*btab_esz;</span><br><span class="line">                <span class="keyword">for</span>( j = <span class="number">0</span>; j &lt; btab_esz; j++ )</span><br><span class="line">                    btab[(i + dx1)*btab_esz + j] = p0 + j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    rowCount = dstY = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    è¿™æ•´ä¸ªå‡½æ•°å…¶å®æœ€ç»ˆè¦çš„å°±æ˜¯è¿™ä¸ª</span></span><br><span class="line"><span class="comment">    ä¸Šé¢è¿™äº›éƒ½æ˜¯é˜²æ­¢é”™è¯¯è¿›è¡Œçš„è°ƒæ•´</span></span><br><span class="line"><span class="comment">    å¹¶ç”¨ä»¥è®¡ç®—ä¸‹é¢è¿™ä¸ªå€¼çš„</span></span><br><span class="line"><span class="comment">    è¿™ä¸ªstartYæ˜¯å¦ä¸€æ–¹å‘çš„åç¦»å€¼ï¼Œå°±æ˜¯è¯´ä¸€ä¸ªåƒç´ åˆ°å¦ä¸€ä¸ªåƒç´ çš„åç¦»é‡</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    startY = startY0 = <span class="built_in">std</span>::<span class="built_in">max</span>(roi.y - anchor.y, <span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    endY = <span class="built_in">std</span>::<span class="built_in">min</span>(roi.y + roi.<span class="built_in">height</span> + ksize.<span class="built_in">height</span> - anchor.y - <span class="number">1</span>, wholeSize.<span class="built_in">height</span>);</span><br><span class="line">    <span class="keyword">if</span>( columnFilter )</span><br><span class="line">        columnFilter-&gt;reset();</span><br><span class="line">    <span class="keyword">if</span>( filter2D )</span><br><span class="line">        filter2D-&gt;reset();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> startY;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">FilterEngine::proceed</span><span class="params">( <span class="keyword">const</span> uchar* src, <span class="keyword">int</span> srcstep, <span class="keyword">int</span> count,</span></span></span><br><span class="line"><span class="function"><span class="params">                           uchar* dst, <span class="keyword">int</span> dststep )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    CV_Assert( wholeSize.<span class="built_in">width</span> &gt; <span class="number">0</span> &amp;&amp; wholeSize.<span class="built_in">height</span> &gt; <span class="number">0</span> );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">int</span> *btab = &amp;borderTab[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">int</span> esz = (<span class="keyword">int</span>)getElemSize(srcType), btab_esz = borderElemSize;</span><br><span class="line">    uchar** brows = &amp;rows[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">int</span> bufRows = (<span class="keyword">int</span>)rows.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">int</span> cn = CV_MAT_CN(bufType);</span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">width</span> = roi.<span class="built_in">width</span>, kwidth = ksize.<span class="built_in">width</span>;</span><br><span class="line">    <span class="keyword">int</span> kheight = ksize.<span class="built_in">height</span>, ay = anchor.y;</span><br><span class="line">    <span class="keyword">int</span> _dx1 = dx1, _dx2 = dx2;</span><br><span class="line">    <span class="keyword">int</span> width1 = roi.<span class="built_in">width</span> + kwidth - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> xofs1 = <span class="built_in">std</span>::<span class="built_in">min</span>(roi.x, anchor.x);</span><br><span class="line">    <span class="keyword">bool</span> isSep = isSeparable();</span><br><span class="line">    <span class="keyword">bool</span> makeBorder = (_dx1 &gt; <span class="number">0</span> || _dx2 &gt; <span class="number">0</span>) &amp;&amp; rowBorderType != BORDER_CONSTANT;</span><br><span class="line">    <span class="keyword">int</span> dy = <span class="number">0</span>, i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    src -= xofs1*esz;</span><br><span class="line">    count = <span class="built_in">std</span>::<span class="built_in">min</span>(count, remainingInputRows());</span><br><span class="line"></span><br><span class="line">    CV_Assert( src &amp;&amp; dst &amp;&amp; count &gt; <span class="number">0</span> );</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    è¿™é‡Œå°±æ˜¯å·ç§¯çš„ä¸»å‡½æ•°äº†</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">for</span>(;; dst += dststep*i, dy += i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> dcount = bufRows - ay - startY - rowCount + roi.y;</span><br><span class="line">        dcount = dcount &gt; <span class="number">0</span> ? dcount : bufRows - kheight + <span class="number">1</span>;</span><br><span class="line">        dcount = <span class="built_in">std</span>::<span class="built_in">min</span>(dcount, count);</span><br><span class="line">        count -= dcount;</span><br><span class="line">        <span class="keyword">for</span>( ; dcount-- &gt; <span class="number">0</span>; src += srcstep )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> bi = (startY - startY0 + rowCount) % bufRows;</span><br><span class="line">            uchar* brow = alignPtr(&amp;ringBuf[<span class="number">0</span>], VEC_ALIGN) + bi*bufStep;</span><br><span class="line">            uchar* row = isSep ? &amp;srcRow[<span class="number">0</span>] : brow;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>( ++rowCount &gt; bufRows )</span><br><span class="line">            &#123;</span><br><span class="line">                --rowCount;</span><br><span class="line">                ++startY;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">memcpy</span>( row + _dx1*esz, src, (width1 - _dx2 - _dx1)*esz );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>( makeBorder )</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>( btab_esz*(<span class="keyword">int</span>)<span class="keyword">sizeof</span>(<span class="keyword">int</span>) == esz )</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">const</span> <span class="keyword">int</span>* isrc = (<span class="keyword">const</span> <span class="keyword">int</span>*)src;</span><br><span class="line">                    <span class="keyword">int</span>* irow = (<span class="keyword">int</span>*)row;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">for</span>( i = <span class="number">0</span>; i &lt; _dx1*btab_esz; i++ )</span><br><span class="line">                        irow[i] = isrc[btab[i]];</span><br><span class="line">                    <span class="keyword">for</span>( i = <span class="number">0</span>; i &lt; _dx2*btab_esz; i++ )</span><br><span class="line">                        irow[i + (width1 - _dx2)*btab_esz] =  isrc[btab[i+_dx1*btab_esz]];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">for</span>( i = <span class="number">0</span>; i &lt; _dx1*esz; i++ )</span><br><span class="line">                        row[i] = src[btab[i]];</span><br><span class="line">                    <span class="keyword">for</span>( i = <span class="number">0</span>; i &lt; _dx2*esz; i++ )</span><br><span class="line">                        row[i + (width1 - _dx2)*esz] = src[btab[i+_dx1*esz]];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>( isSep )</span><br><span class="line">                (*rowFilter)(row, brow, <span class="built_in">width</span>, CV_MAT_CN(srcType));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> max_i = <span class="built_in">std</span>::<span class="built_in">min</span>(bufRows, roi.<span class="built_in">height</span> - (dstY + dy) + (kheight - <span class="number">1</span>));</span><br><span class="line">        <span class="keyword">for</span>( i = <span class="number">0</span>; i &lt; max_i; i++ )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> srcY = borderInterpolate(dstY + dy + i + roi.y - ay, wholeSize.<span class="built_in">height</span>, columnBorderType);</span><br><span class="line">            <span class="keyword">if</span>( srcY &lt; <span class="number">0</span> ) <span class="comment">// can happen only with constant border type</span></span><br><span class="line">                brows[i] = alignPtr(&amp;constBorderRow[<span class="number">0</span>], VEC_ALIGN);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                CV_Assert( srcY &gt;= startY );</span><br><span class="line">                <span class="keyword">if</span>( srcY &gt;= startY + rowCount )</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">int</span> bi = (srcY - startY0) % bufRows;</span><br><span class="line">                brows[i] = alignPtr(&amp;ringBuf[<span class="number">0</span>], VEC_ALIGN) + bi*bufStep;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>( i &lt; kheight )</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        i -= kheight - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>( isSeparable() )</span><br><span class="line">            (*columnFilter)((<span class="keyword">const</span> uchar**)brows, dst, dststep, i, roi.<span class="built_in">width</span>*cn);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            (*filter2D)((<span class="keyword">const</span> uchar**)brows, dst, dststep, i, roi.<span class="built_in">width</span>, cn);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dstY += dy;</span><br><span class="line">    CV_Assert( dstY &lt;= roi.<span class="built_in">height</span> );</span><br><span class="line">    <span class="keyword">return</span> dy;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li>C++è¯­æ³•å¤æ‚åº¦æ„Ÿè§‰ä¸–ç•Œä¸Šæ’çš„äº†å‰å</li><li>å¤æ‚ä½†å´ä¹Ÿæ˜¯å°‘æœ‰çš„å¯ä»¥ç›´æ¥æ“ä½œå†…å­˜çš„è¯­è¨€ä¹‹ä¸€ï¼Œå†…è”æ±‡ç¼–æ•ˆç‡ä¸è¦å¤ªé«˜</li><li>ç”¨è½®å­å¾ˆç®€å•ï¼Œä½†æ˜¯é€ è½®å­å¾ˆéš¾ï¼Œé€ å‡ºæ™®é€‚æ€§çš„è½®å­æ›´éš¾ï¼Œè‡ªå·±ç”¨æ„Ÿè§‰æœ‰äº›ç®—æ³•è¿˜æ˜¯å¾ˆå®¹æ˜“å†™çš„ï¼Œä½†æ˜¯è¦ç…§é¡¾åˆ°å¤§é‡çš„å…¶ä»–è¯­æ³•æˆ–è€…å¹³å°é‚£å°±å¾ˆå›°éš¾äº†</li><li>ä¼˜åŒ–ä¸ä¸€å®šæ˜¯è‡ªå·±ç®—æ³•çš„ä¼˜åŒ–ï¼Œè¿˜æœ‰ä½¿ç”¨å¹³å°çš„ä¼˜åŒ–ï¼Œç”¨åˆ«äººçš„è½®å­çœŸçš„å¾ˆçˆ½</li><li>å¤§å‹é¡¹ç›®é‡Œé¢ä»£ç é£æ ¼å„å¼‚ï¼Œå˜é‡å‘½åæ–¹æ¡ˆæ¯”è¾ƒæ··ä¹±ï¼Œå¹¶ä¸”ç®€å†™çš„æ¯”è¾ƒå¤šï¼Œçœ‹èµ·æ¥çœŸçš„å¤´å¤§ã€‚ã€‚ã€‚ã€‚</li><li>åœ¨ä¸‹çš„ä»£ç é€»è¾‘æ€ç»´è¿˜æ˜¯å¤ªä½äº†ï¼Œå¸Œæœ›èƒ½å¤Ÿåœ¨æ¯•ä¸šçš„æ—¶å€™çœ‹ä¸Š20000è¡Œä»£ç ç”¨ä»¥æå‡è‡ªå·±</li><li>ç›¸æ¯”ä¹‹ä¸‹pythonæºç çœ‹èµ·æ¥çœŸçš„èˆ’æœæ­»äº†55555</li></ul><h2 id="å€Ÿç‰©è¡¨"><a href="#å€Ÿç‰©è¡¨" class="headerlink" title="å€Ÿç‰©è¡¨"></a>å€Ÿç‰©è¡¨</h2><ul><li><a href="https://www.cnblogs.com/marvin-notes/p/4482805.html" target="_blank" rel="noopener"><strong>attribute</strong> æœºåˆ¶è¯¦è§£(ä¸€)</a></li><li><a href="https://stackoverflow.com/questions/19908922/what-is-this-ifdef-gnuc-about" target="_blank" rel="noopener">What is this #ifdef <strong>GNUC</strong> about?</a></li><li><a href="https://www.cnblogs.com/testlife007/p/8134702.html" target="_blank" rel="noopener">å…³äºVCé¢„å®šä¹‰å¸¸é‡_WIN32ï¼ŒWIN32ï¼Œ_WIN64ç­‰é¢„å®šä¹‰å®çš„ä»‹ç»ï¼ˆæ•´ç†ã€è½¬è½½ï¼‰</a></li><li><a href="http://www.voidcn.com/article/p-uolrpafg-bcx.html" target="_blank" rel="noopener">opencvçš„CV_EXPORT</a></li><li><a href="https://www.cnblogs.com/wangguchangqing/p/6407717.html" target="_blank" rel="noopener">å›¾åƒå¤„ç†åŸºç¡€(4)ï¼šé«˜æ–¯æ»¤æ³¢å™¨è¯¦è§£</a></li><li><a href="https://blog.csdn.net/u012707739/article/details/80170671" target="_blank" rel="noopener">C/C++ å¯å˜å‚æ•°å®ä¸<strong>VA_ARGS</strong> å®</a></li><li><a href="https://blog.csdn.net/q2519008/article/details/80934815" target="_blank" rel="noopener">#ã€##ã€<strong>VA_ARGS</strong>å’Œ##<strong>VA_ARGS</strong>çš„ä½œç”¨</a></li><li><a href="https://blog.csdn.net/sx1503198/article/details/51764367" target="_blank" rel="noopener">OpenVXåµŒå…¥å¼å›¾åƒå¤„ç†ï¼ˆä¸€ï¼‰ç¡¬ä»¶å¹³å°åŠè½¯ä»¶ä»‹ç»</a></li><li><a href="https://blog.csdn.net/jia20003/article/details/69802932" target="_blank" rel="noopener">OpenCV3.xä¸­UMatå¯¹è±¡ä»‹ç»ä¸ä½¿ç”¨</a></li><li><a href="https://blog.csdn.net/qq_26460507/article/details/60154061" target="_blank" rel="noopener">opencvå­¦ä¹ ä¹‹GaussianBlur()æºç è§£æ</a></li><li><a href="https://blog.csdn.net/u011028771/article/details/80556457" target="_blank" rel="noopener">æ‰‹æ’•OpenCVæºç ä¹‹GaussianBlur</a></li><li><a href="https://www.xuebuyuan.com/1054789.html" target="_blank" rel="noopener">OpenCVçš„ä¸€äº›å®</a></li></ul><p><strong>æ„Ÿè°¢ä»¥ä¸Šå„ä½å¤§ä½¬ç»™åœ¨ä¸‹æä¾›çš„å„ç±»çŸ¥è¯†</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;å› ä¸ºå®éªŒå®¤å‡æœŸéœ€è¦å†™ä¸€ç¯‡å…³äºopencvçš„ä½œä¸š æ‰€ä»¥é¡ºä¾¿çœ‹äº†ä¸€ä¸‹opencv(ç‰ˆæœ¬3.2.0)é‡Œé¢å…³äºé«˜æ–¯æ¨¡ç³Šçš„æºç &lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="study" scheme="http://blog.fivezha.cn/categories/study/"/>
    
    
      <category term="cv" scheme="http://blog.fivezha.cn/tags/cv/"/>
    
      <category term="c++" scheme="http://blog.fivezha.cn/tags/c/"/>
    
  </entry>
  
  <entry>
    <title>nazo.ioæ”»ç•¥(å®Œ)</title>
    <link href="http://blog.fivezha.cn/2018/10/15/nazo-io-answer/"/>
    <id>http://blog.fivezha.cn/2018/10/15/nazo-io-answer/</id>
    <published>2018-10-15T11:22:26.000Z</published>
    <updated>2020-07-18T15:32:43.097Z</updated>
    
    <content type="html"><![CDATA[<p>æœ‰ç‚¹åƒå°å­¦ç©è¿‡çš„æŸä¸ªè§£å¯†æ¸¸æˆçš„æ¸¸æˆ  å¶ç„¶åˆå‘ç°äº†è¿™ç§ç±»å‹çš„æ¸¸æˆ é„™äººç©äº†2ä¸ªå°æ—¶ å†™äº†ç‚¹æ”»ç•¥ å¸Œæœ›èƒ½å¤Ÿå¸®åˆ°ä½ </p><a id="more"></a><h3 id="é¡ºä¾¿é™„ä¸Šç½‘å€-å…¶å®å°±æ˜¯nazo-io"><a href="#é¡ºä¾¿é™„ä¸Šç½‘å€-å…¶å®å°±æ˜¯nazo-io" class="headerlink" title="é¡ºä¾¿é™„ä¸Šç½‘å€(å…¶å®å°±æ˜¯nazo.io)"></a><a href="https://nazo.io/" target="_blank" rel="noopener">é¡ºä¾¿é™„ä¸Šç½‘å€(å…¶å®å°±æ˜¯nazo.io)</a></h3><h3 id="1-æ¬¢è¿"><a href="#1-æ¬¢è¿" class="headerlink" title="1.æ¬¢è¿"></a>1.æ¬¢è¿</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw949qhqf5j30ih0dk0sv.jpg" alt="1" title="">                </div>                <div class="image-caption">1</div>            </figure><p>ç›´æ¥è¾“å…¥:<strong>welcome</strong>å³å¯</p><h3 id="2-è§„åˆ™"><a href="#2-è§„åˆ™" class="headerlink" title="2.è§„åˆ™"></a>2.è§„åˆ™</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw949qjrz1j30f10ax0sr.jpg" alt="2" title="">                </div>                <div class="image-caption">2</div>            </figure><p>ç‚¹å‡»ï¼škeyå³å¯å‡ºç°ç­”æ¡ˆâ€”â€”<strong>gotcha</strong></p><h3 id="3-ä»å³å¾€å·¦å¿µ"><a href="#3-ä»å³å¾€å·¦å¿µ" class="headerlink" title="3.ä»å³å¾€å·¦å¿µ"></a>3.ä»å³å¾€å·¦å¿µ</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw949qml7ij30fb0b6aa2.jpg" alt="3" title="">                </div>                <div class="image-caption">3</div>            </figure><p>é¡¾åæ€ä¹‰ï¼Œä»å³å¾€å·¦å¿µï¼škey is where</p><p>ç­”æ¡ˆä¾¿æ˜¯ï¼š<strong>where</strong></p><h3 id="4-å®Œå½¢å¡«ç©º"><a href="#4-å®Œå½¢å¡«ç©º" class="headerlink" title="4.å®Œå½¢å¡«ç©º"></a>4.å®Œå½¢å¡«ç©º</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw949qlt8pj30gy0apq2y.jpg" alt="4" title="">                </div>                <div class="image-caption">4</div>            </figure><p><strong>è¿™å…³ä¾¿æ˜¯æ•™ä½ ä½¿ç”¨æœç´¢å¼•æ“æœç´¢ç­”æ¡ˆï¼ˆå…¶å®å¤§å¤šæ•°æ—¶é—´æœä¸åˆ°ã€‚ã€‚ã€‚ã€‚</strong></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw949qnadzj30lh0d375d.jpg" alt="ç™¾åº¦" title="">                </div>                <div class="image-caption">ç™¾åº¦</div>            </figure><p>ç­”æ¡ˆä¾¿æ˜¯ï¼š<strong>survival</strong></p><h3 id="5-Morse"><a href="#5-Morse" class="headerlink" title="5.Morse"></a>5.Morse</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw949ql6f1j30hr0a53yf.jpg" alt="5" title="">                </div>                <div class="image-caption">5</div>            </figure><p>æ‘©å°”æ–¯ç”µç ï¼Œæ²¡ä»€ä¹ˆå¥½è¯´çš„</p><p>ç­”æ¡ˆï¼š<strong>sos</strong></p><h3 id="6-Base64"><a href="#6-Base64" class="headerlink" title="6.Base64"></a>6.Base64</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw949qon6pj30gq0bxglo.jpg" alt="6" title="">                </div>                <div class="image-caption">6</div>            </figure><p>å°±æ˜¯base64è§£ç  éšä¾¿æ‰¾ä¸ªç½‘ç«™å°±è¡Œäº†</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw949quc7cj30jr0bz75v.jpg" alt="è§£å¯†" title="">                </div>                <div class="image-caption">è§£å¯†</div>            </figure><p>ç­”æ¡ˆï¼š<strong>1029174037</strong></p><h3 id="6-Base64-æ–°"><a href="#6-Base64-æ–°" class="headerlink" title="6.Base64(æ–°)"></a>6.Base64(æ–°)</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pics/image-20200712000900198.png" alt="image-20200712000900198" title="">                </div>                <div class="image-caption">image-20200712000900198</div>            </figure><p>ç­”æ¡ˆï¼š<strong>bytealigned</strong></p><h3 id="7-OICQ"><a href="#7-OICQ" class="headerlink" title="7.OICQ"></a>7.OICQ</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw949qpr45j30fg0b3dfv.jpg" alt="7" title="">                </div>                <div class="image-caption">7</div>            </figure><p>è¿™ä¸ªæ ‡é¢˜æ˜¯qqçš„å‰èº«åç§°</p><p>è¿™é‡Œæœ‰ä¸ªæç¤ºï¼šä½ <a href="https://nazo.io/6" target="_blank" rel="noopener">åˆš</a>è¾“å…¥äº†ä»€ä¹ˆï¼Ÿ/ä»¥åŠè”ç³»ä½œè€…</p><p>å¾ˆæ¸…æ¥š ï¼Œä¸Šä¸€é¢˜çš„ç­”æ¡ˆå°±æ˜¯ä½œè€…çš„QQå·</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw949qp17sj30cq09xmxl.jpg" alt="qqæœç´¢" title="">                </div>                <div class="image-caption">qqæœç´¢</div>            </figure><p>çœ‹ æœä¸å…¶ç„¶</p><p>ç­”æ¡ˆï¼š<strong>macintosh</strong></p><h3 id="7-RCNB-app-æ–°"><a href="#7-RCNB-app-æ–°" class="headerlink" title="7.RCNB.app(æ–°)"></a>7.RCNB.app(æ–°)</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pics/image-20200712001003985.png" alt="image-20200712001003985" title="">                </div>                <div class="image-caption">image-20200712001003985</div>            </figure><p>ç¼–ç éšä¾¿ç™¾åº¦ä¸€ä¸‹å°±å‡ºæ¥äº†</p><p>ç­”æ¡ˆï¼š<strong>unprintable</strong></p><h3 id="8-IDNs"><a href="#8-IDNs" class="headerlink" title="8.IDNs"></a>8.IDNs</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw949qa1llj30gd0bh0sp.jpg" alt="8" title="">                </div>                <div class="image-caption">8</div>            </figure><p>è¿™ä¸ªé¢˜ä¹Ÿæ˜¯é‚£ç§æ²¡æœ‰çŸ¥è¯†å‰æå°±ä¸ä¼šçš„é‚£ç§</p><p>æ­£å·§å‰ä¸¤å¤©åˆšä¹°åŸŸåçš„æ—¶å€™çœ‹è§äº†ä¸­æ–‡åŸŸåï¼Œæ‰€ä»¥è¿™é¢˜å°caseğŸ˜„</p><p>ç›´æ¥è®¿é—®ï¼šé”™çš„æ˜¯.ä¸–ç•Œä¾¿å¯çŸ¥é“ç­”æ¡ˆ</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw949qccbgj314z03e3z3.jpg" alt="ç›´æ¥è®¿é—®" title="">                </div>                <div class="image-caption">ç›´æ¥è®¿é—®</div>            </figure><p>ç­”æ¡ˆï¼š<strong>saionjisekai</strong></p><h3 id="9-è§’åº¦"><a href="#9-è§’åº¦" class="headerlink" title="9.è§’åº¦"></a>9.è§’åº¦</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw949qt8x2j30hu0je40c.jpg" alt="9" title="">                </div>                <div class="image-caption">9</div>            </figure><p>è¿™å¼ å›¾ç‰‡æ˜¯æ–œè§’å›¾ç‰‡ï¼Œå°±æ˜¯å­—éƒ½å‘å†…åå‘äº†45Â°</p><p>ç”¨ç”»å›¾æ‰“å¼€æ‹‰é•¿ä¸€ä¸‹å°±çŸ¥é“ç­”æ¡ˆäº†ï¼š<strong>pineapple</strong></p><h3 id="10-å›åˆ°ä¸Šä¸–çºª"><a href="#10-å›åˆ°ä¸Šä¸–çºª" class="headerlink" title="10.å›åˆ°ä¸Šä¸–çºª"></a>10.å›åˆ°ä¸Šä¸–çºª</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw949qvavgj30f90i3gom.jpg" alt="10" title="">                </div>                <div class="image-caption">10</div>            </figure><p>å…¸å‹çš„ç™¾åº¦æœå›¾é¢˜ç›®</p><p>ç­”æ¡ˆï¼š<strong>mouse</strong></p><h3 id="11-Unicode"><a href="#11-Unicode" class="headerlink" title="11.Unicode"></a>11.Unicode</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw949qdfelj30h60b5wen.jpg" alt="11" title="">                </div>                <div class="image-caption">11</div>            </figure><p>å¯èƒ½éƒ¨åˆ†æ‰‹æœºå­—åº“æ”¯æŒä¸å…¨çœ‹ä¸äº†</p><p>ç­”æ¡ˆï¼š<strong>neweroslesstofu</strong></p><h3 id="11-Unicode-æ–°"><a href="#11-Unicode-æ–°" class="headerlink" title="11.Unicode(æ–°)"></a>11.Unicode(æ–°)</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pics/image-20200712001517859.png" alt="image-20200712001517859" title="">                </div>                <div class="image-caption">image-20200712001517859</div>            </figure><p>ç­”æ¡ˆï¼š<strong>oopscode</strong></p><h3 id="12-1A2B"><a href="#12-1A2B" class="headerlink" title="12.1A2B"></a>12.1A2B</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw949qattnj30gl0c9749.jpg" alt="12" title="">                </div>                <div class="image-caption">12</div>            </figure><p>å°æ—¶å€™çš„çŒœæ•°é¢˜ç›®</p><p>å¤§æ„æ˜¯ï¼šæœ‰ä¸€ä¸ªæœªçŸ¥æ•°éœ€è¦çŒœæµ‹</p><p>ä¸‹é¢0A0Bä»£è¡¨ä¸ä»…æ•°å­—æ²¡çŒœå¯¹ä½ç½®ä¹Ÿæ²¡çŒœå¯¹</p><p>0A2Bä»£è¡¨æ•°å­—çŒœå¯¹äº†ä¸¤ä¸ªä½†æ˜¯ä½ç½®æ²¡çŒœå¯¹</p><p>3A0Bä»£è¡¨ç€æ•°å­—è·Ÿä½ç½®éƒ½çŒœå¯¹çš„æœ‰ä¸‰ä½æœ‰ä¸€ä½æ•°å­—è·Ÿä½ç½®éƒ½æ²¡çŒœå¯¹</p><p>ç­”æ¡ˆï¼š<strong>9506</strong></p><h3 id="13-è™šæ— "><a href="#13-è™šæ— " class="headerlink" title="13.è™šæ— "></a>13.è™šæ— </h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw949qawkhj30i50bvmx2.jpg" alt="13" title="">                </div>                <div class="image-caption">13</div>            </figure><p>ä¸­é—´æœ‰å›¾ç‰‡ï¼Œæ–°çª—å£æ‰“å¼€ä¾¿å¯çŸ¥</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw949qbbc4j307w06jt8h.jpg" alt="æ–°é¡µé¢æ‰“å¼€" title="">                </div>                <div class="image-caption">æ–°é¡µé¢æ‰“å¼€</div>            </figure><p>ç­”æ¡ˆï¼š<strong>thealpha</strong></p><h3 id="14-æˆ‘çˆ±è®°æ­Œè¯"><a href="#14-æˆ‘çˆ±è®°æ­Œè¯" class="headerlink" title="14.æˆ‘çˆ±è®°æ­Œè¯"></a>14.æˆ‘çˆ±è®°æ­Œè¯</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw949qgnznj30fy0g0gm7.jpg" alt="14" title="">                </div>                <div class="image-caption">14</div>            </figure><p>hintæ˜¯é‡Œçš„æ­Œè¯æ˜¯ç§å­ï¼Œæ­Œååˆæ˜¯å°è‹¹æœï¼Œå›¾ç‰‡åå­—å«apple</p><p>ä¸ç”¨å¤šè¯´äº†å§ â€”â€”å›¾ç§</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw949qftumj30dv07qmyf.jpg" alt="å›¾ç§" title="">                </div>                <div class="image-caption">å›¾ç§</div>            </figure><p>ç­”æ¡ˆï¼š<strong>greendam</strong></p><h3 id="15-å£°éŸ³çš„è½¨è¿¹"><a href="#15-å£°éŸ³çš„è½¨è¿¹" class="headerlink" title="15.å£°éŸ³çš„è½¨è¿¹"></a>15.å£°éŸ³çš„è½¨è¿¹</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw949qgllmj30gm0atwei.jpg" alt="15" title="">                </div>                <div class="image-caption">15</div>            </figure><p>éŸ³æ³¢è§£æ éšä¾¿æ‰¾ä¸ªèƒ½çœ‹éŸ³æ³¢çš„è½¯ä»¶å°±è¡Œäº†</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw949qgu11j30cr075ab2.jpg" alt="å¦¹å­æŒºå¥½çœ‹" title="">                </div>                <div class="image-caption">å¦¹å­æŒºå¥½çœ‹</div>            </figure><p>ç­”æ¡ˆï¼š<strong>koenokiseki</strong></p><h3 id="16-è™šæ©"><a href="#16-è™šæ©" class="headerlink" title="16.è™šæ©"></a>16.è™šæ©</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw970hy3m4j30ga0cn0sn.jpg" alt="16" title="">                </div>                <div class="image-caption">16</div>            </figure><p>æ‰“å¼€éšè—å›¾ç‰‡ä¹‹åå‘ç°æ˜¯å¤šå±‚ç»“æ„</p><p>ç›´æ¥å°†é®ç½©å±‚å¤§å°æ”¹ä¸º0</p><p>keyæ˜¾ç°</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw970i23waj317j0mpn0d.jpg" alt="key" title="">                </div>                <div class="image-caption">key</div>            </figure><p>å¯†ç ï¼š<strong>secretvg</strong></p><h3 id="17-è™šç©º"><a href="#17-è™šç©º" class="headerlink" title="17.è™šç©º"></a>17.è™šç©º</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQly1fw98fbl0nhj30i10crdfp.jpg" alt="17" title="">                </div>                <div class="image-caption">17</div>            </figure><p>ç©ºæ ¼åˆ‡æ¢ è¿™é‡Œçš„å­—ç¬¦ç”±å…¨è§’è·ŸåŠè§’çš„ç©ºæ ¼ç»„æˆ æ›¿æ¢ä»»æ„ä¸€ç§ä¾¿å¯çŸ¥é“ç­”æ¡ˆ</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw98gt6vvwj30k00cpaaz.jpg" alt="ç­”æ¡ˆ" title="">                </div>                <div class="image-caption">ç­”æ¡ˆ</div>            </figure><p>ç­”æ¡ˆï¼š<strong>entropy</strong></p><h3 id="18-Twitter"><a href="#18-Twitter" class="headerlink" title="18.Twitter"></a>18.Twitter</h3><p>ç§‘å­¦ä¸Šç½‘</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQly1fw98fblypnj30hp0dnjrk.jpg" alt="18" title="">                </div>                <div class="image-caption">18</div>            </figure><p>æ‰“å¼€å‘ç°å±…ç„¶ä½œè€…æ˜¯ä½æ‰“ctfçš„å¤§ä½¬</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQly1fw98fbpojoj30gn0lt429.jpg" alt="ä½œè€…æ¨ç‰¹" title="">                </div>                <div class="image-caption">ä½œè€…æ¨ç‰¹</div>            </figure><p>ç­”æ¡ˆï¼š<strong>th4nky0u</strong></p><h3 id="18-Twitter-æ–°"><a href="#18-Twitter-æ–°" class="headerlink" title="18.Twitter(æ–°)"></a>18.Twitter(æ–°)</h3><p>è®¿é—®ä¸€ä¸‹urlå°±å¯ä»¥çŸ¥é“äº†</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="pics/image-20200712001718333.png" alt="image-20200712001718333" title="">                </div>                <div class="image-caption">image-20200712001718333</div>            </figure><p>ç­”æ¡ˆï¼š<strong>shortweet</strong></p><h3 id="19-æœ€å"><a href="#19-æœ€å" class="headerlink" title="19.æœ€å"></a>19.æœ€å</h3><p>æ„Ÿè°¢è¯­</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fw98kipw7hj30fr0fht8s.jpg" alt="hit3" title="">                </div>                <div class="image-caption">hit3</div>            </figure><p>æˆ‘æ˜¯<strong>20</strong>ä½é€šå…³çš„(æ­£å„¿å…«ç»çš„ç¬¬20ä½ â†.hit1)ï¼Œ<strong>ä½ å‘¢ï¼Ÿ</strong></p><h3 id="20-å¼ºè¿«ç—‡ä¸æ€»ç»“"><a href="#20-å¼ºè¿«ç—‡ä¸æ€»ç»“" class="headerlink" title="20.å¼ºè¿«ç—‡ä¸æ€»ç»“"></a>20.å¼ºè¿«ç—‡ä¸æ€»ç»“</h3><p>(â†‘.hit2)</p><p>èŠ±äº†æˆ‘2ä¸ªå¤šå°æ—¶çš„æ¸¸æˆç»ˆäºå®Œç¾è½ä¸‹äº†å¸·å¹•</p><p>æœŸåˆæˆ‘åªæ˜¯æƒ³åˆ†äº«ä¸€ä¸‹åœ¨ç¾¤é‡Œï¼Œæ²¡æƒ³åˆ°å¤§å®¶å…´è‡´å¦‚æ­¤ä¹‹é«˜ï¼Œä»¥è‡³äºæœ€åéƒ½ä¸ºæ‰¾åˆ°ä¸€ä¸ªä¸ªkeyè€Œå…´è‡´é«˜æ¶¨ğŸ˜„</p><p>è¿™ç§æ¸¸æˆæœç„¶éœ€è¦è·Ÿå¤§å®¶ä¸€èµ·ç©æ‰æœ‰æ„æ€å˜›</p><p>æ€»ä¹‹ï¼Œæ¸¸æˆä½“éªŒè‰¯å¥½ï¼Œ5â­ï¸ å¥½è¯„ï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ‰ç‚¹åƒå°å­¦ç©è¿‡çš„æŸä¸ªè§£å¯†æ¸¸æˆçš„æ¸¸æˆ  å¶ç„¶åˆå‘ç°äº†è¿™ç§ç±»å‹çš„æ¸¸æˆ é„™äººç©äº†2ä¸ªå°æ—¶ å†™äº†ç‚¹æ”»ç•¥ å¸Œæœ›èƒ½å¤Ÿå¸®åˆ°ä½ &lt;/p&gt;
    
    </summary>
    
    
      <category term="games" scheme="http://blog.fivezha.cn/categories/games/"/>
    
    
      <category term="game" scheme="http://blog.fivezha.cn/tags/game/"/>
    
  </entry>
  
  <entry>
    <title>LaTeXæ•°å­¦ç¬¦å·</title>
    <link href="http://blog.fivezha.cn/2018/09/08/LaTeX-math-symbols/"/>
    <id>http://blog.fivezha.cn/2018/09/08/LaTeX-math-symbols/</id>
    <published>2018-09-08T14:02:03.000Z</published>
    <updated>2020-07-11T13:36:10.559Z</updated>
    
    <content type="html"><![CDATA[<p>è‡ªå·±çš„LaTeXç¬”è®°</p><a id="more"></a><h2 id="å…ˆè´´æ•™ç¨‹æ€»è§ˆï¼ï¼"><a href="#å…ˆè´´æ•™ç¨‹æ€»è§ˆï¼ï¼" class="headerlink" title="å…ˆè´´æ•™ç¨‹æ€»è§ˆï¼ï¼"></a><a href="https://blog.csdn.net/garfielder007/article/details/51646604#t2" target="_blank" rel="noopener">å…ˆè´´æ•™ç¨‹æ€»è§ˆï¼ï¼</a></h2><h2 id="å…¬å¼"><a href="#å…¬å¼" class="headerlink" title="å…¬å¼"></a>å…¬å¼</h2><h3 id="å¸¸ç”¨å­—ç¬¦"><a href="#å¸¸ç”¨å­—ç¬¦" class="headerlink" title="å¸¸ç”¨å­—ç¬¦"></a>å¸¸ç”¨å­—ç¬¦</h3><ul><li>$$ + enterä¾¿å¯è¿›å…¥LaTeXç¼–è¾‘æ¨¡å¼</li><li>^ ä¸Šæ ‡</li><li>_ ä¸‹æ ‡</li><li>{} å—/åˆ†ç»„</li></ul><h3 id="å¸¸ç”¨ç¯å¢ƒ"><a href="#å¸¸ç”¨ç¯å¢ƒ" class="headerlink" title="å¸¸ç”¨ç¯å¢ƒ"></a>å¸¸ç”¨ç¯å¢ƒ</h3><blockquote><p>\begin{equation}</p><p><strong>è‡ªåŠ¨ç¼–å·</strong> \label(eq: ```)<strong>æ ‡ç­¾</strong></p><p>\end{equation}</p><p>\ref{eq:} <strong>å¼•ç”¨</strong></p></blockquote><h2 id="ç¬¦å·"><a href="#ç¬¦å·" class="headerlink" title="ç¬¦å·"></a>ç¬¦å·</h2><h3 id="å¸Œè…Šå­—æ¯"><a href="#å¸Œè…Šå­—æ¯" class="headerlink" title="å¸Œè…Šå­—æ¯"></a>å¸Œè…Šå­—æ¯</h3><ul><li>\alpha</li><li>\beta</li><li>\gamma</li><li>\epsilon</li><li>\pi</li><li>\omerga</li></ul><ul><li>\Gamma</li><li>\Delta</li><li>\Theta</li><li>\Pi</li><li>\Omega</li></ul><h3 id="å¸¸ç”¨å‡½æ•°"><a href="#å¸¸ç”¨å‡½æ•°" class="headerlink" title="å¸¸ç”¨å‡½æ•°"></a>å¸¸ç”¨å‡½æ•°</h3><ul><li>\log</li><li>\sin</li><li>\cos</li><li>\arcsin</li><li>\arccos</li><li>\ln</li><li>\sqrt[]{} <strong>æ ¹å¼</strong></li><li>\frac{}{} <strong>åˆ†å¼</strong></li></ul><h2 id="çŸ©é˜µ"><a href="#çŸ©é˜µ" class="headerlink" title="çŸ©é˜µ"></a>çŸ©é˜µ</h2><blockquote><p>\begin{matrix}</p><pre><code>1 &amp; 1 \\\1 &amp; 1</code></pre><p>\end{matrix}</p><p>å…¶ä¸­ï¼š</p><p>&amp; åˆ†å‰²<strong>åˆ—</strong></p><p>\   åˆ†å‰²<strong>è¡Œ</strong></p><p>på°æ‹¬å·</p><p>bä¸­æ‹¬å·</p><p>Bå¤§æ‹¬å·</p><p>vå•ç«–çº¿</p><p>VåŒç«–çº¿</p></blockquote><ul><li>\dots <strong>æ¨ªå‘çœç•¥å·</strong></li><li>\vdots <strong>ç«–å‘çœç•¥å·</strong></li><li>\ddots <strong>æ–œå‘çœç•¥å·</strong></li><li>{n \times n} <strong>n x n</strong></li></ul><h3 id="åˆ†å—çŸ©é˜µ-çŸ©é˜µåµŒå¥—"><a href="#åˆ†å—çŸ©é˜µ-çŸ©é˜µåµŒå¥—" class="headerlink" title="åˆ†å—çŸ©é˜µ(çŸ©é˜µåµŒå¥—)"></a>åˆ†å—çŸ©é˜µ(çŸ©é˜µåµŒå¥—)</h3><h3 id="å…¶ä»–å‘½ä»¤"><a href="#å…¶ä»–å‘½ä»¤" class="headerlink" title="å…¶ä»–å‘½ä»¤"></a>å…¶ä»–å‘½ä»¤</h3><ul><li>\multicolumn{}{}{} <strong>åˆå¹¶å¤šåˆ—</strong></li><li>\raisebox{}[]{} <strong>è°ƒæ•´é«˜åº¦</strong></li><li>\hdotsfor{åˆ—æ•°} <strong>æ•´åˆ—çœç•¥å·</strong> </li></ul><blockquote><p>\left ( <strong>å·¦æ‹¬å·</strong></p><p>\begin{smallmatrix}</p><p>\end{smallmatrix}</p><p>\right ) <strong>å³æ‹¬å·</strong></p><p><strong>è¡Œå†…å°çŸ©é˜µ</strong></p></blockquote><blockquote><p>\begin{array}{c|c}</p><p>\hline <strong>åˆ†å‰²çº¿</strong></p><p>\end{array}</p></blockquote><h2 id="å¤šè¡Œå…¬å¼"><a href="#å¤šè¡Œå…¬å¼" class="headerlink" title="å¤šè¡Œå…¬å¼"></a>å¤šè¡Œå…¬å¼</h2><blockquote><p>\begin{gather}</p><p>==== \notag <strong>ä¸è‡ªåŠ¨ç¼–å·</strong> \ *<em>æ¢è¡Œ*</em></p><p>==== \ \</p><p>\end{gather}</p></blockquote><ul><li>{align}</li><li>{split}</li><li>{cases} <strong>åˆ†æ®µå‡½æ•°</strong></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è‡ªå·±çš„LaTeXç¬”è®°&lt;/p&gt;
    
    </summary>
    
    
      <category term="study" scheme="http://blog.fivezha.cn/categories/study/"/>
    
    
      <category term="latex" scheme="http://blog.fivezha.cn/tags/latex/"/>
    
  </entry>
  
  <entry>
    <title>gitè¶…ç®€å•æ•™ç¨‹</title>
    <link href="http://blog.fivezha.cn/2018/04/20/git-guide/"/>
    <id>http://blog.fivezha.cn/2018/04/20/git-guide/</id>
    <published>2018-04-20T12:34:09.000Z</published>
    <updated>2020-07-11T14:06:33.757Z</updated>
    
    <content type="html"><![CDATA[<p><strong><em>gitçš„è¶…ç®€å•ç”¨æ³•ï¼ˆä»¥test-repositoryä¸ºä¾‹ï¼‰</em></strong></p><a id="more"></a><h2 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h2><h3 id="1-åˆå§‹åŒ–gitçš„emailä¸name"><a href="#1-åˆå§‹åŒ–gitçš„emailä¸name" class="headerlink" title="1.åˆå§‹åŒ–gitçš„emailä¸name"></a>1.åˆå§‹åŒ–gitçš„emailä¸name</h3><p>é¦–å…ˆå…ˆæ‰“å¼€git(è¿™ä¸ªéšä¾¿åœ¨å“ªä¸ªæ–‡ä»¶å¤¹éƒ½å¯ä»¥)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git config --global user.name <span class="string">"è¿™é‡Œå†™ä½ çš„åå­—"</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --global user.email <span class="string">"è¿™é‡Œå†™ä½ çš„é‚®ç®±"</span></span></span><br></pre></td></tr></table></figure><h3 id="2-è®¾ç½®sshè¿æ¥"><a href="#2-è®¾ç½®sshè¿æ¥" class="headerlink" title="2.è®¾ç½®sshè¿æ¥"></a>2.è®¾ç½®sshè¿æ¥</h3><p>PSï¼šè¿™ä¸€æ­¥ä¸»è¦æ˜¯<strong>é˜²æ­¢ä»–äººç›—ç”¨ä½ çš„githubè´¦å·</strong>æ‰€è®¾ç½®çš„åŒé‡ä¿æŠ¤ï¼Œä»…æ˜¯ä¸ºäº†å®‰å…¨ï¼Œ<strong>ä¸è®¾ç½®</strong>è¿™æ­¥<strong>ä¹Ÿå¯è¿è¡Œ</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ssh-keygen -t rsa -C <span class="string">"è¿™é‡Œæ˜¯ä½ çš„é‚®ç®±"</span></span></span><br></pre></td></tr></table></figure><p>ç„¶åä½ èƒ½åœ¨ä½ <code>c://ç”¨æˆ·//13256(è¿™é‡Œæ˜¯ä½ çš„ç”¨æˆ·å)//.ssh</code>é‡Œé¢æ‰¾åˆ°ä»¥ä¸‹ä¸‰ä¸ªæ–‡ä»¶</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fx8xk8wkanj30g702k3yf.jpg" alt="æ–‡ä»¶åˆ—è¡¨" title="">                </div>                <div class="image-caption">æ–‡ä»¶åˆ—è¡¨</div>            </figure><p>ç„¶åç™»é™†githubç½‘ç«™ åœ¨settingé‡Œé¢æ‰¾åˆ°sshè®¾ç½® ç„¶åæ–°å»ºsshå¡«å…¥ä½ <code>id_rsa.pub</code>é‡Œé¢çš„ä¸œè¥¿å°±okäº†(titleéšä¾¿å¡«)</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fx8xk8xgioj305u09u74a.jpg" alt="setting" title="">                </div>                <div class="image-caption">setting</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/006ZO6XQgy1fx8xk8ywkqj30un0hwwff.jpg" alt="add key" title="">                </div>                <div class="image-caption">add key</div>            </figure><p>ç„¶åç‚¹<code>add key</code>å°±å®Œäº‹å„¿äº†</p><h2 id="è¿æ¥ä»“åº“"><a href="#è¿æ¥ä»“åº“" class="headerlink" title="è¿æ¥ä»“åº“"></a>è¿æ¥ä»“åº“</h2><h3 id="1-è·å–é¡¹ç›®URL"><a href="#1-è·å–é¡¹ç›®URL" class="headerlink" title="1.è·å–é¡¹ç›®URL"></a>1.è·å–é¡¹ç›®URL</h3><h4 id="é¦–å…ˆæ‰¾åˆ°ä½ æƒ³è¦cloneï¼ˆç±»ä¼¼ä¸‹è½½ï¼‰åˆ°æœ¬åœ°çš„é¡¹ç›®é¡µé¢"><a href="#é¦–å…ˆæ‰¾åˆ°ä½ æƒ³è¦cloneï¼ˆç±»ä¼¼ä¸‹è½½ï¼‰åˆ°æœ¬åœ°çš„é¡¹ç›®é¡µé¢" class="headerlink" title="é¦–å…ˆæ‰¾åˆ°ä½ æƒ³è¦cloneï¼ˆç±»ä¼¼ä¸‹è½½ï¼‰åˆ°æœ¬åœ°çš„é¡¹ç›®é¡µé¢"></a>é¦–å…ˆæ‰¾åˆ°ä½ æƒ³è¦cloneï¼ˆç±»ä¼¼ä¸‹è½½ï¼‰åˆ°æœ¬åœ°çš„é¡¹ç›®é¡µé¢</h4><h4 id="æŒ‰ç…§ç®­å¤´å¤åˆ¶é¡¹ç›®åœ°å€"><a href="#æŒ‰ç…§ç®­å¤´å¤åˆ¶é¡¹ç›®åœ°å€" class="headerlink" title="æŒ‰ç…§ç®­å¤´å¤åˆ¶é¡¹ç›®åœ°å€"></a>æŒ‰ç…§ç®­å¤´å¤åˆ¶é¡¹ç›®åœ°å€</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://wx2.sinaimg.cn/large/006ZO6XQly1fq7nac5d1vj30su0h7gmy.jpg" alt="enter image description here" title="">                </div>                <div class="image-caption">enter image description here</div>            </figure><h3 id="2-åœ¨æœ¬åœ°cloneé¡¹ç›®"><a href="#2-åœ¨æœ¬åœ°cloneé¡¹ç›®" class="headerlink" title="2.åœ¨æœ¬åœ°cloneé¡¹ç›®"></a>2.åœ¨æœ¬åœ°cloneé¡¹ç›®</h3><p><strong>é¦–å…ˆæ‰¾åˆ°ä½ æƒ³è¦åœ¨<em>æœ¬åœ°ç¡¬ç›˜</em>cloneï¼ˆä¸‹è½½ï¼‰çš„åœ°å€</strong></p><p><strong><em>å³é”®<em>ç‚¹å‡»</em>Git Bash Here</em></strong></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://wx4.sinaimg.cn/large/006ZO6XQly1fq7nabiwpzj30o40i4gnm.jpg" alt="enter image description here" title="">                </div>                <div class="image-caption">enter image description here</div>            </figure><p><strong>ç„¶åè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼ˆå°±åªæœ‰ç¬¬ä¸€è¡Œï¼‰</strong></p><h4 id="git-clone-ä½ åˆšåˆšå¤åˆ¶çš„ç½‘å€"><a href="#git-clone-ä½ åˆšåˆšå¤åˆ¶çš„ç½‘å€" class="headerlink" title="git clone ä½ åˆšåˆšå¤åˆ¶çš„ç½‘å€"></a>git clone ä½ åˆšåˆšå¤åˆ¶çš„ç½‘å€</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://wx4.sinaimg.cn/large/006ZO6XQly1fq7naco5yhj30gj0ahglw.jpg" alt="enter image description here" title="">                </div>                <div class="image-caption">enter image description here</div>            </figure><h4 id="å®Œæˆåå…³é—­è¿™ä¸ªå‘½ä»¤æç¤ºæ¡†ï¼"><a href="#å®Œæˆåå…³é—­è¿™ä¸ªå‘½ä»¤æç¤ºæ¡†ï¼" class="headerlink" title="å®Œæˆåå…³é—­è¿™ä¸ªå‘½ä»¤æç¤ºæ¡†ï¼"></a><center>å®Œæˆåå…³é—­è¿™ä¸ªå‘½ä»¤æç¤ºæ¡†ï¼</center></h4><h4 id="å®Œæˆåå…³é—­è¿™ä¸ªå‘½ä»¤æç¤ºæ¡†ï¼-1"><a href="#å®Œæˆåå…³é—­è¿™ä¸ªå‘½ä»¤æç¤ºæ¡†ï¼-1" class="headerlink" title="å®Œæˆåå…³é—­è¿™ä¸ªå‘½ä»¤æç¤ºæ¡†ï¼"></a><center>å®Œæˆåå…³é—­è¿™ä¸ªå‘½ä»¤æç¤ºæ¡†ï¼</center></h4><h4 id="å®Œæˆåå…³é—­è¿™ä¸ªå‘½ä»¤æç¤ºæ¡†ï¼-2"><a href="#å®Œæˆåå…³é—­è¿™ä¸ªå‘½ä»¤æç¤ºæ¡†ï¼-2" class="headerlink" title="å®Œæˆåå…³é—­è¿™ä¸ªå‘½ä»¤æç¤ºæ¡†ï¼"></a><center>å®Œæˆåå…³é—­è¿™ä¸ªå‘½ä»¤æç¤ºæ¡†ï¼</center></h4><p><strong>Thenä½ å°±ä¼šå‘ç°åœ¨ç›®å½•ä¸‹æœ‰ä¸€ä¸ªä½ cloneçš„ä»“åº“çš„åå­—çš„æ–‡ä»¶å¤¹äº†ï¼ˆå¦‚ä¸‹å›¾ï¼‰</strong></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://wx4.sinaimg.cn/large/006ZO6XQly1fq7nmlz8mhj30nt0hcgnd.jpg" alt="enter image description here" title="">                </div>                <div class="image-caption">enter image description here</div>            </figure><h3 id="3-è¿›å…¥cloneåçš„ä»“åº“ï¼ˆæ–‡ä»¶å¤¹ï¼‰è¿›è¡Œä¿®æ”¹å’Œpush"><a href="#3-è¿›å…¥cloneåçš„ä»“åº“ï¼ˆæ–‡ä»¶å¤¹ï¼‰è¿›è¡Œä¿®æ”¹å’Œpush" class="headerlink" title="3.è¿›å…¥cloneåçš„ä»“åº“ï¼ˆæ–‡ä»¶å¤¹ï¼‰è¿›è¡Œä¿®æ”¹å’Œpush"></a>3.è¿›å…¥cloneåçš„ä»“åº“ï¼ˆæ–‡ä»¶å¤¹ï¼‰è¿›è¡Œä¿®æ”¹å’Œpush</h3><p>è¿›å…¥åˆšåˆšcloneçš„é‚£ä¸ªæ–‡ä»¶å¤¹ï¼Œæ­¤æ—¶ä½ å¯ä»¥<strong><em>éšæ„ä¿®æ”¹æ–‡ä»¶å†…å®¹ å¢åŠ å†…å®¹</em></strong></p><p>ä¿®æ”¹å®Œæˆåï¼Œåœ¨cloneçš„æ–‡ä»¶å¤¹é‡Œ <strong>å³é”®ç„¶åç‚¹å‡»Git Bash Here</strong></p><p>ç„¶åè¾“å…¥ä¸‹é¢ä¸‰è¡ŒæŒ‡ä»¤</p><h4 id="git-add"><a href="#git-add" class="headerlink" title="git add ."></a>git add .</h4><h4 id="git-commit-m-â€˜éšä¾¿ä¸Šä¼ ç‚¹ä¸œè¥¿â€™"><a href="#git-commit-m-â€˜éšä¾¿ä¸Šä¼ ç‚¹ä¸œè¥¿â€™" class="headerlink" title="git commit -m â€˜éšä¾¿ä¸Šä¼ ç‚¹ä¸œè¥¿â€™"></a>git commit -m â€˜éšä¾¿ä¸Šä¼ ç‚¹ä¸œè¥¿â€™</h4><h4 id="git-push-origin-masterï¼ˆä¸»åˆ†æ”¯ä¸€èˆ¬ä¸ºmaster-å¦‚æœä½ æ²¡åˆ«çš„åˆ†æ”¯å°±å†™masterï¼‰"><a href="#git-push-origin-masterï¼ˆä¸»åˆ†æ”¯ä¸€èˆ¬ä¸ºmaster-å¦‚æœä½ æ²¡åˆ«çš„åˆ†æ”¯å°±å†™masterï¼‰" class="headerlink" title="git push origin masterï¼ˆä¸»åˆ†æ”¯ä¸€èˆ¬ä¸ºmaster,å¦‚æœä½ æ²¡åˆ«çš„åˆ†æ”¯å°±å†™masterï¼‰"></a>git push origin masterï¼ˆä¸»åˆ†æ”¯ä¸€èˆ¬ä¸ºmaster,å¦‚æœä½ æ²¡åˆ«çš„åˆ†æ”¯å°±å†™masterï¼‰</h4><h4 id="æ³¨ï¼šç¬¬äºŒè¡Œ-â€˜-â€˜-é‡Œé¢çš„ä¸œè¥¿éšä¾¿å†™-è¿™é‡Œä¸»è¦å†™ä½ pushçš„ä¸œè¥¿ä¸»è¦ä¿®æ”¹äº†ä»€ä¹ˆï¼ˆä¼šåœ¨é¡¹ç›®ä¸Šæ˜¾ç¤ºï¼‰"><a href="#æ³¨ï¼šç¬¬äºŒè¡Œ-â€˜-â€˜-é‡Œé¢çš„ä¸œè¥¿éšä¾¿å†™-è¿™é‡Œä¸»è¦å†™ä½ pushçš„ä¸œè¥¿ä¸»è¦ä¿®æ”¹äº†ä»€ä¹ˆï¼ˆä¼šåœ¨é¡¹ç›®ä¸Šæ˜¾ç¤ºï¼‰" class="headerlink" title="æ³¨ï¼šç¬¬äºŒè¡Œ â€˜ â€˜ é‡Œé¢çš„ä¸œè¥¿éšä¾¿å†™ è¿™é‡Œä¸»è¦å†™ä½ pushçš„ä¸œè¥¿ä¸»è¦ä¿®æ”¹äº†ä»€ä¹ˆï¼ˆä¼šåœ¨é¡¹ç›®ä¸Šæ˜¾ç¤ºï¼‰"></a>æ³¨ï¼šç¬¬äºŒè¡Œ â€˜ â€˜ é‡Œé¢çš„ä¸œè¥¿éšä¾¿å†™ è¿™é‡Œä¸»è¦å†™ä½ pushçš„ä¸œè¥¿ä¸»è¦ä¿®æ”¹äº†ä»€ä¹ˆï¼ˆä¼šåœ¨é¡¹ç›®ä¸Šæ˜¾ç¤ºï¼‰</h4><h4 id="pushæ—¶å¯èƒ½ä¼šè®©ä½ è¾“å…¥é‚®ç®±å¯†ç -å¡«ä¸Šå°±è¡Œ"><a href="#pushæ—¶å¯èƒ½ä¼šè®©ä½ è¾“å…¥é‚®ç®±å¯†ç -å¡«ä¸Šå°±è¡Œ" class="headerlink" title="pushæ—¶å¯èƒ½ä¼šè®©ä½ è¾“å…¥é‚®ç®±å¯†ç  å¡«ä¸Šå°±è¡Œ"></a>pushæ—¶å¯èƒ½ä¼šè®©ä½ è¾“å…¥é‚®ç®±å¯†ç  å¡«ä¸Šå°±è¡Œ</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://wx4.sinaimg.cn/large/006ZO6XQly1fq7o8kan65j30gc0d5mxu.jpg" alt="enter image description here" title="">                </div>                <div class="image-caption">enter image description here</div>            </figure><h4 id="åœ¨é¡¹ç›®ä¸­æ˜¾ç¤ºçš„ä¿®æ”¹ä¿¡æ¯"><a href="#åœ¨é¡¹ç›®ä¸­æ˜¾ç¤ºçš„ä¿®æ”¹ä¿¡æ¯" class="headerlink" title="åœ¨é¡¹ç›®ä¸­æ˜¾ç¤ºçš„ä¿®æ”¹ä¿¡æ¯"></a>åœ¨é¡¹ç›®ä¸­æ˜¾ç¤ºçš„ä¿®æ”¹ä¿¡æ¯</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://wx1.sinaimg.cn/large/006ZO6XQly1fq7o8l251ej30rf03x0st.jpg" alt="enter image description here" title="">                </div>                <div class="image-caption">enter image description here</div>            </figure><h3 id="4-æ›´æ–°è‡ªå·±ä¿®æ”¹åçš„æ–‡ä»¶"><a href="#4-æ›´æ–°è‡ªå·±ä¿®æ”¹åçš„æ–‡ä»¶" class="headerlink" title="4.æ›´æ–°è‡ªå·±ä¿®æ”¹åçš„æ–‡ä»¶"></a>4.æ›´æ–°è‡ªå·±ä¿®æ”¹åçš„æ–‡ä»¶</h3><p><strong>å¦‚æœä½ åæ¥ä¿®æ”¹äº†æ–‡ä»¶æƒ³è¦åŒæ­¥åˆ°githubä¸Šé¢å»çš„è¯ï¼Œé‚£ä¹ˆ:</strong></p><h3 id="é‡å¤æ­¥éª¤-3ä¸­çš„-ä¸‰ä¸ªæŒ‡ä»¤ä¾¿å¯ä»¥äº†"><a href="#é‡å¤æ­¥éª¤-3ä¸­çš„-ä¸‰ä¸ªæŒ‡ä»¤ä¾¿å¯ä»¥äº†" class="headerlink" title="é‡å¤æ­¥éª¤ 3ä¸­çš„ ä¸‰ä¸ªæŒ‡ä»¤ä¾¿å¯ä»¥äº†"></a>é‡å¤<em>æ­¥éª¤ 3</em>ä¸­çš„ <em>ä¸‰ä¸ªæŒ‡ä»¤</em>ä¾¿å¯ä»¥äº†</h3><h3 id="5-åˆ†æ”¯å¼€å‘"><a href="#5-åˆ†æ”¯å¼€å‘" class="headerlink" title="5. åˆ†æ”¯å¼€å‘"></a>5. åˆ†æ”¯å¼€å‘</h3><h4 id="è¿™ä¸ªæœ‰ç‚¹å¤§å°±ç›´æ¥æ”¾åœ°å€äº†"><a href="#è¿™ä¸ªæœ‰ç‚¹å¤§å°±ç›´æ¥æ”¾åœ°å€äº†" class="headerlink" title="è¿™ä¸ªæœ‰ç‚¹å¤§å°±ç›´æ¥æ”¾åœ°å€äº†"></a>è¿™ä¸ªæœ‰ç‚¹å¤§å°±ç›´æ¥æ”¾åœ°å€äº†</h4><p><a href="http://www.runoob.com/git/git-branch.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹çš„æ•™ç¨‹ ç®€å•ä»‹ç»çš„</a></p><p><a href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="noopener">è¿˜æœ‰å»–é›ªå³°è€å¸ˆçš„æ•™ç¨‹ ï¼æ¨èï¼è®²çš„å¾ˆè¯¦ç»†ï¼</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;&lt;em&gt;gitçš„è¶…ç®€å•ç”¨æ³•ï¼ˆä»¥test-repositoryä¸ºä¾‹ï¼‰&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="study" scheme="http://blog.fivezha.cn/categories/study/"/>
    
    
      <category term="git" scheme="http://blog.fivezha.cn/tags/git/"/>
    
  </entry>
  
</feed>
